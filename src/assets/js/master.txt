	var localData = 1;

	/**********************************************************************************************************************************
	1. ready
		a. set cache to false for ajaxSetup
		b. if locaStorage is null then create from external data
	***********************************************************************************************************************************/
	var clearColor = "white";
	var highlightColor = "yellow";
	var invalidColor = "#ffd0d5";

	$(document).ready(function()
	{		
		//alert("Your document is ready to build");
		//set cache to false for ajaxSetup
		$.ajaxSetup({ cache: false });
		$("#divLocal").focus();
		
		//$("#menuwrapper ul li").mouseover(function(e) {$(this).addClass(" iehover ");});
		//$("#menuwrapper ul li").mouseout(function(e) {$(this).removeClass(" iehover ");});

		$('#translation').on("change", function () {
			//alert($('#translation').val());
		});						

		document.onkeydown = checkKey;		

		// Initialize the plugin
		$('#my_popup').popup();
										
		//append divLocal by adding radio buttons for dc and td and initialize checking dc		
		$("#divLocal").append("<div id='crdRadios' class='w3-card-4' style='width:275px;padding-left:5px;padding-bottom:5px'>");
			$("#crdRadios").append("<table><tr><td width='100'><input id='radDC' name='radType' type='radio' onclick='loadData(1)' class='w3-radio' style='margin-right:5px' checked>W&B</input></td><td><input id='radTD' name='radType' onclick='loadData(1)' type='radio' class='w3-radio' style='margin-right:5px'>Transportation</input></td></tr>");
			//append divLocal by adding radio buttons for local and external  and initialize checking local 
			$("#crdRadios").append("<tr><td width='100'><input id='radLocal' name='radData' type='radio' onclick='loadData(1)' class='w3-radio' style='margin-right:5px' checked>Local</input></td><td><input id='radExternal' name='radData' type='radio' onclick='loadData(0)' class='w3-radio' style='margin-right:5px' >External</input></td></tr></table>");
		$("#divLocal").append("</div>");
		
		var retrievedObjectTransportation = localStorage.getItem('transportation');		
		if(retrievedObjectTransportation  == null)
		{		
			//alert("load Transportation data");
			//copy json data from external td json file to localStorage and call it transportation
			$.getJSON("Ajax/transportation.json", function(json){
				localStorage.setItem('transportation', JSON.stringify(json));
			});
						
		}	

		retrievedObjectTransportation = localStorage.getItem('transportation');				
		transData = JSON.parse(retrievedObjectTransportation);			
		//alert("transData.Sections[0].Fields[1].Subfields[2].Size = " + transData.Sections[0].Fields[1].Subfields[2].Size);
		//var curWidthUp = 0;
		//var curWidthDown = 0;
		

		var retrievedObjectButtons = localStorage.getItem('buttons');
		if(retrievedObjectButtons  == null)
		{		
			//alert("Create buttons");
			//copy json data from external td json file to localStorage and call it td
			$.getJSON("Ajax/buttons.json", function(json){
				//localStorage.setItem('buttons', JSON.stringify(json));
			});
		}

		var retrievedObjectDep = localStorage.getItem('departments');
		if(retrievedObjectDep  == null)
		{		
			//alert("Create buttons");
			//copy json data from external td json file to localStorage and call it td
			$.getJSON("Ajax/departments.json", function(json){
				//localStorage.setItem('departments', JSON.stringify(json));
			});
		}		
		
		//copy external dc data to localstorage if it does not already exist
		var retrievedObjectDC = localStorage.getItem('dc');		
		if(retrievedObjectDC == null)
		{
			//copy json data from external dc json file to localStorage and call it dc
			$.getJSON("ajax/dc.json", function(json){
				//localStorage.setItem('dc', JSON.stringify(json));
			});
		}

		//copy extrnal td data to localstorage if it does not already exist
		var retrievedObjectTD = localStorage.getItem('td');
		if(retrievedObjectTD  == null)
		{					
			//copy json data from external td json file to localStorage and call it td
			$.getJSON("Ajax/td.json", function(json){
				//localStorage.setItem('td', JSON.stringify(json));
			});
		}

		var retrievedObjectT = localStorage.getItem('t');
		if(retrievedObjectT  == null)
		{					
			//copy json data from external td json file to localStorage and call it td
			$.getJSON("Ajax/templates.json", function(json){
				//localStorage.setItem('templates', JSON.stringify(json));
			});
		}

		var retrievedObjectG = localStorage.getItem('g');
		if(retrievedObjectG  == null)
		{					
			//copy json data from external td json file to localStorage and call it td
			$.getJSON("Ajax/groups.json", function(json){
				//localStorage.setItem('groups', JSON.stringify(json));
			});
		}	

		//import sections and field
		var fileInput = document.getElementById("btnCSV"),

		readFile = function () {
			var reader = new FileReader();
			reader.onload = function () {

				if(importFlag == "sec")
				{
					var secNames = reader.result.split(',');
					for(var i=0;i<secNames.length;i++)
					{
						transData.Sections.push ( {"Section":secNames[i],"Fields": [],"Lists": []} );
						localStorage.setItem("transportation", JSON.stringify(transData));
						//transData.Sections[0].Fields.push ( {"Field": "Enter Field Name","Lists": []});
						//alert("Before conversion: " + secNames[i]);
						var newtTitle = toTitleCase(secNames[i]);
						//alert("after conversion: " + newtTitle);
						$("#divSecList" + secCount).append("<a onclick='setSection(\"" + newtTitle + "\")' class='w3-bar-item w3-button w3-light-grey' href='#about'>" + newtTitle + "</a>"); 				 					
					}
				}
				else if(importFlag == "fld")
				{
					//alert("Import new Fields");

					var fldNames = reader.result.split(',');
					var fieldCount = transData.Sections[0].Fields.length;
					$("#divDDFields" + "0").append("<div id='fldBarDD" + "0" + "' class='w3-bar w3-white' style'display:none'></div>");
					//adding new fields to the dropdown list for this section
					
					for(var j=0;j<fldNames.length;j++)
					{
						fieldCount++;
						var isChecked = "Checked";
						var isReadOnly = "";
						var isDisabled = "";
						
						transData.Sections[0].Fields.push ( {"Field": fldNames[j],"Checked": "","Readonly": "","Disabled":"Disabled","Lists": []} );
					}

					localStorage.setItem("transportation", JSON.stringify(transData));
					retrievedObjectTransportation = localStorage.getItem('transportation');	
					transData = JSON.parse(retrievedObjectTransportation);
					
					$("#fldBarDD" + "0").empty();
					//alert(transData.Sections.length);
					for(var i=0;i<transData.Sections.length;i++)
					{							
						for(var j=0;j<transData.Sections[i].Fields.length;j++)
						{
							//alert("i = " + i);
							//alert("j = " + j);
							//alert("k = " + transData.Sections[i].Fields[j].Subfields.length);

							for(var k=1;k<transData.Sections[i].Fields[j].Subfields.length;k++)
							{
								var fldName = transData.Sections[i].Fields[j].Subfields[k].Subfield;
								var isChecked = transData.Sections[i].Fields[j].Subfields[k].Checked;
								var isReadOnly = transData.Sections[i].Fields[j].Subfields[k].Readonly;
								var isDisabled = transData.Sections[i].Fields[j].Subfields[k].Disabled;

								if(j<transData.Sections[i].Fields[j].length-1)
								{
									$("#fldBarDD" + "0").append("<br><input id='chkFld" + j + "' type='checkbox' class='w3-check' style='margin-left:25px'  " + isChecked + "><button id='btn" + "0" + j + "' onclick='addDD(\"" + fldName + "\"," + j + "," + (j+1) + ")' class='w3-border w3-button' style='text-align:left;width:200px;margin-left:5px;margin-bottom:5px;' " + isDisabled + " " + isReadOnly + " contenteditable>" + fldName + "</button>");
								}
								else
								{
									$("#fldBarDD" + "0").append("<br><input id='chkFld" + j + "' type='checkbox' class='w3-check' style='margin-left:25px'  " + isChecked + "><button id='btn" + "0" + j + "' onclick='addDD(\"" + fldName + "\"," + j + "," + (j+1) + ")' class='w3-border w3-button' style='text-align:left;width:300px;margin-left:5px;margin-bottom:5px;' " + isDisabled + " " + isReadOnly + " contenteditable>" + fldName + "</button><img src='Images/add.jpg' onclick='addField(" + (j+1) + ")' style='margin-left:5px;width:20px'/>");
								}								
							}
						}
					}
				}	
				//$("#btnCSV").hide();
			};
			// start reading the file. When it is done, calls the onload event defined above.
			reader.readAsBinaryString(fileInput.files[0]);
			
		};

		fileInput.addEventListener('change', readFile);
		
		//set buttoncolor in td on click of btnColor
		//alert(document.getElementById("clrBtnColor").value);
		/*
		document.getElementById("clrBtnColor").addEventListener("click", function() 
		{
			//setBtnColor();
		});
		
		
		//set sectioncolor in td on click of secColor
		document.getElementById("clrSecColor").addEventListener("click", function() 
		{
			//setSecColor();
		});		
		
		// Get the modal
		var modal = document.getElementById('myModal');

		// Get the button that opens the modal
		var btn2 = document.getElementById("btnSubmit2");

		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];	

		// When the user clicks on <span> (x), close the modal
		span.onclick = function() {
			modal.style.display = "none";
		}

		// When the user clicks anywhere outside of the modal, close it
		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
		//get data from localstorage
		*/
		//loadData(1);
		
		newForm();	
	});

	function newForm()
	{
		/************************************************************************************************************
		Date: 08-13-2018
		Autor: Mario Camarena
		This function takes whatever data is made available at startup or on demand and creates a form based on that data		 
		*************************************************************************************************************/

		for(var i=0;i<transData.langs.length;i++)
		{			
			//determine the language selected by the user and convert the form fields and propoerties in that language
			var code = transData.langs[i].code;
			var lang = transData.langs[i].language;			
			$('#btnLanguage').append($('<option>', {value:code, text:lang}));
		}

		for(var i=0;i<transData.Sections.length;i++)
		{	
			$("#divProps").append("<div id='div" + i + "'></div>");	//this is the container for all of the buttons on the right tools menu			

			//These variables will be used to create and configure a button for each of the sections
			var secId = transData.Sections[i].Id;
			var secName = transData.Sections[i].Section;		
			var secBtnWidth = transData.Buttons[0].Sections[0].Width;
			var secBtnHeight = transData.Buttons[0].Sections[0].Height;
			var secBtnBGColor = transData.Buttons[0].Sections[0].Backgroundcolor;
			var secBtnColor = transData.Buttons[0].Sections[0].Color;
			var secBtnMarginLeft = transData.Buttons[0].Sections[0].MarginLeft;

			//These variables will be used to create/configure/manage each section on the form
			var secChecked = transData.Sections[i].Checked;
			var secReadOnly = transData.Sections[i].Readonly;
			var secDisabled = transData.Sections[i].Disabled;
			var secWidth = transData.Buttons[0].Sections[0].Width;
			var secHeight = transData.Sections[i].Height;
			var secMarginLeft = transData.Sections[i].MarginLeft;
			var secBGColor = transData.Sections[i].Backgroundcolor;					
			var secColorPicker = "<input id='clr" + secId + "' type='color' onchange='getSecColor()' onclick='getSecColor()' value='" + secBtnBGColor + "' style='background-color:" + "white" + ";width:25px;margin-left:5px'/>";

			$("#div" + i).append("<div id='div" + secId + "' class=''></div>");
			$("#div" + i).append("<div id='div" + i + secId + "' class='w3-accordion-content'></div>");				
			$("#div" + secId).append("<input id='chk" + secId + "' type='checkbox' class='w3-check' style='margin-left:" + secBtnMarginLeft + "px' onclick='fieldChecked()' " + secChecked + "><button id='btn" + secId + "' onclick='accordian(\"" + i + secId + "\")' class='w3-button' style='color:" + secBtnColor + ";background-color:" + secBtnBGColor + ";font-size:12px;text-align:left;height:" + secBtnHeight + "px;width:" + secBtnWidth + "px;margin-left:5px;margin-bottom:0px' " + secDisabled + " " + secReadOnly + " >" + secName + "</button>" + secColorPicker);				
		}
	}

	function findIndexById(transData, id) {
		for (var i=0;i<list.length;i++) {
		  if (list[i].id == id) {
			return i;
		  };
		};  
	  
		return -1;
	};

	function checkKey(e) {
		//alert(curField.id);
		e = e || window.event;
		//alert(e.id);
		var chkFldSize = document.getElementById("chkFldSize");
		//alert("curLabel = lbl" + curField.id);
		//curField.width(curField.value.length*10);
		//var curDiv = "div" + curField.id;
		//var curLbl = "lbl" + curField.id;
		//alert("curDiv = " + curDiv);
		//$("#" + curDiv).width($("#" + curLbl).html().length*10);
		//$("#" + curLbl).width($("#" + curLbl).html().length*8);
		if(curField != null && chkFldSize.checked)
		{
			if($("#" + curField.id).val().length == 0)
			{				
				if (e.keyCode == '38') {
					//alert("Width of div" + curField.id + " in element = " + $("#div" + curField.id).width());				
					curWidthUp = parseInt($("#div" + curField.id).width()+5);
					$("#div" + curField.id).width(curWidthUp);
					//$("#" + curField.id).val(curWidthUp+10);				
					//alert("Up After " + $("#div" + curField.id).width());							
					
					for (var i=0;i<transData.Sections.length;i++) 
					{
						for (var j=0;j<transData.Sections[i].Fields.length;j++) 
						{
							for (var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++) 
							{
								var id = transData.Sections[i].Fields[j].Subfields[k].Id;
								if (transData.Sections[i].Fields[j].Subfields[k].Id == curField.id) {								
									transData.Sections[i].Fields[j].Subfields[k].Width = curWidthUp+10;
									localStorage.setItem('transportation', JSON.stringify(transData));
									$("#txtWidth").val(transData.Sections[i].Fields[j].Subfields[k].Width);
									//alert("Width of div" + curField.id + " in element = " + $("#div" + curField.id).width());				
									//alert("Width of div" + curField.id + " in data = " + transData.Sections[i].Fields[j].Subfields[k].Width);
								}
							}
						}
					}
					//$("#" + curField.id).width($("#" + curField.id).width()+5);
				}											
				else if (e.keyCode == '40') {
					//alert("Width of div" + curField.id + " in element = " + $("#div" + curField.id).width());				
					curWidthDown = parseInt($("#div" + curField.id).width()-5);
					$("#div" + curField.id).width(curWidthDown);
					//$("#" + curField.id).val(curWidthDown+10);				
					//alert("Up After " + $("#div" + curField.id).width());							
					
					for (var i=0;i<transData.Sections.length;i++) 
					{
						for (var j=0;j<transData.Sections[i].Fields.length;j++) 
						{
							for (var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++) 
							{
								var id = transData.Sections[i].Fields[j].Subfields[k].Id;
								if (transData.Sections[i].Fields[j].Subfields[k].Id == curField.id) {								
									transData.Sections[i].Fields[j].Subfields[k].Width = curWidthDown+10;
									localStorage.setItem('transportation', JSON.stringify(transData));
									$("#txtWidth").val(transData.Sections[i].Fields[j].Subfields[k].Width);
									//alert("Width of div" + curField.id + " in element = " + $("#div" + curField.id).width());				
									//alert("Width of div" + curField.id + " in data = " + transData.Sections[i].Fields[j].Subfields[k].Width);
								}
							}
						}
					}
					//$("#" + curField.id).width($("#" + curField.id).width()+5);					
				}
				else if (e.keyCode == '37') {
					// left arrow
					//alert("Left");
					curWidthDown = parseInt($("#div" + curField.id).width()-5);
					$("#div" + curField.id).width(curWidthDown);		
					$("#txtWidth").val(curWidthDown);		
					//$("#" + curField.id).width($("#" + curField.id).width()-5);
				}
				else if (e.keyCode == '39') {
					// right arrow
					//alert("right");
					curWidthUp = parseInt($("#div" + curField.id).width()+5);
					$("#div" + curField.id).width(curWidthUp);		
					$("#txtWidth").val(curWidthUp);
					//$("#" + curField.id).width($("#" + curField.id).width()+5);	
				}				
			}
		}
		
		if (e.keyCode == '118') {
			//alert("F7");				
			clearCache();							
			//alert("'RP");							
			//reloadPage();
		}
	}

	function toTitleCase(str) {
		return str.replace(
			/\w\S*/g,
			function(txt) {
				return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
			}
		);
	}

	function sleep(miliseconds) {
		var currentTime = new Date().getTime();
		while (currentTime + miliseconds >= new Date().getTime()) {
		}
	}	

	function ShowResults(value, index, ar) {
		//alert(index);
	}
	
	function onFocus()
	{
		curField = event.target;
		//alert(curField.id);
		//var highlightColor = "yellow";

		//$("#btnLanguage").css('background-color', 'white');
		//$("#google_translate_element").css('background-color', 'white');
	
		$("#txtBlurName").val(curField.Name);
	
		var id = curField.id; 
		for(var i=0;i<transData.Sections.length;i++) //loop through all sections
		{
			var curCB = "";
			for(var j=0;j<transData.Sections[i].Fields.length;j++) //loop through all fields
			{
				for(var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++) //loop through all fields
				{
					//alert("id = " + id + " and transData.Sections[i].Fields[j].Subfields[k].Id = " + transData.Sections[i].Fields[j].Subfields[k].Id);
					var subKey = transData.Sections[i].Fields[j].Subfields[k].Key;  
					var subId = transData.Sections[i].Fields[j].Subfields[k].Id;
					var subField = transData.Sections[i].Fields[j].Subfields[k].Subfield;
					var subChecked = transData.Sections[i].Fields[j].Subfields[k].Checked;
					var subRequired = transData.Sections[i].Fields[j].Subfields[k].Required;
					var subReadOnly = transData.Sections[i].Fields[j].Subfields[k].Readonly;
					var subDisabled = transData.Sections[i].Fields[j].Subfields[k].Disabled;
					var subWidth = transData.Sections[i].Fields[j].Subfields[k].Width;
					var subHeight = transData.Sections[i].Fields[j].Subfields[k].Height;
					var subMinLength = transData.Sections[i].Fields[j].Subfields[k].Minlength;

					var subType = transData.Sections[i].Fields[j].Subfields[k].Type;
					var subSize = transData.Sections[i].Fields[j].Subfields[k].Size;

					var subMaxLength = transData.Sections[i].Fields[j].Subfields[k].Maxlength;
					var subTextColor = transData.Sections[i].Fields[j].Subfields[k].Textcolor;
					var subMarginLeft = transData.Sections[i].Fields[j].Subfields[k].MarginLeft;
					var subBackGroundColor = transData.Sections[i].Fields[j].Subfields[k].Backgroundcolor;
					//alert("Sub height = " + subHeight);
					
					$("#" + subId).css('background-color', 'white');
					//alert(subBackGroundColor);
					if(id==transData.Sections[i].Fields[j].Subfields[k].Id)
					{
						$("#txtBlurId").val(subId);
						$("#txtBlurId").attr('readonly', true);
						$("#txtHeight").val(subHeight);
						$("#txtMinLength").val(subMinLength);
						$("#txtWidth").val(subWidth);

						$("#txtType").val(subType);
						$("#txtSize").val(subSize);

						$("#txtMaxLength").val(subMaxLength);
						$("#txtBlurName").val(subField);
						$("#txtBlurName").attr('readonly', true);

						if(subChecked == "")
						{
							$("#chkChecked").prop( "checked", false);
						}
						else
						{
							$("#chkChecked").prop( "checked", true);
						}

						if(subRequired == "")
						{
							$("#chkRequired").prop( "checked", false);
						}
						else
						{
							$("#chkRequired").prop( "checked", true);
						}

						if(subReadOnly == "")
						{
							$("#chkReadOnly").prop( "checked", false);
						}
						else
						{
							$("#chkReadOnly").prop( "checked", true);
						}
							
						if(subDisabled == "")
						{
							$("#chkDisabled").prop( "checked", false);
						}
						else
						{
							$("#chkDisabled").prop( "checked", true);
						}					
					}
				}
			}
		}
		curField.style.backgroundColor = highlightColor;
		showProps();	
	}

	function onFocusxx()
	{
		curField = event.target;
		//alert(curField.id);
		$("#txtBlurName").val(curField.Name);
		var id = curField.id; 
		for(var i=0;i<transData.Sections.length;i++) //loop through all sections
		{
			var curCB = "";
			for(var j=0;j<transData.Sections[i].Fields.length;j++) //loop through all fields
			{
				alert("id = " + id + " and transData.Sections[i].Fields[j].Id = " + transData.Sections[i].Fields[j].Id);
				if(id==transData.Sections[i].Fields[j].Id)
				{
					var keyName = transData.Sections[i].Fields[j].keyName;  
					var fldId = transData.Sections[i].Fields[j].Id;
					var fldField = transData.Sections[i].Fields[j].Field;
					var fldChecked = transData.Sections[i].Fields[j].Checked;
					var fldReadOnly = transData.Sections[i].Fields[j].Readonly;
					var fldDisabled = transData.Sections[i].Fields[j].Disabled;
					var fldWidth = transData.Sections[i].Fields[j].Width;
					var fldHeight = transData.Sections[i].Fields[j].Height;
					var fldTextColor = transData.Sections[i].Fields[j].Textcolor;
					var fldMarginLeft = transData.Sections[i].Fields[j].MarginLeft;
					var fldBackGroundColor = transData.Sections[i].Fields[j].Backgroundcolor;
					alert(fldField);
					
					$("#lblBlurId").val(fldId);
					$("#txtBlurId").attr('readonly', true);
						
					$("#lblBlurName").val(fldField);
					$("#txtBlurName").attr('readonly', true);

					if(fldChecked == "")
					{
						$("#chkChecked").prop( "checked", false);
					}
					else
					{
						$("#chkChecked").prop( "checked", true);
					}

					if(fldReadOnly == "")
					{
						$("#chkReadOnly").prop( "checked", false);
					}
					else
					{
						$("#chkReadOnly").prop( "checked", true);
					}
						
					if(fldDisabled == "")
					{
						$("#chkDisabled").prop( "checked", false);
					}
					else
					{
						$("#chkDisabled").prop( "checked", true);
					}					
				}
			}
		}	
		showProps();		
	}

	function newFormx()
	{	
		/************************************************************************************************************
		Date: 08-13-2018
		Autor: Mario Camarena
		This function takes whatever data is made available at startup or on demand and creates a form based on that data		 
		*************************************************************************************************************/
		

		for(var i=0;i<transData.langs.length;i++)
		{			
			//determine the language selected by the user and convert the form fields and propoerties in that language
			var code = transData.langs[i].code;
			var lang = transData.langs[i].language;			
			$('#btnLanguage').append($('<option>', {value:code, text:lang}));
		}

		for(var i=0;i<transData.Sections.length;i++)
		{	
			$("#divProps").append("<div id='div" + i + "'></div>");	//this is the container for all of the buttons on the right tools menu			

			//These variables will be used to create and configure a button for each of the sections
			var secId = transData.Sections[i].Id;
			var secName = transData.Sections[i].Section;		
			var secBtnWidth = transData.Buttons[0].Sections[0].Width;
			var secBtnHeight = transData.Buttons[0].Sections[0].Height;
			var secBtnBGColor = transData.Buttons[0].Sections[0].Backgroundcolor;
			var secBtnColor = transData.Buttons[0].Sections[0].Color;
			var secBtnMarginLeft = transData.Buttons[0].Sections[0].MarginLeft;

			//These variables will be used to create/configure/manage each section on the form
			var secChecked = transData.Sections[i].Checked;
			var secReadOnly = transData.Sections[i].Readonly;
			var secDisabled = transData.Sections[i].Disabled;
			var secWidth = transData.Buttons[0].Sections[0].Width;
			var secHeight = transData.Sections[i].Height;
			var secMarginLeft = transData.Sections[i].MarginLeft;
			var secBGColor = transData.Sections[i].Backgroundcolor;					
			var secColorPicker = "<input id='clr" + secId + "' type='color' onchange='getSecColor()' onclick='getSecColor()' value='" + secBtnBGColor + "' style='background-color:" + "white" + ";width:25px;margin-left:5px'/>";

			$("#div" + i).append("<div id='div" + secId + "' class=''></div>");
			$("#div" + i).append("<div id='div" + i + secId + "' class='w3-accordion-content'></div>");				
			$("#div" + secId).append("<input id='chk" + secId + "' type='checkbox' class='w3-check' style='margin-left:" + secBtnMarginLeft + "px' onclick='fieldChecked()' " + secChecked + "><button id='btn" + secId + "' onclick='accordian(\"" + i + secId + "\")' class='w3-button' style='color:" + secBtnColor + ";background-color:" + secBtnBGColor + ";font-size:12px;text-align:left;height:" + secBtnHeight + "px;width:" + secBtnWidth + "px;margin-left:5px;margin-bottom:0px' " + secDisabled + " " + secReadOnly + " >" + secName + "</button>" + secColorPicker);				

			/*			
			for(var j=0;j<transData.Sections[i].Fields.length;j++)
			{				
				var saBtnWidth = transData.Buttons[0].SelectAll[0].Width;
				var saBtnHeight = transData.Buttons[0].SelectAll[0].Height;
				var saBtnBGColor = transData.Buttons[0].SelectAll[0].Backgroundcolor;
				var saBtnColor = transData.Buttons[0].SelectAll[0].Color;
				var saBtnMarginLeft = transData.Buttons[0].SelectAll[0].MarginLeft;

				var fldBtnWidth = transData.Buttons[0].Fields[0].Width;
				var fldBtnHeight = transData.Buttons[0].Fields[0].Height;
				var fldBtnBGColor = transData.Buttons[0].Fields[0].Backgroundcolor;
				var fldBtnColor = transData.Buttons[0].Fields[0].Color;
				var fldBtnMarginLeft = transData.Buttons[0].Fields[0].MarginLeft;


				var fldId = transData.Sections[i].Fields[j].Id;
				var fldName = transData.Sections[i].Fields[j].Field;
				$("#div" + i).append("<div id='div" + fldId + "' class=''></div>");
				$("#div" + i).append("<div id='div" + i + fldId + "' class='w3-accordion-content'></div>");		
				//alert("Field id = " + transData.Sections[i].Fields[j].Field);
				//transData.Sections[i].Fields[j].Id = "fld" + i + j + "00";
				//transData.Sections[i].Fields[j].MarginLeft = "0";
				
				var fldChecked = transData.Sections[i].Fields[j].Checked;
				var fldReadOnly = transData.Sections[i].Fields[j].Readonly;
				var fldDisabled = transData.Sections[i].Fields[j].Disabled;
				var fldWidth = transData.Buttons[0].Fields[0].Width;
				var fldHeight = transData.Sections[i].Fields[j].Height;
				var fldMarginLeft = transData.Sections[i].Fields[j].MarginLeft;
				var fldBGColor = transData.Sections[i].Fields[j].Backgroundcolor;

				//alert("fldMarginLeft = " + fldMarginLeft);
				//addImage = "<img id='imgConf" +  fldId + "' src='Images/tools1.jfif' onclick='showProps()' style='margin-left:5px;margin-bottom:10px;width:25px'/>";			
				addImage  = "";
				//$("#div" + fldId).append("<input id='chk" + fldId + "' type='checkbox' class='w3-check' style='margin-left:" + fldMarginLeft + "px' onclick='fieldChecked(\"" + fldName + "\"," + "0" + "," + j + ")' " + fldChecked + "><button id='btnFld" + i + j + "' onclick='addDD(\"" + fldName + "\"," + j + "," + (j+1) + ")' class='w3-border w3-" + fldBGColor + " w3-button' style='text-align:left;width:" + fldWidth + "px;margin-left:5px;margin-top:0px;' " + fldDisabled + " " + fldReadOnly + " >" + fldName + "</button>");
				//$("#div" + fldId).append("<input id='chk" + fldId + "' type='checkbox' class='w3-check' style='margin-left:" + fldMarginLeft + "px' onclick='fieldChecked(\"" + fldId + "\")' " + fldChecked + "><button id='btn" + fldId + "' onfocus='onFocus(\"" + fldId + "\")' onblur='onBlur(\"" + fldId + "\")' onclick='showhide(\"" + subId + "\")' class='w3-button' style='color:white;background-color:" + fldBGColor + ";font-size:12px;text-align:left;height:" + fldHeight + "px;width:" + fldWidth + "px;margin-left:5px;margin-top:0px;margin-bottom:5px' " + fldDisabled + " " + fldReadOnly + " >" + fldName + "</button>" + addImage);

				//alert(fldBtnBGColor);
				//alert(fldBtnColor);
				if(fldId == "fld0000")
				{
					fldBtnBGColor = saBtnBGColor;
					fldBtnColor = saBtnColor;
					fldColorPicker = "<input id='clr" + fldId + "' type='color' onchange='getSAColor()' onclick='getSAColor()' value='" + saBtnBGColor + "' style='background-color:" + "white" + ";width:25px;margin-left:5px'/>";
				}
				else if(fldId == "fld0100")
				{
					fldColorPicker = "<input id='clr" + fldId + "' type='color' onchange='getFldColor()' onclick='getFldColor()' value='" + fldBtnBGColor + "' style='background-color:" + "white" + ";width:25px;margin-left:5px'/>";
				}
				else
				{
					fldColorPicker = "";
				}				
				
				$("#div" + fldId).append("<input id='chk" + fldId + "' type='checkbox' class='w3-check' style='margin-left:" + fldBtnMarginLeft + "px' onclick='fieldChecked()' " + fldChecked + "><button id='btn" + fldId + "' onclick='accordian(\"" + i + fldId + "\")' class='w3-button' style='color:" + fldBtnColor + ";background-color:" + fldBtnBGColor + ";font-size:12px;text-align:left;height:" + fldBtnHeight + "px;width:" + fldBtnWidth + "px;margin-left:5px;margin-bottom:0px' " + fldDisabled + " " + fldReadOnly + " >" + fldName + "</button>" + fldColorPicker + addImage);				
				for(var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++)
				{
					var subBtnWidth = transData.Buttons[0].Subfields[0].Width;
					var subBtnHeight = transData.Buttons[0].Subfields[0].Height;
					var subBtnBGColor = transData.Buttons[0].Subfields[0].Backgroundcolor;
					var subBtnColor = transData.Buttons[0].Subfields[0].Color;
					var subBtnMarginLeft = transData.Buttons[0].Subfields[0].MarginLeft;					

					var subId = transData.Sections[i].Fields[j].Subfields[k].Id;
					var subName = transData.Sections[i].Fields[j].Subfields[k].Subfield;
					$("#div" + i + fldId).append("<div id='div" + subId + "' class='w3-white'></div>");
					
					var subChecked = transData.Sections[i].Fields[j].Subfields[k].Checked;
					var subReadOnly = transData.Sections[i].Fields[j].Subfields[k].Readonly;
					var subDisabled = transData.Sections[i].Fields[j].Subfields[k].Disabled;
					var subWidth = transData.Buttons[0].Subfields[0].Width;
					var subHeight = transData.Sections[i].Fields[j].Subfields[k].Height;
					var subMarginLeft = transData.Buttons[0].Subfields[0].MarginLeft;
					var subBGColor = transData.Sections[i].Fields[j].Subfields[k].Backgroundcolor;
					var subType = transData.Sections[i].Fields[j].Subfields[k].Type;				
					var addImage = "";

					//alert(subType);

					//$("#divFieldProperties").append("<div><" + "button class='w3-button'" + ">" + subName + "</" + "button" + "></div>");
					//alert("subName = " + subName);

					//if(k=transData.Sections[i].Fields[j].Subfields.length-1)
					//{
					//	addImage = "<img src='Images/add.jpg' onclick='addField(" + (j+1) + ")' style='margin-left:5px;width:20px'/>";
					//}
					//addImage = "<img id='imgConf" +  subId + "' src='Images/tools1.jfif' onclick='showProps()' style='margin-left:5px;margin-bottom:10px;width:25px'/>";

					var subColorPicker = "";

					if(subId == "sub0100" || subId == "sub0200" || subId == "sub0300" || subId == "sub0400" || subId == "sub0500" || subId == "sub0600" || subId == "sub0700")
					{
						subColorPicker = "<input id='clr" + subId + "' type='color' onchange='getSubColor()' onclick='getSubColor()' value='" + subBtnBGColor + "' style='background-color:" + "white" + ";width:25px;margin-left:5px'/>";
					}					

					$("#div" + subId).append("<input id='chk" + subId + "' type='checkbox' class='w3-check' style='margin-left:" + subBtnMarginLeft + "px' onclick='fieldChecked()' " + subChecked + "><button id='btn" + subId + "' onclick='addDD(\"" + subName + "\"," + j + "," + (j+1) + ")' class='w3-button' style='color:" + subBtnColor + ";background-color:" + subBtnBGColor + ";font-size:12px;text-align:left;height:" + subBtnHeight + "px;width:" + subBtnWidth + "px;margin-left:5px;margin-bottom:0px;' " + subDisabled + " " + subReadOnly + " >" + subName + "</button>" + subColorPicker + addImage);
					for(var l=0;l<transData.Sections[i].Fields[j].Subfields[k].Lists.length;l++)
					{
						var lstBtnWidth = transData.Buttons[0].Lists[0].Width;
						var lstBtnHeight = transData.Buttons[0].Lists[0].Height;
						var lstBtnBGColor = transData.Buttons[0].Lists[0].Backgroundcolor;
						var lstBtnColor = transData.Buttons[0].Lists[0].Color;
						var lstBtnMarginLeft = transData.Buttons[0].Lists[0].MarginLeft;
						
						var lstId = transData.Sections[i].Fields[j].Subfields[k].Lists[l].Id;
						$("#div" + subId).append("<div id='div" + lstId + "' class='w3-white'></div>");

						var lstName = transData.Sections[i].Fields[j].Subfields[k].Lists[l].List;
						var lstChecked = transData.Sections[i].Fields[j].Subfields[k].Lists[l].Checked;
						var lstReadOnly = transData.Sections[i].Fields[j].Subfields[k].Lists[l].Readonly;
						var lstDisabled = transData.Sections[i].Fields[j].Subfields[k].Lists[l].Disabled;
						var lstWidth = transData.Buttons[0].Lists[0].Width;
						var lstHeight = transData.Sections[i].Fields[j].Subfields[k].Lists[l].Height;
						var lstMarginLeft = transData.Buttons[0].Lists[0].MarginLeft;
						var lstBGColor = transData.Sections[i].Fields[j].Subfields[k].Lists[l].Backgroundcolor;
						//alert(lstName);

						//addImage = "<img id='imgConf" +  lstId + "' src='Images/tools1.jfif' onclick='showProps()' style='margin-left:5px;margin-bottom:10px;width:25px'/>";
						
						var lstColorPicker = ""; 
						if(lstId == "lst0100" || lstId == "lst0200" || lstId == "lst0300" || lstId == "lst0400" || lstId == "lst0500" || lstId == "lst0600" || lstId == "lst0700")
						{
							lstColorPicker = "<input id='clr" + lstId + "' type='color' onchange='getLstColor()' onclick='getLstColor()' value='" + lstBtnBGColor + "' style='background-color:" + "white" + ";width:25px;margin-left:5px'/>";
						}

						$("#div" + lstId).append("<input id='chk" + lstId + "' type='checkbox' class='w3-check' style='margin-left:" + lstBtnMarginLeft + "px' onclick='fieldChecked()' " + lstChecked + "><button id='btn" + lstId + "' onclick='addDD(\"" + lstName + "\"," + j + "," + (j+1) + ")' class='w3-button' style='color:" + lstBtnColor + ";background-color:" + lstBtnBGColor + ";font-size:12px;text-align:left;height:" + lstBtnHeight + "px;width:" + lstBtnWidth + "px;margin-left:5px;margin-bottom:0px;' " + lstDisabled + " " + lstReadOnly + " >" + lstName + "</button>" + lstColorPicker + addImage);
					}
				}
			}	
			//$("#lstProperties").append("<li><button class='w3-btn w3-blue' style='margin-bottom:5px'>" + fldId + "</button></li>");
			localStorage.setItem("transportation", JSON.stringify(transData));			
		}
		
		$("#divTools").append("<div id='divDDList' style='margin-top:5px'></div>");
		
		$("#divStart").hide();		
		//$("#divMain").append('<div class="w3-row"><div id="divMenu" class="col-sm-2 w3-white" w3-white" margin-right:0px"></div><div id="divForm" class="col-sm-10 w3-border w3-white" style="border:1px;height:850px"></div></div>');		
			
		//$("#divForm").append('<form id="divForm" ondrop="drop(event)" ondragover="allowDrop(event)" style="height:100px;display:block;border: 1px solid black;"></form>');
		
		$("#divStart").hide();		
		//$("#divMain").append('<div class="w3-row" style="width:1200px"><div id="divMenu" class="w3-quarter w3-container w3-white"></div><div id="divForm" class="w3-container w3-white"></div></div>');
		
		$("#divMenu").empty();
		$("#divMenu").append('<form id="menuForm" class="col-sm-10 form-inline w3-left"></form>');
		//$("#menuForm").append('<div id="divRemoveLogo" class="w3-center w3-margin"><input type="button" id="btnRemoveLogo" style="width:200px" class="w3-button w3-blue w3-border" value="Remove Logo"></div>');				
		
		var curLanguage = "English";
		
		$("#navMain").append("<div id='divLogoLabel' style='text-align:left;font-size:12px;display:none;' class='w3-White'>Select Logo</div>");					
		$("#navMain").append("<container id='divLogo' style='display:none;' class='w3-light-grey'></container>");			
		//$("#divLogo").append("<div id='divLogoTitle' class='w3-center' contenteditable>Add Logo</div>");			
		$("#divLogo").append('<div id="divAddLogo"><input type="file" id="fileUpload" style="margin-top:5px;margin-bottom:5px;width:300px" class="w3-white w3-text-blue" /></div>');
		$("#menuForm").append('<div id="divHeader" class="w3-left"><input type="button" onclick="addHeader()" style="background-color:#2b4370;margin-bottom:5px;margin-top:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnHeader" value="Header"></div>');						
		$("#menuForm").append('<div id="divFaxHeader" class="w3-left"><input type="button" onclick="addFaxHeader()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnFaxHeader" value="Fax Header"></div>');			
		$("#menuForm").append('<div id="divTitle" class="w3-left"><input type="button" onclick="addTitle()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnTitle" value="Title"></div>');	
		$("#menuForm").append('<div id="divInstructions" class="w3-left"><input type="button" onclick="addInstructions()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnInstructions" value="Instructions"></div>');			
		$("#menuForm").append('<div id="divSections" class="w3-left"><input type="button" onclick="addSection()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnAddSection" value="Section"></div>');									
		$("#menuForm").append('<div id="divContact" class="w3-left"><input type="button" onclick="addContact()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnAddContact" value="Contact Information"></div>');									
		$("#menuForm").append('<div class="w3-left"><input type="button" onclick="addFooter()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnFooter" value="Footer"></input></div>');
		$("#menuForm").append('<div class="w3-left"><input type="button" onclick="addSubmit()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnSubmit" value="Submit"></input></div>');		
		$("#menuForm").append('<div id="divGroupLabel" class="w3-left"><input type="button" onclick="addGroupLabel()" style="background-color:#2b4370;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-left" id="btnGroupLabel" value="Group Label"></div>');						
		$("#menuForm").append('<div id="divTextbox" onclick="setLabel(\'' + "Date" + '\')" class="w3-left"><input type="button" style="background-color:#2b5390;margin-bottom:5px;margin-top:25px;width:160px;text-align:right" class="w3-btn w3-border" id="btnAddTextbox" value="Textbox"></div>');						
		$("#menuForm").append('<div id="divCheckbox" onclick="setLabel(\'' + "Checkbox" + '\')" class="w3-left"><input type="button" style="background-color:#2b5390;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-border" id="btnAddCheckbox" value="Checkbox"></div>');						
		$("#menuForm").append('<div id="divRadio" onclick="setLabel(\'' + "Radio" + '\')" class="w3-left"><input type="button" style="background-color:#2b5390;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-border" id="btnAddRadio" value="Radio"></div>');						
		$("#menuForm").append('<div id="divDropdown" onclick="setLabel(\'' + "Dropdown" + '\')" class="w3-left"><input type="button" style="background-color:#2b5390;margin-bottom:5px;width:160px;text-align:right" class="w3-btn w3-border" id="btnAddDropdown" value="Dropdown"></div>');						
		$("#menuForm").append('<div id="divDownload" class="w3-left"><input type="button" onclick="download()" style="margin-bottom:5px;width:160px;text-align:left" class="w3-btn w3-light-grey w3-text w3-border w3-right" id="btnDownload" value="Download"></div>');	
		$("#menuForm").append("<div><p id='pLanguage' class='notranslate w3-bold w3-left' style='margin-top:25px;font-size:20px;color:green;display:none'>" + curLanguage + "</p></div>");	
					
		//$("#menuForm").append('<div id="divLanguage" class="w3-left"><div type="button" onclick="addHeader()" style="background-color:#2b4370;margin-bottom:5px;margin-top:5px;width:160px;text-align:left" class="w3-btn w3-left" id="btnLanguage" value="'+ curLanguage + '" /></div>');			
		var logoResponse = "<div id='divFormLogo' class='w3-center w3-margin'><img id='imgLogo' width='200px' style='display:none'/></div>";
		$("#divForm").append(logoResponse);
		$("#fileUpload").change(function () {
			var filePath;			
			filePath=$('#fileUpload').val().split("\\")[2];
			var fullPath = "/src/assets/images/" + filePath;
			//alert("fullPath = '" + fullPath + "'");					
			
			$("#divFormLogo").empty();
			$("#divFormLogo").append("<img id='imgLogo' src='" + "/src/assets/images/" + filePath + "' width='200px' />");				
		});		
		//$("#divForm").append('<input type="button" class="w3-btn w3-green w3-margin" id="btnSub" style="width:100px;margin-bottom:25px" value="Submit"></input></td>');		
		//var btnLogo = document.getElementById("btnLogo");
		
		// When the user clicks the button, open the modal		

		//var faxheaderDate = "<div class='w3-margin'><b><input id='lblDate' type='text' value='Date:' style='border:0px;text-align:center'></input><b></div>";												
		
		//alert("script");
		var acc = document.getElementsByClassName("accordion");
		var i;
		
		//alert(acc.length);
		for (i = 0; i < acc.length; i++) {
		  acc[i].addEventListener("click", function() {
			this.classList.toggle("active");
			var panel = this.nextElementSibling;
			if (panel.style.maxHeight){
				//alert("1");
			  panel.style.maxHeight = null;
			} else {
				//alert("2");
			  panel.style.maxHeight = panel.scrollHeight + "px";
			} 
		  });
		}
		
		//var retrievedObject = localStorage.getItem('transportation');
		//var data = JSON.parse(retrievedObject);
		//data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 4));
		
		//var a = document.createElement('a');
			
		//a.href = 'data:' + data;
		//a.download = 'transportation.json';
		//a.innerHTML = 'download Transportation JSON';
		
		//var container = document.getElementById('divMenu');
		//container.display = "none";
		//container.appendChild(a)
		
		
		var retrievedObject = localStorage.getItem('transportation');
		var data = JSON.parse(retrievedObject);
		data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 4));
		
		var a = document.createElement('a');
			
		a.href = 'data:' + data;
		a.download = 'data.json';
		a.innerHTML = 'download JSON';
		
		var container = document.getElementById('divMenu');
		container.display = "none";
		container.appendChild(a);
		
		//alert("Your form is ready");

		var image = transData.header[0].company[0].logo[0].name;
		//alert(image);
		var title = transData.title;

		addLogo(image);
		addTitle(title);
		//addInstructions();
		addSection();
		//addDD();
		//importDDFile();
		*/		
	}

	function getSAColor()
	{
		//alert($("#saBtnBGColorPicker").val());
		var saColorPicker = event.target;
		//alert("saColorPicker id = " + saColorPicker.id);
		var saSelectedColor = $("#" + saColorPicker.id).val();
		transData.Buttons[0].SelectAll[0].Backgroundcolor = saSelectedColor;
		//alert("Selected color = " + selectedColor);	
		//alert("curSAId + " + "btnfld0000");	
		$('#btnfld0000').css({"background-color": saSelectedColor});
		localStorage.setItem("transportation", JSON.stringify(transData));
	}

	function getSecColor()
	{
		//alert($("#fldBtnBGColorPicker").val());
		var secColorPicker = event.target;
		//alert("secColorPicker id = " + secColorPicker.id);
		var secSelectedColor = $("#" + secColorPicker.id).val();
		transData.Buttons[0].Sections[0].Backgroundcolor = secSelectedColor;
		//alert("Selected color = " + selectedColor);
		
		for(var i=0;i<transData.Sections.length;i++)
		{							
			var curSec = "btnsec" + i + "000";
			alert("cursec + " + curSec);
			$("#" + curSec).css("background-color",secSelectedColor);		
		}
		localStorage.setItem("transportation", JSON.stringify(transData));
	}

	function getFldColor()
	{
		//alert($("#fldBtnBGColorPicker").val());
		var fldColorPicker = event.target;
		//alert("fldColorPicker id = " + fldColorPicker.id);
		var fldSelectedColor = $("#" + fldColorPicker.id).val();
		transData.Buttons[0].Fields[0].Backgroundcolor = fldSelectedColor;
		//alert("Selected color = " + selectedColor);
		
		for(var i=0;i<transData.Sections.length;i++)
		{
			for(var j=1;j<transData.Sections[i].Fields.length;j++)
			{				
				var curFld = "btnfld" + i + j + "00";
				//alert("curFld + " + curFld);
				$("#" + curFld).css("background-color",fldSelectedColor);		
			}
		}
		localStorage.setItem("transportation", JSON.stringify(transData));
	}

	function getSubColor()
	{		
		var subColorPicker = event.target;
		//alert("subColorPicker id = " + subColorPicker.id);
		var subSelectedColor = $("#" + subColorPicker.id).val();
		transData.Buttons[0].Subfields[0].Backgroundcolor = subSelectedColor;
		//alert("subSelectedColor color = " + subSelectedColor);
		
		for(var i=0;i<transData.Sections.length;i++)
		{
			for(var j=1;j<transData.Sections[i].Fields.length;j++)
			{				
				for(var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++)
				{
					var curSub = "btnsub"+ i + j + k + "0";
					//alert("curSub + " + curSub);
					$("#" + curSub).css("background-color",subSelectedColor);		
				}
			}
		}
		localStorage.setItem("transportation", JSON.stringify(transData));
	}

	function getLstColor()
	{
		//alert($("#lstBtnBGColorPicker").val());
		var lstColorPicker = event.target;
		//alert("curColorPicker id = " + lstColorPicker.id);
		var lstSelectedColor = $("#" + lstColorPicker.id).val();
		transData.Buttons[0].Lists[0].Backgroundcolor = lstSelectedColor;
		//alert("lstSelectedColor color = " + lstSelectedColor);
		
		for(var i=0;i<transData.Sections.length;i++)
		{
			for(var j=1;j<transData.Sections[i].Fields.length;j++)
			{				
				for(var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++)
				{
					for(var l=0;l<transData.Sections[i].Fields[j].Subfields[k].Lists.length;l++)
					{
						var curLst = "btnlst"+ i + j + k + l;
						//alert("curLst + " + curLst);
						$("#" + curLst).css("background-color",lstSelectedColor);		
					}
				}
			}
		}
		localStorage.setItem("transportation", JSON.stringify(transData));
	}

	function showhide() {
		//alert(id);
		//var x = document.getElementById(id);
		//if (x.className.indexOf("w3-show") == -1) {
		//	x.className += " w3-show";
		//} else { 
		//	x.className = x.className.replace(" w3-show", "");
		//}
		$("#properties").css("display","block");
		$("#div0").css("display","none");
	}
	
	function selectField(id,checked)
	{
		alert("id = " + id);
		
		var chk = "chk" + id;
		var btn = "btn" + id;
		//alert("'" + curCBName + "'");
		//alert("'" + curBtnName + "'");
		var chkFld = document.getElementById(chk);
		var btnFld = document.getElementById(btn);
		
		if(checked == 1)
		{
			chkFld.checked = true;
			btnFld.disabled = false;
		}
		else
		{
			chkFld.checked = false;
			btnFld.disabled = true;
		}		
	}

	function selectSub(id)
	{
		//alert("checked = " + checked);
		
		var chk = "chk" + id;
		var btn = "btn" + id;
		//alert("'" + curCBName + "'");
		//alert("'" + curBtnName + "'");
		var chkFld = document.getElementById(chk);
		var btnFld = document.getElementById(btn);
		
		if(checked == 1)
		{
			chkFld.checked = true;
			btnFld.disabled = false;
		}
		else
		{
			chkFld.checked = false;
			btnFld.disabled = true;
		}	
	}
	
	function fieldChecked()
	{
		curField = event.target;
		
		var id = curField.id.replace("FSF","");
		//alert("id = " + id);

		var fldType = id.substr(3,3); 
		var i = id.substr(6,1);
		var j = id.substr(7,1);
		var k = id.substr(8,1);
		var l = id.substr(9,1);

		//alert("ijkl = " + i+j+k+l);

		var curCB = document.getElementById(id);
		//alert("button id = " + "btn" + fldType + i + j + k + l);
		var curButton = document.getElementById("btn" + fldType + i + j + k + l);
		var curChk = document.getElementById(id);
		//alert(curButton.id);
		//var btnSelectAll = document.getElementById("btn0" + j);
		
		if(id == "chkfld0000") //Select All has been clicked
		{
			//alert("Manage all check boxes");
			//alert("i = " + i);
			for(var ii=0;ii<transData.Sections.length;ii++)
			{
				for(var jj=0;jj<transData.Sections[ii].Fields.length;jj++)
				{
					//alert("k = " + k);

					curFld = "chkfld" + ii + jj + "00";
					var curBtn = document.getElementById("btnfld" + ii + jj + "00");
					if(curField.checked)
					{
						//alert("SA IS checked");
						document.getElementById(curFld).checked = true;
						curBtn.disabled = false;
						transData.Sections[ii].Fields[jj].Checked = "Checked";
						transData.Sections[ii].Fields[jj].Disabled = "";
						//selectField(id,1);
					}
					else
					{
						//alert("SA IS NOT checked");
						document.getElementById(curFld).checked = false;
						curBtn.disabled = true;
						transData.Sections[ii].Fields[jj].Checked = "";
						transData.Sections[ii].Fields[jj].Disabled = "Disabled";
						//selectField(id,0);
					}

					/*
					for(var kk=0;kk<transData.Sections[ii].Fields[jj].Subfields.length;kk++)
					{
						//alert("k = " + k);
						if(curField.checked)
						{
							//alert("SA IS checked");
							transData.Sections[ii].Fields[jj].Subfields[kk].Checked = "Checked";
							transData.Sections[ii].Fields[jj].Subfields[kk].Disabled = "";
							//selectField(id,1);
						}
						else
						{
							//alert("SA IS NOT checked");
							transData.Sections[ii].Fields[jj].Subfields[kk].Checked = "";
							transData.Sections[ii].Fields[jj].Subfields[kk].Disabled = "Disabled";
							//selectField(id,0);
						}
					}
					*/
				}
			}			
		}
		else
		{
			selectAllFlag = 1;
			for(var m=0;m<transData.Sections.length;m++)
			{
				for(var n=1;n<transData.Sections[m].Fields.length;n++)
				{
					curCheck = document.getElementById("chkfld" + m + n + "00");
					//alert(curCheck.id);
					if(curCheck.checked == false)
					{
						//alert("not checked");
						selectAllFlag = 0;
						break;
					}
				}
			}
			
			//alert(selectAllFlag);
			if(selectAllFlag == 1)
			{
				document.getElementById("chkfld0000").checked = true;
				transData.Sections[0].Fields[0].Checked = "Checked";
				//transData.Sections[0].Fields[0].Disabled = "";
			}
			else if(selectAllFlag == 0)
			{
				document.getElementById("chkfld0000").checked = false;
				transData.Sections[0].Fields[0].Checked = "";
				//transData.Sections[0].Fields[0].Disabled = "Disabled";
			}

			if(curField.checked) 
			{				
				//alert("Is checked");
				if(id.indexOf("fld") !=  -1)
				{					
					curChk.checked = true;
					curButton.disabled = false;
					transData.Sections[i].Fields[j].Checked = "Checked";
					transData.Sections[i].Fields[j].Disabled = "";
					//selectAllCompany();
					//alert("fld");	
				}
				else if(id.indexOf("sub") !=  -1)
				{	
					curChk.checked = true;
					curButton.disabled = false;
					transData.Sections[i].Fields[j].Subfields[k].Checked = "Checked";
					transData.Sections[i].Fields[j].Subfields[k].Disabled = "";
					//selectAllCompany();
					//alert("sub");
				}
				/*
				else if(id.indexOf("lst") !=  -1)
				{	
					curChk.checked = true;	
					curButton.disabled = false;
					transData.Sections[i].Fields[j].Subfields[k].Lists[l].Checked = "Checked";
					transData.Sections[i].Fields[j].Subfields[k].Lists[l].Disabled = "";
					//selectAllCompany();	
					//alert("lst");
				}
				*/
			}
			else
			{
				//alert("Is NOT checked"); 
				var sa = document.getElementById("chkfld0000");
				sa.checked = false;

				if(id.indexOf("fld") !=  -1)
				{	
					//alert("curButton = " + curButton.id);	
					curChk.checked = false;		
					curButton.disabled = true;
					transData.Sections[i].Fields[j].Checked = "";
					transData.Sections[i].Fields[j].Disabled = "Disabled";
					//selectAllCompany();
				}
				else if(id.indexOf("sub") !=  -1)
				{
					//alert("curChk id = " + curChk.id);
					//alert("curChk is checked = " + curChk.checked);
					curChk.checked = false;	
					//alert(curChk.checked);	
					curButton.disabled = true;
					transData.Sections[i].Fields[j].Subfields[k].Checked = "";
					transData.Sections[i].Fields[j].Subfields[k].Disabled = "Disabled";
					//selectAllCompany();
				}				
				else if(id.indexOf("lst") !=  -1)
				{
					//alert("lst");
					curChk.checked = false;		
					curButton.disabled = true;
					transData.Sections[i].Fields[j].Subfields[k].Lists[l].Checked = "";
					transData.Sections[i].Fields[j].Subfields[k].Lists[l].Disabled = "Disabled";
					//selectAllCompany();	
				}				
			}
		}

		localStorage.setItem("transportation", JSON.stringify(transData));
		retrievedObjectTransportation = localStorage.getItem('transportation');				
		transData = JSON.parse(retrievedObjectTransportation);
		selectAllCompany();
		//accordian(curButton.id); //this matches the id expected for the division

	}
	
	function delField(i)
	{
		//alert("Delete Field " + i);
		selectAllCompany(i);
	}
	
	function selectAllCompany()
	{
		//alert("Select All");
		$("#divSection" + secCount + "Body").empty();
		//translateMe();
		addDD();
	}

	function importSections()
	{

	}
	
	function importDDFile()
	{
		curField = event.target;

		//alert("importDDFile");
		var getFile = document.getElementById("btnCSV");
		getFile.style.display = "block";
		
		if(curField.id.indexOf("Sections") != -1)
		{
			//alert("You clicked on 'Import Sections'");
			importFlag = "sec";
		}
		else if(curField.id.indexOf("Fields") != -1)
		{
			//alert("You clicked on 'Import Fields'");
			importFlag = "fld";
		}
	}

	function addDDSection()
	{
		var secNames = prompt("Add new section items", "Add New Section Items seperated by a comma").split(',');
		//var secNames = reader.result.split(',');
		for(var i=0;i<secNames.length;i++)
		{
			//transData.Sections.push ( {"Section":secNames[i],"Fields": [],"Lists": []} );
			
			//transData.Sections[0].Fields.push ( {"Field": "Enter Field Name","Lists": []});
			transData.Sections.push ( 
				{
					"Id": "",
					"Section":secNames[i],
					"Fields": [
						{
							"Id": "fld0800",
							"Field": "Enter Section Name",
							"Checked": "Checked",
							"Readonly": "",
							"Disabled": "",
							"Width": "255",
							"Height": "35",
							"Textcolor": "",
							"MarginLeft": "0",
							"Backgroundcolor": "#2b4370",
							"Subfields": [
								{
									"Id": "sub0800",
									"Subfield": "Enter Subfield Name",
									"ToolTip": "",
									"Checked": "Checked",
									"Required": "",
									"Key": "",
									"Type": "Button",
									"Readonly": "",
									"Disabled": "",
									"Size": "",
									"Width": "243",
									"Height": "35",
									"Minlength": "9",
									"Maxlength": "50",
									"Textcolor": "",
									"MarginLeft": "30",
									"Backgroundcolor": "#486aa0",
									"Fieldlength": "",
									"Datetype": "",
									"Function1": "",
									"Function2": "",
									"Function3": "",
									"Logic1": "",
									"Logic2": "",
									"Logic3": "",
									"Value1": "",
									"Value2": "",
									"Value3": "",
									"Group1": "",
									"Group2": "",
									"Group3": "",
									"Lists": [
										{
											"Id": "lst0800",
											"List": "Enter List Name",
											"Checked": "Checked",
											"Readonly": "",
											"Disabled": "",
											"Width": "150",
											"Height": "35",
											"Textcolor": "",
											"MarginLeft": "60",
											"Backgroundcolor": "#7e8faf"
										}
									]
								}
							]
						}
					]
				}
			)
			localStorage.setItem("transportation", JSON.stringify(transData));
			$("#divSecList" + secCount).append("<a onclick='setSection(\"" + secNames[i] + "\")' class='w3-bar-item w3-button w3-light-grey' href='#about'>" + secNames[i] + "</a>"); 				 					
		}
		/*
		addSectionCount++;
		//alert("addDDSection");
		secCount++;

		var secNames = prompt("Add new section items", "Add New Section Items seperated by a comma");

		var itemsArray = secNames.split(',');
		//alert("secName = " + itemsArray[3]);

		

		1: declare and initialize a variable which will be used as acounter
		2. set the limit for the counter which ends the loop (compare the current value of the counter to the limit and keep going as long as the counter is less than the limit)
		3. increment your counter for each iteration of the loop
		
		var curSecTitle = "";


		for(var i=0;i<itemsArray.length;i++)
		{
			curSecTitle = secNames[i];
			$("#divSecList" + secCount).append("<a onclick='setSection(\"" + secNames[i] + "\")' class='w3-bar-item w3-button w3-light-grey' href='#about'>" + secNames[i] + "</a>"); 	
			transData.Sections.push ( 
				{
					"Id": "",
					"Section":secNames,
					"Fields": [
						{
							"Id": "fld0800",
							"Field": "Enter Section Name",
							"Checked": "Checked",
							"Readonly": "",
							"Disabled": "",
							"Width": "255",
							"Height": "35",
							"Textcolor": "",
							"MarginLeft": "0",
							"Backgroundcolor": "#2b4370",
							"Subfields": [
								{
									"Id": "sub0800",
									"Subfield": "Enter Subfield Name",
									"ToolTip": "",
									"Checked": "Checked",
									"Required": "",
									"Key": "",
									"Type": "Button",
									"Readonly": "",
									"Disabled": "",
									"Size": "",
									"Width": "243",
									"Height": "35",
									"Minlength": "9",
									"Maxlength": "50",
									"Textcolor": "",
									"MarginLeft": "30",
									"Backgroundcolor": "#486aa0",
									"Fieldlength": "",
									"Datetype": "",
									"Function1": "",
									"Function2": "",
									"Function3": "",
									"Logic1": "",
									"Logic2": "",
									"Logic3": "",
									"Value1": "",
									"Value2": "",
									"Value3": "",
									"Group1": "",
									"Group2": "",
									"Group3": "",
									"Lists": [
										{
											"Id": "lst0800",
											"List": "Enter List Name",
											"Checked": "Checked",
											"Readonly": "",
											"Disabled": "",
											"Width": "150",
											"Height": "35",
											"Textcolor": "",
											"MarginLeft": "60",
											"Backgroundcolor": "#7e8faf"
										}
									]
								}
							]
						}
					]
				}
			)			 
		}
		*/

		//var curSection = "New Section";
		//var secNames = secName.split(',');;
		
		//for(var i=0;i<secNames.length;i++)
		//{

		
		//}
		//localStorage.setItem("transportation", JSON.stringify(transData));
		//$("#divSecList" + secCount).append("<a onclick='setSection(\"" + curSection + "\")' class='w3-bar-item w3-button w3-light-grey' href='#about'>" + curSection + "</a>"); 				 
		
		/*
		secNames = secName.split(',');
		
		*/
	}
	
	function addSection() {
		//addSection("A","indADepAFrmASecA","Section Title");	
		//alert("Add Section");
		
		//document.getElementById("divEEFields").style.display = "none";
				
		secCount++;
		dropFlag = 1;
		////fldCount++;

		$("#divForm").append("<div id='divSection" + secCount + "'></div>");
		
		//translateNow("divSecTitle" + secCount,secTitle);
		$("#divSection" + secCount).append("<div id='divSecTitle" + secCount + "' onmouseover='dropSection()' style='background-color:#2b4370;color:white;font-size:14px;margin-left:5px;margin-top:5px;margin-bottom:0px;padding-top:1px;height:30px;' class='w3-border w3-center' contenteditable>" + secTitle + "</div>");	
				
		$("#divSecTitle" + secCount).append("<div  id='divSecList" + secCount + "' class='w3-dropdown-content w3-bar-block w3-card-4 w3-left w3-light-white' style='margin-top:10px;width:35%'>");     

			for(var i=0;i<transData.Sections.length;i++)
			{		
				var curSection = transData.Sections[i].Section;
				
				//var curSectionNS = transData.Sections[i].Section.replace(" ","");
				$("#divSecList" + secCount).append("<a onclick='setSection(\"" + curSection + "\")' class='w3-bar-item w3-button w3-light-grey' href='#about'>" + curSection + "</a>"); 				 
			}
			
		$("#divSecList" + secCount).append("</div>");
		$("#divSection" + secCount).append("<div w3-white' class='w3-row w3-container' ondrop='drop(event)' ondragover='allowDrop(event)' id='divSection" + secCount + "Body'></div>");													
		
		if(secCount==0)
		{
			
		}
		
		//$("#divSection" + secCount + "Body").append('<div class="form-group w3-left"><input style="margin-bottom:10px" id="chkFSF' + secCount + '" type="checkbox" class="w3-left w3-check w3-top" checked="checked" /><label id="lbl' + fldCount + '" style="margin-top:10px;margin-left:5px;margin-right:50px" class="w3-text w3-left" contenteditable onclick="dropFunction()">label</label><input style="margin-right:100px" class="w3-input w3-border" placeholder="label" pattern="\d{1,5}" maxlength="15" size="1" type="text" name="FSF" id="txtFSF"/><div class="w3-dropdown-content w3-bar-block w3-card w3-white" id="myDIV">');					
		//$("#divSection" + secCount + "Body").append('<div class="w3-dropdown-content w3-bar-block w3-card w3-white" id="myDIV">');					
				
		//$("#divSection" + secCount).append("<div class='w3-blue' contenteditable>Section " + secCount + "</div>");
		$("#divSection" + secCount).append("<div w3-white' class='w3-row w3-container' id='divSection" + secCount + "Body'></div>");			
		//$("#divSection" + secCount + "Body").append("<div class='form-group' style='margin-left:10px;padding:5px'><label id='lblFSF' name='LSF' class='w3-left w3-text-black' contenteditable style='width:50px;text-align:right;margin:5px' for='" + "label" + "' onblur='onBlur()' onfocus='onFocus()' onmousedown='onFocus()' onclick='getProperties(\"" + "subfldId" + "\",\"" + this.id + "\",\"" + "subfld" + "\")'>" + "label" + "</label><input id='chkFSF" + secCount + "' type='checkbox' class='w3-left w3-check' checked='checked' /><input onblur='onBlur()' onfocus='onFocus()' onmousedown='onFocus()' onclick='getProperties(\"" + "subfldId" + "\",\"" + this.id + "\",\"" + "subfld" + "\")' class='w3-input w3-border' placeholder='" + "label" + "' pattern='\d{1,5}' maxlength='15' size='15' type='text' name='FSF' id='txtFSF'/></div>");
		//$("#divSection" + secCount + "Body").append("<div class='w3-left form-group' style='margin-left:10px;padding:5px'><label id='lblFSF" + secCount + fldCount + "' name='lblFSF" + secCount + fldCount + "' class='w3-left w3-text-black' contenteditable style='margin-top:15px;margin-right:10px;text-align:right' for='" + "label" + "'>" + "label" + "</label><input id='chkFSF" + secCount + fldCount + "' type='checkbox' class='w3-left w3-check' checked='checked' style='margin-bottom:10px'/><input class='w3-border w3-input type='text' size='1px' name='txtFSF" + secCount + fldCount + "' id='txtFSF" + secCount + fldCount + "' placeholder='Label" + secCount + fldCount + "' onfocus='onFocus()'/></div>");			
		
		//$("#divSection" + secCount + "Body").append('<div class="w3-form-group"><input style="margin-bottom:10px" id="chkFSF' + secCount + '" type="checkbox" class="w3-left w3-check w3-top" checked="checked" /><label id="lbl' + fldCount + '" style="margin-top:10px;margin-left:5px;margin-right:50px" class="w3-text w3-left" contenteditable onclick="dropFunction()">label</label><input style="margin-right:5px" class="w3-input w3-border" placeholder="label" pattern="\d{1,5}" maxlength="15" size="1" type="text" name="FSF" id="txtFSF"/>');
	}
	
	function dropSection() {
		if(dropFlag == 1)
		{
			dropFlag = 0;
			//alert("Drop Section Titles");
			//alert("secCount = " + secCount);
			//alert("divSecList + secCount = '" + "divSecList" + secCount + "'");
			var x = document.getElementById("divSecList" + secCount);
			if (x.className.indexOf("w3-show") == -1) {
				//alert("show");
				x.className += " w3-show";
			} else {
				//alert("hide");
				//x.className = x.className.replace(" w3-show", "");
			}
		}
	}

	function setSection(secTitle)
	{
		//alert("setSection");
		document.getElementById("divProps").style.display = "block";
		//selectAllCompany();
		var curSec = document.getElementById("divSecTitle" + secCount);
		//translateNow("#divSecList" + secCount,secTitle);
		curSec.innerHTML = secTitle;
		//curSecBody.append = "<input type='text' />";
		//dropSection();
		
		if(secTitle.indexOf("Company Profile") == 0)
		{
			//document.getElementById("divDDFields0").style.display = "block";
			selectAllCompany();
		}
		else if(secTitle.indexOf("Vehicle Information") == 0)
		{
			//alert(x);
			$("#divSection" + secCount + "Body").append("<div id='divVehicle' draggable='true'><center><table class='w3-center'><tr><td class='w3-margin'>Vehicle Information</td><td class='w3-margin'>Total</td><td class='w3-margin'>Owned</td><td class='w3-margin'>Leased</td></tr></table></center></div>");
		}
		else if(secTitle.indexOf("Driver") == 0)
		{
			//document.getElementById("divDepFields").style.display = "block";
		}
		//setLabel("Enter Label");
		//var curLabel = document.getElementById("LSF" + fldCount);
		//curLabel.focus();
		//var divSecList = document.getElementById("divSecList" + secCount);
		//divSecList.empty();
	}

	function translateMex()
	{
		undefinedFlag = 0;
		language = $( "#btnLanguage option:selected" ).val();
		//alert("language = " + language);

		//$("#divLanguage").innerHTML(l);
		var curLanguage = $( "#btnLanguage option:selected" ).text();

		document.getElementById("pLanguage").innerHTML = curLanguage;	

		var lcode = transData.langs[0].language;
		//alert("lcode = " + lcode);

		for(var i=0;i<transData.Sections.length;i++)
		{
			for(var j=0;j<transData.Sections[i].Fields.length;j++)
			{
				var fldId = transData.Sections[i].Fields[j].Id;
				var fldField = transData.Sections[i].Fields[j].Field;
				if(transData.Sections[i].Fields[j].Checked)
				{
					for(var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++)
					{
						var subId = transData.Sections[i].Fields[j].Subfields[k].Id;
						var subField = transData.Sections[i].Fields[j].Subfields[k].Subfield;

						//alert("subId = " +subId );
						//alert("subField = " + subField);
						//translateNow(subId,subField);
					}
				}
			}
		}		
	}
	
	function addDD()
	{
		$("#btnLanguage").focus();

		
		//alert(document.getElementById("radMod").checked);
		//var x = "Classification";
		
		//alert("x = " + x);
		//alert("i = " + i);
		//alert("j = " + j);
		
		
		//alert("fldCount = " + fldCount);
		var fldType = "text";
		var w3 = "input"		

		
		//$("#divPreview").append("<div id='divPDD' style='margin-top:50px'>");
		//$("#divPDD").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:200px;text-align:left;margin:5px' for='label'>" + ddName + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + ddName + "' pattern='\d{1,5}' maxlength='20' size='20' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");				
		//$("#divPreview").append("</div>");
		
		//$("#divDDList").show();
		
		
		//if (x.indexOf("Type") == -1)
		//{
		//$("#divPDD" + fldCount).append("<div id='divSel" + fldCount + "' class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:185px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' onclick='delField(\"" + j + "\")'/><input onclick='addBar(\"" + fldCount + "\")' class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + x + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='txtSelect" + fldCount + "'/></div>");				
		//}
		//else
		//{
			//$("#divPDD" + fldCount).append("<div id='divSel" + fldCount + "' class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-yellow' contenteditable style='width:185px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><textarea onclick='addBar(\"" + fldCount + "\")' class='w3-" + w3 + " w3-border' rows='1' cols='24' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + x + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='txtSelect" + fldCount + "'/></div>");									
		//}
		//$("#divSel" + fldCount).append("<label id='lbl" + fldCount + "' onclick='myFunction(\"" + fldCount + "\")' class='w3-button w3-white w3-text-blue' /><b>" + x +"</b></button><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' />");
		//$("#divSel" + fldCount).append("<input id='txtSelect" + fldCount + "' onclick='addBar(\"" + fldCount + "\")' class='w3-button w3-white w3-text-blue' placeholder='Enter " + x + "' /></input>");
		//$("#divSel" + fldCount).append("<div id='divBar" + fldCount + "' class='w3-dropdown-content w3-bar-block w3-card-4 w3-animate-zoom'></div>");
						
		//$("#divBar" + fldCount).empty();
		//$("#divDDList").empty();
		//alert(transData.Sections[0].Fields[j].Lists.length);
		//$("#divDDList").append("<div style='width:350px;margin-bottom:10px' class='w3-center w3-label'>Dropdown Items</div>");
		
		var fldCount = 0;
		var checkAllFlag = -1;
		
		$("#divSection" + secCount + "Body").empty();
		
		for(var i=0;i<transData.Sections.length;i++)
		{
			for(var j=0;j<transData.Sections[i].Fields.length;j++)
			{
				var fldId = transData.Sections[i].Fields[j].Id;
				var fldField = transData.Sections[i].Fields[j].Field;
				if(transData.Sections[i].Fields[j].Checked)
				{
					var groupFlag = 0;					

					for(var k=0;k<transData.Sections[i].Fields[j].Subfields.length;k++)
					{
						fldCount++;
						$("#divSection" + secCount + "Body").append("<div id='divPDD" + fldCount + "' style='margin-top:0px'></div>");
						
						//var chkSA = document.getElementById("sec0000");
						var subId = transData.Sections[i].Fields[j].Subfields[k].Id;
						var subField = transData.Sections[i].Fields[j].Subfields[k].Subfield;						
						var subType = transData.Sections[i].Fields[j].Subfields[k].Type;
						var subGroup1 = transData.Sections[i].Fields[j].Subfields[k].Group1;
						var subBGColor = transData.Sections[i].Fields[j].Subfields[k].Backgroundcolor;
						var subRequired = transData.Sections[i].Fields[j].Subfields[k].Required;
						var subToolTip = transData.Sections[i].Fields[j].Subfields[k].ToolTip;
						var subMinlength = transData.Sections[i].Fields[j].Subfields[k].Minlength;				
						//alert("subMinlength = " + subMinlength);
						var txtColor = "blue";

						if(subRequired == "Required")
						{
							txtColor = "red";
						}
						//alert(x);

						var omo = " ";
						var oml = " ";
						//alert("subId = " + subId);
						if(subField.indexOf("CA #") == 0)
						{
							//omo = "  onmouseover='toolTipShow(\"" + subId + "\")'";
						}

						if(subField.indexOf("DOT #") == 0)
						{
							//omo = "  onmouseover='toolTipShow(\"" + subId + "\")'";
						}

						if(subField.indexOf("CA #") == 0)
						{
							//oml = "  onmouseleave='toolTipShow(\"" + subId + "\")'";
						}

						if(subField.indexOf("DOT #") == 0)
						{
							//oml = "  onmouseleave='toolTipShow(\"" + subId + "\")'";
						}

						//alert(omo);
						
						var subWidth = transData.Sections[i].Fields[j].Subfields[k].Width;
						if(subId == "sub0120")
						{
							//alert("subWidth of id sub0120 in data = " + subWidth);
						}
						
						var subSize = transData.Sections[i].Fields[j].Subfields[k].Size;
						if(transData.Sections[i].Fields[j].Subfields[k].Checked)
						{	
							//Field = subField;
							//curSubId = subId;
							//document.getElementById("sourceText").value = subField;							
							//alert(document.getElementById("translation").value);
							/*
							if(subGroup1 == fldField)
							{
								if(groupFlag == 0)
								{
									groupFlag = 1;
									//alert("Create a new group Div");
									$("#divPDD" + fldCount).append("<div id='divGroup" + fldId + "' class='w3-left' style='text-align:left;padding-right:10px'>");
									$("#divGroup" + fldId).append("<div id='div" + subId + "' class='w3-left' style='text-align:left;padding-right:10px'><label id='lbl" + subId + "' name='LSF" + subId + "' class='popup w3-left w3-text-" + txtColor + "' contenteditable style='width:" + (subWidth-25) + "px;text-align:left;margin-top:18px'" + omo + oml + "for='label'>" + subField + "<span class='popuptext' id='pop" + subId + "'>" + subToolTip + "</span></label><input style='margin-bottom:0px' id='chkFSF" + subId + "' type='checkbox' class='w3-check' checked='checked' /><input style='width:" + subWidth + "px' onclick='addBar(\"" + fldCount + "\")' class='w3-" + w3 + " w3-border' size='50' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + subField + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='" + subId + "'/></div>");								
								}
								else
								{
									//alert("Add a field to the new group Div");
									$("#divGroup" + fldId).append("<div id='div" + subId + "' class='w3-left' style='text-align:left;padding-right:10px'><label id='lbl" + subId + "' name='LSF" + subId + "' class='popup w3-left w3-text-" + txtColor + "' contenteditable style='width:" + (subWidth-25) + "px;text-align:left;margin-top:18px'" + omo + oml + "for='label'>" + subField + "<span class='popuptext' id='pop" + subId + "'>" + subToolTip + "</span></label><input style='margin-bottom:0px' id='chkFSF" + subId + "' type='checkbox' class='w3-check' checked='checked' /><input style='width:" + subWidth + "px' onclick='addBar(\"" + fldCount + "\")' class='w3-" + w3 + " w3-border' size='5' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + subField + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='" + subId + "'/></div>");								
								}
							}
							else
							{
							*/
								//alert("Not a group Field");
								//groupFlag = 0;
								//$("#divPDD" + fldCount).append("<div id='div" + subId + "' class='w3-left' style='text-align:left;padding-right:10px'><label id='lbl" + subId + "' name='LSF" + subId + "' class='popup w3-left w3-text-" + txtColor + "' contenteditable style='width:" + (subWidth-25) + "px;text-align:left;margin-top:18px'" + omo + oml + "for='label' size='" + subSize + "'>" + subField + "<span class='popuptext' id='pop" + subId + "'>" + subToolTip + "</span></label><input style='margin-bottom:0px' id='chkFSF" + subId + "' type='checkbox' class='w3-check' checked='checked' /><input style='width:" + subWidth + "px' onclick='addBar(\"" + fldCount + "\")' class='w3-" + w3 + " w3-" + subBGColor + " w3-border' size='50' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + subField + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='" + subId + "'/></div>");								
								
								var toolTip = "";

								if(subToolTip.length>0)
								{
									//toolTip = "<span class='popuptext' id='pop" + subId + "'>" + subToolTip + "</span>";
								}

								subWidth = subField.length*10;
									
								if(subId == "sub0120")
								{
									//alert("subWidth of sub0120 in data = " + subWidth);
								}
								//add fields to a section
								$("#divPDD" + fldCount).append("<div id='div" + subId + "' class='w3-left ' style='min-width:" + subMinlength + "px;width:" + subWidth + "px;text-align:left;padding-right:10px'><label id='lbl" + subId + "' onblur='lblBlur()' name='LSF" + subId + "' class='notranslate popup w3-left w3-text-" + txtColor + "' contenteditable style='width:100%:text-align:left;margin-top:18px'" + omo + oml + " for='label'>" + subField + "</label><input onclick='fieldChecked()' style='margin-left:0px;margin-bottom:0px' id='chkFSF" + subId + "' type='checkbox' class='w3-check w3-right' checked='checked' /><input style='width:100%' onclick='addBar(\"" + fldCount + "\")' class='formField w3-" + w3 + " w3-" + subBGColor + " w3-border' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + subField + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='" + subId + "'/></div>");								
								//$("#div" + subId).width(100);
								/*var curDiv = "div" + subId;
								var curLbl = "lbl" + subId;
								//alert("curDiv = " + curDiv);
								$("#" + curDiv).width($("#" + curLbl).html().length*10);
								$("#" + curLbl).width($("#" + curLbl).html().length*8);
								
								if(subId == "sub0120")
								{
									//alert("subWidth of sub0120 in field = " + $("#divsub0120").width());
									//alert(subId);
								}*/
							//}
							
							//$("#divForm" + fldId).append("<div id='div" + subId + "' class='w3-left' style='text-align:left;padding-right:10px'><label id='lbl" + subId + "' name='LSF" + subId + "' class='w3-left w3-text-black' contenteditable style='width:" + subWidth + "px;text-align:left;margin-top:18px' for='label'>" + subField + "</label><input style='margin-bottom:0px' id='chkFSF" + subId + "' type='checkbox' class='w3-check' checked='checked' /><input onclick='addBar(\"" + fldCount + "\")' class='w3-" + w3 + " w3-border' size='10' onfocus='onFocus()' onblur='onBlur()' onchange='onChange()' placeholder='Enter " + subField + "' pattern='\d{1,5}' type='" + fldType + "' name='FSF" + fldCount + "' id='" + subId + "'/></div>");								
						}
							//transData.Sections[i].Fields[j].Checked = "Checked";

						$("#divDDList" + fldCount).empty();
						for(var l=0;l<transData.Sections[i].Fields[j].Subfields[k].Lists.length;l++)
						{
							//if(l<transData.Sections[i].Fields[j].Subfields[k].Lists.length-1)
							//{						
								$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[i].Fields[j].Subfields[k].Lists[l].List + "\")' class='w3-button w3-bar-item w3-border w3-light-grey' contenteditable>" + transData.Sections[i].Fields[j].Subfields[k].Lists[l].List + "</a>");				 
								//if(showList == 1)
								//{
									//$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3-button w3-light-grey w3-border w3-animate-zoom' style='width:300px;margin-left:10px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[i].Fields[j].Subfields[k].Lists[l].List + "'></input></div>");				 				  
								//}
							//}
							//else
							//{					
								//$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[i].Fields[j].Subfields[k].Lists[l].List + "\")' class='w3-button w3-bar-item w3-border w3-light-grey' contenteditable>" + transData.Sections[i].Fields[j].Subfields[k].Lists[l].List + "</a>");				 
								//if(showList == 1)
								//{
									//$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3-button w3-light-grey w3-border w3-animate-zoom' style='width:300px;margin-left:10px;margin-bottom:3px;margin-right:5px;padding:10px' contenteditable value='" + transData.Sections[i].Fields[j].Subfields[k].Lists[l].List + "'></input><img src='Images/add.jpg' onclick='addItem(" + secCount + "," + j + "," + k + ")'style='width:20px' /></div>");
								//}
							//}			 				  
						}
					}
				}
				
				/*
				for(var k=0;k<transData.Sections[i].Fields[j].Lists.length;k++)
				{
					if(k==transData.Sections[i].Fields[j].Lists.length-1)
					{				
						$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[i].Fields[j].Lists[k].List + "\")' class='w3-button w3-bar-item w3-border w3-light-grey' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
						//if(showList == 1)
						//{
							$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3-button w3-light-grey w3-border w3-animate-zoom' style='width:300px;margin-left:10px;margin-bottom:3px;margin-right:5px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input><img src='Images/add.jpg' onclick='addItem(" + secCount + "," + j + "," + k + ")'style='width:20px' /></div>");
						//}
					}
					else
					{					
						$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[i].Fields[j].Lists[k].List + "\")' class='w3-button w3-bar-item w3-border w3-light-grey w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
						//if(showList == 1)
						//{
							$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3-button w3-light-grey w3-border w3-animate-zoom' style='width:300px;margin-left:10px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input></div>");				 				  
						//}
					}			 				  
				}
				*/

				//alert("2: checkAllFlag " + checkAllFlag);
				/*			
				if(transData.Sections[0].Fields[k].Subfields.length > 0)
				{
					//alert(x);
					alert("Subfields length = " + transData.Sections[0].Fields[k].Subfields.length);
					for(var l=0;l<transData.Sections[0].Fields[k].Subfields.length;l++)
					{
						//alert(transData.Sections[i].Fields[k].Subfields[l].subfield);
					}
				}
				*/
			}
		}
		//localStorage.setItem("transportation", JSON.stringify(transData));
		
		
		//alert("checkAllFlag " + checkAllFlag);
		if(checkAllFlag == 1)
		{
			//chkSA.checked = true;	
		}
		else
		{
			//chkSA.checked = false;		
		}
		
		
		
							
		//$("divListControls").empty();
		//if(fldCount==0)
		//{
			//$("#divTools").append("<div id='divListControls' class='w3-left'>");
			//$("#divListControls").append("<div id='divNewItem' class='w3-animate-zoom' style='margin-top:10px;margin-bottom:10px;padding:1px'><textarea id='txtAreaList' cols='39' onfocus='onFocus()' onblur='onBlur()' onkeyup='onChange()' maxlength='100' type='Text' class='w3-text' placeholder='Enter new item' style='margin-top:5px;display:block' /></div>");				 				  														
			//$("#divListControls").append("<input id='btnAddItem' type='button' onclick='addItem(" + secCount + "," + j + "," + k + ")' style='margin-top:10px;margin-bottom:5px' class='w3-button w3-border w3-green ' value='Add Item' disabled/></div>")										
			//$("#divListControls").append("<input type='file' name='file' id='file' style='margin-left:0px;margin-top:10px'/>")																			
		//}
		
		//$("#divListControls").append("<div class='w3-left'><input type='button' style='margin-top:15px' onclick='modifyList(" + j + "," + k + ")' class='w3-button w3-green' value='Update List' /></div>")
		/////////document.getElementById('file').onchange = function()
		/*{		
			//alert("File change");
			
			var file = this.files[0];

			var reader = new FileReader();
			reader.onload = function(progressEvent)
			{
				// Entire file
				console.log(this.result);

				// By lines						
				var lines = this.result.split('\n');
				for(var line = 0; line < lines.length; line++)
				{
					//alert((lines[line]));
					var newItem = lines[line].replace("\r","");
					//alert(newItem);
					transData.Sections[0].Fields[j].Lists.push(
						{List: newItem}
					);
					localStorage.setItem("transportation", JSON.stringify(transData));
					
					$("#divBar" + fldCount).empty();
					$("#divDDList").empty();
					for(var k=0;k<transData.Sections[0].Fields[j].Lists.length;k++)
					{
						if(k<transData.Sections[0].Fields[j].Lists.length-1)
						{
							$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
							$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3light-grey w3-animate-zoom' style='width:300px;margin-top:0px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input></div>");				 				  
						}
						else
						{
							$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
							$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3light-grey w3-animate-zoom' style='width:300px;margin-top:0px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input><img src='Images/add.jpg' onclick='addItem(" + secCount + "," + j + "," + k + ")'style='width:20px' /></div>");
						}	
					}
					//$("#divDDList").append("<div class='w3-center'><input id='btnAddItem' type='button' onclick='modifyList(" + secCount + "," + j + "," + k + ")' class='w3-button w3-orange w3-margin' value='Add Item' /></div>")								
				}
			};
			reader.readAsText(file);
		};*/	

		var input = document.getElementsByClassName("formField");
        var inputList = Array.prototype.slice.call(input);
        //alert(inputList.length);
        inputList.forEach(ShowResults);
	}

	function lblBlur()
	{
		var curFld = event.target;
		var curSubId = curFld.id;
		//alert("curSubId: '" + curSubId + "'");
		var curSubFld = curFld.innerHTML;

		for (var i=0; i<transData.Sections.length; i++) 
		{
			for (var j=0; j<transData.Sections[i].Fields.length; j++) 
			{
				for (var k=0; k<transData.Sections[i].Fields[j].Subfields.length; k++) 
				{
					var subFldId = "lbl" + transData.Sections[i].Fields[j].Subfields[k].Id; 			
					//alert("subFldId: '" + subFldId + "'");
					if (curSubId == subFldId) 
					{						
						//alert("Match on " + subFldId);
						//alert(curSubFld);
						transData.Sections[i].Fields[j].Subfields[k].Subfield = curSubFld;
						localStorage.setItem("transportation", JSON.stringify(transData));
					}
				}
			}
		}
	}
	
	function addField(fldName)
	{
		//alert("Add Field to List");
		//var fieldCount = ;
		var newField = fldName;
		var i= transData.Sections.length-1;
		
		//alert(newItem);		
		
		//for(var i=0;i<transData.Sections.length;i++) //this add a field to section 0 by default. Make sure to add code to handle multiple sections
		//{			
			$("#divTools").append("<div id='divDDFields" + i + "' class='' style='display:none'></div>");	
			//$("#divDDSections").append("<div id='divSectionDD' class='w3-bar w3-white' style'display:none'></div>");
			$("#divDDFields" + i).append("<div id='fldBarDD" + i + "' class='w3-white' style'display:none'></div>");
			
			//var curSection = transData.Sections[i].Section;
			//$("#divSectionDD").append("<button onmouseover='previewDD(\"" + curSection + "\"," + i + ")' onmouseout='removeDD()' onclick='addDD(\"" + curSection + "\"," + i + ")' class='w3-border w3-button' style='width:190px;margin:2px'>" + curSection + "</button>");		
			$("#fldBarDD" + i).empty();	
						
			//var fldId = "fld0" + varFieldCount + "00";
			var j = transData.Sections[i].Fields.length-1;					
			var k = transData.Sections[i].Fields[j].Subfields.length-1;					
			var fldString = {"Id": "fld0"+ (j+1) +"00","Field": "A new Field","Checked": "Checked","Readonly": "","Disabled": "","Width": "255","Height": "35","Textcolor": "","MarginLeft": "0","Backgroundcolor": "#845678","Subfields": []};
			transData.Sections[i].Fields.push(fldString);
			//varSubCount = transData.Sections[i].Fields[j].length;
			//var subString = {"Id": "sub" + i + j + k + "0","Subfield": "A new Sub Field: ","ToolTip": "","Checked": "","Required": "","Key": "","Type": "Button","Readonly": "","Disabled": "Disabled","Size": "","Width": "240","Height": "35","Minlength": "125","Maxlength": "50","Textcolor": "","MarginLeft": "30","Backgroundcolor": "#486aa0","Fieldlength": "","Datetype": "","Function1": "","Function2": "","Function3": "","Logic1": "","Logic2": "","Logic3": "","Value1": "","Value2": "","Value3": "","Group1": "","Group2": "","Group3": "","Lists": []};			
			//var subString = '{"Id": "sub0500","Subfield": "Legal/DBA Name: ","ToolTip": "","Checked": "","Required": "","Key": "","Type": "Button","Readonly": "","Disabled": "Disabled","Size": "","Width": "240","Height": "35","Minlength": "125","Maxlength": "50","Textcolor": "","MarginLeft": "30","Backgroundcolor": "#486aa0","Fieldlength": "","Datetype": "","Function1": "","Function2": "","Function3": "","Logic1": "","Logic2": "","Logic3": "","Value1": "","Value2": "","Value3": "","Group1": "","Group2": "","Group3": "","Lists": []';
			//transData.Sections[i].Fields.push(fldString);
			//transData.Sections[i].Fields[j].Subfields.push(subString);
			localStorage.setItem("transportation", JSON.stringify(transData));		
			retrievedObjectTransportation = localStorage.getItem('transportation');				
			transData = JSON.parse(retrievedObjectTransportation);				
		//}						
		
		//for(var i=0;i<transData.Sections.length;i++)
		//{			
			$("#divTools").append("<div id='divDDFields" + i + "' class='' style='display:none'></div>");	
			//$("#divDDSections").append("<div id='divSectionDD' class='w3-bar w3-white' style'display:none'></div>");
			$("#divDDFields" + i).append("<div id='fldBarDD" + i + "' class='w3-white' style'display:none'></div>");
			
			//var curSection = transData.Sections[i].Section;
			//$("#divSectionDD").append("<button onmouseover='previewDD(\"" + curSection + "\"," + i + ")' onmouseout='removeDD()' onclick='addDD(\"" + curSection + "\"," + i + ")' class='w3-border w3-button' style='width:190px;margin:2px'>" + curSection + "</button>");		
			$("#fldBarDD" + i).empty();	
			
			for(var j=0;j<transData.Sections[i].Fields.length;j++)
			{					
				curField = transData.Sections[i].Fields[j].Field;
				var isChecked = transData.Sections[i].Fields[j].Checked;
				var isReadOnly = transData.Sections[i].Fields[j].Readonly;
				var isDisabled = transData.Sections[i].Fields[j].Disabled;
				//alert(isDisabled);

				//$("#fldBarDD" + i).append("<button onclick='addDD(\"" + curField + "\"," + i + "," + j + ")' class='w3-border w3-button' style='width:190px;margin:2px'>" + curField + "</button>");		
				if(j<transData.Sections[i].Fields.length-1)
				{
					$("#fldBarDD" + i).append("<input id='chkFld" + i + "' type='checkbox' class='w3-check' onclick='fieldChecked()' " + isChecked + "><button id='btn" + i + j + "' onclick='addDD(\"" + curField + "\"," + i + "," + (j+1) + ")' class='w3-border w3-button' style='text-align:left;width:300px;margin-left:5px;margin-bottom:5px' " + isDisabled + " contenteditable>" + curField + "</button><br>");
				}
				else
				{
					$("#fldBarDD" + i).append("<input id='chkFld" + i + "' type='checkbox' class='w3-check' onclick='fieldChecked()' " + isChecked + "><button id='btn" + i + j + "' onclick='addDD(\"" + curField + "\"," + i + "," + (j+1) + ")' class='w3-border w3-button' style='text-align:left;width:300px;margin-left:5px;margin-bottom:5px;' " + isDisabled + " contenteditable>" + curField + "</button><img src='Images/add.jpg' onclick='addField(" + (j+1) + ")' style='width:20px'/>");
				}
			}	
		//}
	}	
	
	function addHeaderCompany() 
	{
		companyName = data.header[0].company[0].name;
		$("#divForm").append("<div id='divCompanyNameRow" + rowCount + "' class='w3-left' style='font-size:10px;margin-left:30px'>" + companyName + "</div><br>");
	}
	
	function addHeaderAddress() 
	{
		var street = data.header[0].company[0].address[0].street;
		$("#divForm").append("<div id='divStreetRow" + rowCount + "' class='w3-left' style='font-size:10px;margin-left:30px'>" + street + "</div><br>");
	}
	
	function addHeaderCity() 
	{
		city = data.header[0].company[0].address[0].city;
		unit = data.header[0].company[0].address[0].unit;
		state = data.header[0].company[0].address[0].state;
		zip = data.header[0].company[0].address[0].zip;
		$("#divForm").append("<div id='divCityRow" + rowCount + "' class='w3-left' style='font-size:10px;margin-left:30px'>" + city + ", " + state + " " + zip + "</div><br>");
	}
	
	function addHeaderState() 
	{
	}
	
	function addHeaderZip() 
	{
	}

	function addHeaderEmail() 
	{
		supportEmail = data.header[0].company[0].email[0].support;
		$("#divForm").append("<div id='divEmailRow" + rowCount + "' class='w3-left' style='font-size:10px;margin-left:30px'>" + supportEmail + "</div><br>");
	}

	function addHeaderPhone() 
	{
	}

	function addHeaderFax() 
	{
	}	
	
	function addHeaderContact() 
	{
	}
	
	function addHeader() 
	{
		rowCount++;
		
		//alert(data.header[0].company[0].address[0].street);		
		
		var busPhone = data.header[0].company[0].phone[0].business;
		var faxPhone = data.header[0].company[0].phone[0].fax;
		var salesPhone = data.header[0].company[0].phone[0].sales;
		var supportPhone = data.header[0].company[0].phone[0].support;
		
		var busEmail = data.header[0].company[0].email[0].business;
		var salesEmail = data.header[0].company[0].email[0].sales;
		var supportEmail = data.header[0].company[0].email[0].support;
		
		$("#divForm").append("<div id='divCompanyNameRow" + rowCount + "' class='w3-left' style='font-size:10px;margin-left:30px'>" + companyName + "</div><br><br>");
				
		$("#divForm").append("<div id='divContact" + rowCount + "' class='w3-row' style='margin-left:10px'>Contact Information</div>");
		$("#divForm").append("<div id='divBusPhoneRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
		$("#divForm").append("<div id='divFaxPhoneRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
		$("#divForm").append("<div id='divSalesPhoneRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
		$("#divForm").append("<div id='divSupportPhoneRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
				
		var companyNameResponse = "<input id='lblfh1r1' value='" + companyName + "' size='25' style='font-size:12px;margin-left:0px;border:1px;text-align:left'></input>";
		var streetResponse = "<input id='lblfh1r1' value='" + street + "' size='25' style='font-size:12px;margin-left:0px;border:1px;text-align:left'></input>";
		var cityResponse = "<input id='lblfh1r1' value='" + city + ", " + state + " " + zip + "' size='20' style='font-size:12px;margin-left:0px;border:1px;text-align:left'></input>";
		cityResponse += "<input id='lblfh1r1' value='"+ state +"' size='3' style='font-size:12px;margin-left:0px;border:1px;text-align:left'></input>";
		cityResponse += "<input id='lblfh1r1' value='"+ zip +"' size='2' style='font-size:12px;margin-left:0px;border:1px;text-align:left;width'></input>";
		
		var busPhoneResponse = "<input id='lblfh1r1' value='Phone #: "+ busPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:left'></input>";
		var faxPhoneResponse = "<input id='lblfh1r1' value='Fax #: "+ faxPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:left'></input>";
		var salesPhoneResponse = "<input id='lblfh1r1' value='Sales #: "+ salesPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:left'></input>";
		var supportPhoneResponse = "<input id='lblfh1r1' value='Support #: "+ supportPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:left'></input>";
		
		var emailResponse = "<input id='lblfh1r1' value='" +  busEmail + "' style='font-size:12px;margin-left:10px;border:0px;text-align:left;width:400px'></input>";
		
		//var cityResponse = cityResponse + "," + stateResponse + " " + zipResponse;			
		//cityResponse += "<input id='txtfh2r1' value='Data' style='border:0px;text-align:left;width:200'></input>";			
		//cityResponse += "<input id='txtfh2r1' value='Data' style='border:0px;text-align:left;width:200'></input>";			
		//cityResponse += "<input id='txtfh2r1' value='Data' style='border:0px;text-align:left;width:200'></input>";			
		
		$("#divCompanyNameRow" + rowCount).append(companyNameResponse);
		$("#divStreetRow" + rowCount).append(streetResponse);
		$("#divCityRow" + rowCount).append(cityResponse);
		$("#divBusPhoneRow" + rowCount).append(busPhoneResponse);
		$("#divEmailRow" + rowCount).append(emailResponse);
		$("#divSalesPhoneRow" + rowCount).append(salesPhoneResponse);
		$("#divSupportPhoneRow" + rowCount).append(supportPhoneResponse);
	}
		
	function addText(v) 
	{
		//alert("Value = " + v);
		$("#divForm").append("<div id='divRow" + rowCount + "' style='font-size:20px' contenteditable class='w3-row w3-margin'></div>");
		$("#divRow" + rowCount).append(v);
	}				
	
	function addTitle() 
	{
		//getTitleProperties("divForm","Form Title");
		var title = transData.title;
		$("#divForm").append("<div id='divTitle' class='w3-center w3-text-green' style='margin-bottom:10px;font-size:12px' contenteditable>" + title + "</div>");			
	}
	
	function addInstructions() 
	{
		//$("#divForm").append("<div id='divTitle' class='w3-center w3-margin' contenteditable><textarea></textarea></div>");			
		//$("#divForm").append("<div class'w3-left'>Instructions</div><div class'w3-left'><textarea placeholder='Enter Instructions' rows='5' cols='90'></textarea></div>");			
		$("#divForm").append("<div style='margin-left:0px'><textarea placeholder='Enter Instructions' rows='1' cols='84' style='text-align:center;margin-left:4px;font-size:20px' class='notranslate'></textarea></div>");			
		//$("#divForm").append("<div class'w3-center'>Instructions</div><textarea style='margin-left:8px;margin-right:10px'</textarea></div>");			
		//$("#divForm").append("");			
	}
	
	function addFooter() 
	{
		$("#divForm").append("<div id='divFooter" + secCount + "' class='w3-row w3-margin w3-center' contenteditable></div>");			
		
		rowCount++;
		
		var retrievedObjectDC = localStorage.getItem('dc');														
		var data = JSON.parse(retrievedObjectDC);
		
		//alert(data.header[0].company[0].address[0].street);
		
		var companyName = data.header[0].company[0].name;
		var street = data.header[0].company[0].address[0].street;
		var city = data.header[0].company[0].address[0].city;
		var unit = data.header[0].company[0].address[0].unit;
		var state = data.header[0].company[0].address[0].state;
		var zip = data.header[0].company[0].address[0].zip;
		
		var busPhone = data.header[0].company[0].phone[0].business;
		var faxPhone = data.header[0].company[0].phone[0].fax;
		var salesPhone = data.header[0].company[0].phone[0].sales;
		var supportPhone = data.header[0].company[0].phone[0].support;
		
		var busEmail = data.header[0].company[0].email[0].business;
		var salesEmail = data.header[0].company[0].email[0].sales;
		var supportEmail = data.header[0].company[0].email[0].support;
		
		$("#divFooter" + secCount).append("<div id='divCompanyNameRow" + rowCount + "' class='w3-left' style='margin-left:0px'></div>");
		$("#divFooter" + secCount).append("<div id='divStreetRow" + rowCount + "' class='w3-left' style='margin-left:0px'></div>");
		$("#divFooter" + secCount).append("<div id='divCityRow" + rowCount + "' class='w3-left' style='margin-left:0px'></div>");
		
		//$("#divForm").append("<div id='divContact" + rowCount + "' class='w3-row' style='margin-left:10px'>Contact Information</div>");
		$("#divFooter" + secCount).append("<div id='divBusPhoneRow" + rowCount + "' class='w3-left' style='margin-left:0px'></div>");
		$("#divFooter" + secCount).append("<div id='divFaxPhoneRow" + rowCount + "' class='w3-left' style='margin-left:0px'></div>");
		$("#divFooter" + secCount).append("<div id='divSalesPhoneRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
		$("#divFooter" + secCount).append("<div id='divSupportPhoneRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
		$("#divFooter" + secCount).append("<div id='divEmailRow" + rowCount + "' class='w3-row w3-left' style='margin-left:0px'></div>");
		
		//var companyNameResponse = "<input id='lblfh1r1' value='"+ companyName +"' size='25' style='font-size:12px;margin-left:10px;border:1px;text-align:left'></input>";
		var streetResponse = "<input id='lblfh1r1' value='"+ street +"' size='25' style='font-size:12px;margin-center:10px;border:1px;text-align:left'></input>";
		var cityResponse = "<input id='lblfh1r1' value='" + city + ", " + state + " " + zip + "' size='20' style='font-size:12px;margin-lecenterft:10px;border:1px;text-align:left'></input>";
		//cityResponse += "<input id='lblfh1r1' value='"+ state +"' size='3' style='font-size:12px;margin-left:0px;border:1px;text-align:left'></input>";
		//cityResponse += "<input id='lblfh1r1' value='"+ zip +"' size='2' style='font-size:12px;margin-left:0px;border:1px;text-align:left;width'></input>";
		
		var busPhoneResponse = "<input id='lblfh1r1' value='Phone #: "+ busPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:center'></input>";
		var faxPhoneResponse = "<input id='lblfh1r1' value='Fax #: "+ faxPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:center'></input>";
		var salesPhoneResponse = "<input id='lblfh1r1' value='Sales #: "+ salesPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:center'></input>";
		var supportPhoneResponse = "<input id='lblfh1r1' value='Support #: "+ supportPhone +"' style='font-size:12px;margin-left:10px;border:0px;text-align:center'></input>";
		
		var emailResponse = "<input id='lblfh1r1' value='" +  busEmail + "' style='font-size:12px;margin-left:10px;border:0px;text-align:center;width:400px'></input>";
		
		//var cityResponse = cityResponse + "," + stateResponse + " " + zipResponse;			
		//cityResponse += "<input id='txtfh2r1' value='Data' style='border:0px;text-align:left;width:200'></input>";			
		//cityResponse += "<input id='txtfh2r1' value='Data' style='border:0px;text-align:left;width:200'></input>";			
		//cityResponse += "<input id='txtfh2r1' value='Data' style='border:0px;text-align:left;width:200'></input>";			
		
		//$("#divCompanynameRow" + rowCount).append(companyNameResponse);
		$("#divStreetRow" + rowCount).append(streetResponse);
		$("#divCityRow" + rowCount).append(cityResponse);
		//$("#divBusPhoneRow" + rowCount).append(busPhoneResponse);
		$("#divEmailRow" + rowCount).append(emailResponse);
		//$("#divSalesPhoneRow" + rowCount).append(salesPhoneResponse);
		//$("#divSupportPhoneRow" + rowCount).append(supportPhoneResponse);
	}
	
	function addContact()
	{
		//alert("Contact");
		$("#divForm").append("<form id='frmContact' action='/action_page.php' class='w3-container w3-card-4 w3-light-grey w3-text-blue w3-margin'>");
		$("#frmContact").append("<h2 class='w3-center'>Contact Us</h2>");
		 
		$("#frmContact").append("<div class='w3-row w3-section'>");
		  $("#frmContact").append("<div class='w3-col' style='width:50px'><i class='w3-xxlarge fa fa-user'></i></div>");
			$("#frmContact").append("<div class='w3-rest'>");
			  $("#frmContact").append("<input class='w3-input w3-border' name='first' type='text' placeholder='First Name'>");
			$("#frmContact").append("</div>");
		$("#frmContact").append("</div>");

		$("#frmContact").append("<div class='w3-row w3-section'>");
		  $("#frmContact").append("<div class='w3-col' style='width:50px'><i class='w3-xxlarge fa fa-user'></i></div>");
			$("#frmContact").append("<div class='w3-rest'>");
			  $("#frmContact").append("<input class='w3-input w3-border' name='last' type='text' placeholder='Last Name'>");
			$("#frmContact").append("</div>");
		$("#frmContact").append("</div>");

		$("#frmContact").append("<div class='w3-row w3-section'>");
		  $("#frmContact").append("<div class='w3-col' style='width:50px'><i class='w3-xxlarge fa fa-envelope-o'></i></div>");
			$("#frmContact").append("<div class='w3-rest'>");
			  $("#frmContact").append("<input class='w3-input w3-border' name='email' type='text' placeholder='Email'>");
			$("#frmContact").append("</div>");
		$("#frmContact").append("</div>");

		$("#frmContact").append("<div class='w3-row w3-section'>");
		  $("#frmContact").append("<div class='w3-col' style='width:50px'><i class='w3-xxlarge fa fa-phone'></i></div>");
			$("#frmContact").append("<div class='w3-rest'>");
			  $("#frmContact").append("<input class='w3-input w3-border' name='phone' type='text' placeholder='Phone'>");
			$("#frmContact").append("</div>");
		$("#frmContact").append("</div>");

		$("#frmContact").append("<div class='w3-row w3-section'>");
		  $("#frmContact").append("<div class='w3-col' style='width:50px'><i class='w3-xxlarge fa fa-pencil'></i></div>");
			$("#frmContact").append("<div class='w3-rest'>");
			  $("#frmContact").append("<input class='w3-input w3-border' name='message' type='text' placeholder='Message'>");
			$("#frmContact").append("</div>");
		$("#frmContact").append("</div>");

		$("#frmContact").append("<button class='w3-button w3-block w3-section w3-blue w3-ripple w3-padding'>Send</button>");
		
		$("#divForm").append("</form>");
	}
	
	function addSubmit() 
	{
		//alert("Submit");
		$("#divForm").append("<input type='button' class='w3-btn w3-green' id='btnSubmit' style='width:100px;margin-bottom:25px' value='Submit' onclick='submitScratchData()' ></input></td>");			
	}
	
	//btnAddTextbox.onclick = function() 
	//{
		////fldCount++;
		//$("#divSection" + secCount + "Body").append("<div class='w3-left form-group' style='margin-left:10px;padding:5px'><label id='lblFSF' name='LSF' class='w3-left w3-text-black' contenteditable style='margin-top:15px;margin-right:10px;text-align:right' for='" + "label" + "'>" + "label" + "</label><input id='chkFSF" + secCount + "' type='checkbox' class='w3-left w3-check' checked='checked' style='margin-bottom:10px'/><input class='w3-border w3-input type='text' size='1px' name='FSF' placeholder='Label" + secCount + fldCount + "' id='txtFSF" + secCount + fldCount + "' onfocus='onFocus()'/></div>");
		
		//$("#divSection" + secCount + "Body").append("<div class='w3-left form-group' style='margin-left:10px;padding:5px'><label id='lblFSF' name='LSF' class='w3-left w3-text-black' contenteditable style='margin-top:15px;margin-right:10px;text-align:right' for='" + "label" + "'>" + "label" + "</label><input id='chkFSF" + secCount + "' type='checkbox' class='w3-left w3-check' checked='checked' style='margin-bottom:10px'/><input class='w3-border w3-input type='text' size='1px' name='FSF' placeholder='Label" + secCount + fldCount + "' id='txtFSF" + secCount + fldCount + "' onfocus='onFocus()'/></div>");
	
	//$("#divForm").append('<div class="w3-dropdown-click">');
		//$("#divSection" + secCount + "Body").append('<label id="lbl' + fldCount + '" type="text" class="w3-margin w3-text w3-left" contenteditable onclick="dropFunction()">label</label><input id="chkFSF' + secCount + '" type="checkbox" class="w3-left w3-check" checked="checked" />');
	//$("#divForm").append('</div>');
	
	/*
	<div class="w3-dropdown-click">
							<button class="w3-button w3-black" onclick="dropFunction()">Dropdown</button>
							<div class="w3-dropdown-content w3-bar-block w3-card w3-light-grey w3-hide" id="myDIV">
							  <input class="w3-input w3-padding" type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
							  <a class="w3-bar-item w3-button" href="#about">About</a>
							  <a class="w3-bar-item w3-button" href="#base">Base</a>
							  <a class="w3-bar-item w3-button" href="#blog">Blog</a>
							  <a class="w3-bar-item w3-button" href="#contact">Contact</a>
							  <a class="w3-bar-item w3-button" href="#custom">Custom</a>
							  <a class="w3-bar-item w3-button" href="#support">Support</a>
							  <a class="w3-bar-item w3-button" href="#tools">Tools</a>
							</div>
						  </div>
	*/
	
	//}	
	
	function addCheckbox() 
	{
		
	}		
	
	function addRadio() 
	{
		//alert("Radio");
	}
	
	function addSelect() 
	{
		//alert("Dropdown");
	}	
	
	function addFaxHeader() 
	{
		//alert("addFaxHeader");
		rowCount++;
		$("#divForm").append("<div id='divRow" + rowCount + "' class='w3-row w3-margin'></div>");
		var faxHeaderResponse = "<div class='w3-margin' contenteditable><b>Date: 09/22/2017</b></div>";
		faxHeaderResponse += "<table class='w3-table-all' style='width:100%'><tr><td style='text-align:right;width:8%' contenteditable>To:</td>";
		faxHeaderResponse += "<td width:25% contenteditable><b>" + brokerContact + "</b></td>";
		faxHeaderResponse += "<td style='text-align:right;width:25%' contenteditable>From:</td>";
		faxHeaderResponse += "<td style='text-align:left;width:25%' contenteditable><b>" + brokerContact + "</b></td>";
		faxHeaderResponse += "</tr><tr></tr><tr><td style='text-align:right' contenteditable>Fax:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + brokerFax + "</b></td>";
		faxHeaderResponse += "<td style='text-align:right' contenteditable>Fax:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + ccFax + "</b></td>";
		faxHeaderResponse += "</tr><tr><td style='text-align:right' contenteditable>Phone:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + brokerFax + "</b></td>";
		faxHeaderResponse += "<td style='text-align:right' contenteditable>Phone:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + groupPhone + "<b></td></tr>";
		faxHeaderResponse += "<tr><td style='text-align:right' contenteditable>eMail:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + groupEmail + "</b></td>";
		faxHeaderResponse += "<td style='text-align:right' contenteditable>eMail:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + brokerEmail + "</b></td></tr>";
		faxHeaderResponse += "<tr><td style='text-align:right' contenteditable>Group:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + groupName + "</b></td>";
		faxHeaderResponse += "<td style='text-align:right' contenteditable>Group #:</td>";
		faxHeaderResponse += "<td contenteditable><b>" + groupNumber + "</b></td></tr></table>";			
		$("#divRow" + rowCount).append(faxHeaderResponse);
	}		
	
	function dropFields() 
	{
		alert("Drop Section Titlessssss");
		var x = document.getElementById("myDiv");
		if (x.className.indexOf("w3-show") == -1) {
			//alert("2");
			x.className += " w3-show";
		} else {
			//alert("3");
			x.className = x.className.replace(" w3-show", "");
		}
	}
	
	function allowDrop(ev) {
		ev.preventDefault();		
	}

	function drag(ev) {
		ev.dataTransfer.setData("button", ev.target.id);
	}

	function drop(ev) {
		ev.preventDefault();
		var data = ev.dataTransfer.getData("button");
		ev.target.appendChild(document.getElementById(data));
	}

	function filterFunction() {
		//alert("Filter");
		var input, filter, ul, li, a, i;
		input = document.getElementById("myInput");
		filter = input.value.toUpperCase();
		div = document.getElementById("divEEFields");
		a = div.getElementsByTagName("a");
		for (i = 0; i < a.length; i++) {
			if (a[i].innerHTML.toUpperCase().indexOf(filter) > -1) {
				a[i].style.display = "";
			} else {
				a[i].style.display = "none";
			}
		}
	}
	
	function myFunction(c) 
	{
		var x = document.getElementById("divBar" + c);
		if (x.className.indexOf("w3-show") == -1) {
			x.className += " w3-show";
		} else { 
			x.className = x.className.replace(" w3-show", "");
		}
	}
	
	function setBar(c,d) 
	{
		curField = event.target;
		//alert(curField.id);
		//alert("c = " + c);
		var x = document.getElementById("divBar" + c);
		if (x.className.indexOf("w3-show") == -1) {
			x.className += " w3-show";
		} else { 
			x.className = x.className.replace(" w3-show", "");			
		}		
		var dd = document.getElementById("txtSelect" + c);
		dd.value = d;
		
		//alert("1: textarea length = " + dd.value);
		if(dd.value.trim().length > 20)
		{
			//alert("2: textarea length = " + $("#txtSelect" + c).val().trim().length);
			$("#txtSelect" + c).attr('cols',dd.value.trim().length-12);
			$("#lbl" + c).width((dd.value.trim().length*7)+35);
		}
		else
		{			
			$("#txtSelect" + c).attr('cols',15);
			$("#lbl" + c).width(185);
		}
	}
	
	function addBar(c) 
	{
		//alert("c = " + c);
		//alert("d = " + d);
		
		/*
		var x = document.getElementById("divBar" + c);
		if (x.className.indexOf("w3-show") == -1) {
			x.className += " w3-show";
		} else { 
			x.className = x.className.replace(" w3-show", "");			
		}
		*/
	}
	
	function addLogo(imageName)
	{
		//alert(imageName);
		//$("divForm").append("<div>Test</div>");
		//alert(imageName);
		var logoWidth = transData.width;
		$("#divForm").append("<div class='w3-center'><img id='imgLogo1' style='margin-bottom:0px' src='http://localhost/src/assets/images/" + imageName + "' width='" + logoWidth + "px' ></img></div>");				
	}	
		
	function addDOB()
	{
		var x = "Date of Birth";		
		//fldCount++;
		var fldType = "date";
		var w3 = "input"

		$("#divSection" + secCount + "Body").append("<div id='divDOB' draggable='true' ondragstart='drag(event)'><div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSFDOB" + fldCount + "' id='txtFSF" + fldCount + "'/></div></div>");		
	}	
	
	function addSSN()
	{
		var x = "Social Security#";
		////fldCount++;
		var fldType = "text";
		var w3 = "input"

		$("#divSection" + secCount + "Body").append("<div id='divSSN' draggable='true' ondragstart='drag(event)'><div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-textlight-grey' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onFSBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='13' type='" + fldType + "' name='FSFSSN" + fldCount + "' id='txtFSF" + fldCount + "'/></div></div>");		
	}
	
	function addEmail()
	{
		var x = "Email Address";
		//fldCount++;
		var fldType = "email";
		var w3 = "input"		
		$("#divSection" + secCount + "Body").append("<div id='divEmail' draggable='true' ondragstart='drag(event)'><div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSFEmail" + fldCount + "' id='txtFSF" + fldCount + "'/></div></div>");		
	}
	
	function addPhone()
	{
		var x = "Phone #";
		////fldCount++;
		var fldType = "tel";
		var w3 = "input"		
		$("#divSection" + secCount + "Body").append("<div id='divPhone' draggable='true' ondragstart='drag(event)'><div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSFPhone" + fldCount + "' id='txtFSF" + fldCount + "'/></div></div>");		
	}
	
	function addFax()
	{
		var x = "Fax #";
		////fldCount++;
		var fldType = "tel";
		var w3 = "input"
		$("#divSection" + secCount + "Body").append("<div id='divFax' draggable='true' ondragstart='drag(event)'><div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSFFax" + fldCount + "' id='txtFSF" + fldCount + "'/></div></div>");		
	}
	
	function addRel()
	{
		var x = "Relationship";
		////fldCount++;
		var fldType = "tel";
		var w3 = "input"
		$("#divSection" + secCount + "Body").append("<div id='divFax' draggable='true' ondragstart='drag(event)'><div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSFRel" + fldCount + "' id='txtFSF" + fldCount + "'/></div></div>");		
	}
		
	function removeDD()
	{
		alert("Clear Name");
		document.getElementById("divPDD").innerHTML = "";
	}
	
	function removeName()
	{
		//alert("Clear Name");
		document.getElementById("divPName").innerHTML = "";
	}
	
	function removeAddress()
	{
		//alert("Clear Address");
		document.getElementById("divPAddress").innerHTML = "";
	}
	
	function removeDOB()
	{
		//alert("Clear DOB");
		document.getElementById("divPDOB").innerHTML = "";
	}
	
	function removeSSN()
	{
		//alert("Clear SSN");
		document.getElementById("divPSSN").innerHTML = "";
	}
	
	function removeEmail()
	{
		//alert("Clear Email");
		document.getElementById("divPEmail").innerHTML = "";
	}
	function removePhone()
	{
		//alert("Clear Phone");
		document.getElementById("divPPhone").innerHTML = "";
	}
	
	function removeFax()
	{
		//alert("Clear Fax");
		document.getElementById("divPFax").innerHTML = "";
	}
	
	function removeRel()
	{
		//alert("Clear Relationship");
		document.getElementById("divPRel").innerHTML = "";
	}
	
	function previewDD(curField,i,j)	
	{			
		curField = event.target;		
		var ddName = curField.innerHTML;
		alert("ddName = " + ddName);	
		var fldType = "text";
		var w3 = "input"
		
		////fldCount++;
		//alert("Preview deafault Name fields");		
		//$("#divPreview").append("");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
		//$("#divDDList").hide();
		
		//alert(document.getElementById("radAdd").checked);
		
		if(document.getElementById("radMod").checked)
		{
			//alert("2 j = " + j);
			
			$("#divPreview").append("<div id='divPDD' style='margin-top:50px'></div>");
			$("#divPDD").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:200px;text-align:left;margin:5px' for='label'>" + ddName + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + ddName + "' pattern='\d{1,5}' maxlength='20' size='20' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");				
			$("#divBar" + fldCount).empty();
			$("#divDDList").empty();
			for(var k=0;k<transData.Sections[i].Fields[j].Lists.length;k++)
			{
				if(k<transData.Sections[0].Fields[j].Lists.length-1)
				{
					$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
					$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3light-grey w3-animate-zoom' style='width:300px;margin-top:0px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input></div>");				 				  
				}
				else
				{
					$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
					$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3light-grey w3-animate-zoom' style='width:300px;margin-top:0px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input><img src='Images/add.jpg' onclick='addItem(" + secCount + "," + j + "," + k + ")'style='width:20px' /></div>");
				}					 				  
			}
		}		
	}
		
	function modifyList(j,k)
	{
		//alert("Modify List");
		//$("#divDDList").empty();
		//transData.Sections[0].Fields[0].Lists[2].List = "Test List";		
		//localStorage.setItem("transportation", JSON.stringify(transData));
		/*
		var newItem = $("#txtAreaList").val();
		//alert(newItem);
		transData.Sections[0].Fields[j].Lists.push(
			{List: newItem}
		);
		localStorage.setItem("transportation", JSON.stringify(transData));
		
		$("#divBar" + fldCount).empty();
		$("#divDDList").empty();
		for(var k=0;k<transData.Sections[0].Fields[j].Lists.length;k++)
		{
			$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
			$("#divDDList").append("<div class='w3-bar-block w3-card-4 w3-light-grey w3-animate-zoom' style='margin-top:10px;margin-bottom:10px;padding:10px' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</div>");				 				  
		}
		*/
	}
	
	function previewName()	
	{				
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		//alert("Preview deafault Name fields");
		$("#divPreview").append("<div id='divPName' style='margin-top:200px'>");
		$("#divPName").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>First Name</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "First Name" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		////fldCount++;
		$("#divPName").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Initial</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "First Name" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		////fldCount++;
		$("#divPName").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Last Name</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "First Name" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview").append("</div>");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
	}
	
	function previewAddress()
	{
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		//alert("Preview deafault Name fields");
		$("#divPreview").append("<div id='divPAddress'>");
		$("#divPAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Physical Street Address</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Street Address" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		////fldCount++;
		$("#divPAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>City</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "City" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		////fldCount++;
		$("#divPAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>State</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "State" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		////fldCount++;
		$("#divPAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Zip Code</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Zip Code" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");				
		$("#divPreview" + secCount + "Body").append("</div>");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
	}
	
	function previewDOB()
	{
		var x = "Date of Birth";
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		$("#divPreview").append("<div id='divPDOB'>");
		$("#divPDOB").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview" + secCount + "Body").append("</div>");
	}
	
	function previewSSN()
	{
		var x = "Social Security #";
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		$("#divPreview").append("<div id='divPSSN'>");
		$("#divPSSN").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview" + secCount + "Body").append("</div>");
	}
	
	function previewEmail()
	{
		var x = "Email Address";
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		$("#divPreview").append("<div id='divPEmail'>");
		$("#divPEmail").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview" + secCount + "Body").append("</div>");
	}
	
	function previewPhone()
	{
		var x = "Phone #";
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		$("#divPreview").append("<div id='divPPhone'>");
		$("#divPPhone").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview" + secCount + "Body").append("</div>");
	}
	
	function previewFax()
	{
		var x = "Fax #";
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		$("#divPreview").append("<div id='divPFax'>");
		$("#divPFax").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview" + secCount + "Body").append("</div>");
	}
	
	function previewRel()
	{
		var x = "Relationship";
		var fldType = "text";
		var w3 = "input"
		////fldCount++;
		$("#divPreview").append("<div id='divPRel'>");
		$("#divPRel").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>" + x + "</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		$("#divPreview" + secCount + "Body").append("</div>");
	}
	
	function onChange()
	{
		//alert("onChange");
		curField = event.target;
		
		id = curField.id;
		
		if(id="txtAreaLList")
		{
			//alert("txtAreaLList has changed");
			$("#btnAddItem").prop('disabled', false);
		}
		
		//$('textarea').on('change keyup keydown paste cut', 'textarea', function () {
		//alert("test: " + $("#" + curField.id).val().trim().length);
		
		//alert("textarea length = " + $("#" + curField.id).val().trim().length);
		//if($("#" + curField.id).val().trim().length > 20)
		//{
			//alert("textarea length = " + $("#" + curField.id).val().trim().length);
			//$("#" + curField.id).attr('rows',2);
		//}
		//}).find('textarea').change();
	}
	
	function download()
	{	
		var retrievedObject = localStorage.getItem('transportation');
		var data = JSON.parse(retrievedObject);
		data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 4));
		
		var a = document.createElement('a');
			
		a.href = 'data:' + data;
		a.download = 'transportation.json';
		a.innerHTML = 'download';
		
		var container = document.getElementById('divMenu');
		container.display = "none";
		container.appendChild(a)
	}
	
	function addDepartments()
	{
		//alert(depData[6].Department);
		//var nvMain = document.getElementById("navMain");
		var curDep;
		//alert(depData.length);
		for(var i=0;i<depData.length;i++)
		{
			//alert("Item " + i + " is " + depData[i].Department);
			curDep = depData[i].Department;
			$("#navMain").append("<button class='w3-bar-item w3-button w3-light-grey w3-border' onclick='department(\"" + curDep + "\")'>" + curDep + "</button>");
		}
		
		//alert("There are no more items");
		
		//var node = document.createElement("LI");
		//var textnode = document.createTextNode("Water");
		//node.appendChild(textnode);
		//document.getElementById("myList").appendChild(node);
	}
	
	function addDepartment()
	{
		alert("Add a new department");
	}
	
	function department(dep)
	{
		alert("You selected " + dep);
	}
	
	function saveText(text, filename)
	{
	  
		 //alert(text);
		 /*
		text = text.replace(/\"{/g,"{").replace(/\\/g,"").replace(/}\"/g,"}");
		str.replace(/foo/g, "bar")
		alert(text);
		var a = document.createElement('a');
		a.setAttribute('href', 'data:text/plain;charset=utf-u,'+encodeURIComponent(text));
		a.setAttribute('download', filename);
		a.click();
		*/
	  
		var retrievedObject = localStorage.getItem('transportation');
		var data = JSON.parse(retrievedObject);
		data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 4));
		
		var a = document.createElement('a');
		a.display = "none";
		a.href = 'data:' + data;
		a.download = 'data.json';
		a.innerHTML = 'download JSON';

		var container = document.getElementById('divMain');
		container.appendChild(a);
		//alert("1: Item count = " + data.items.length);
		a.click();
	}

	function clearCache()
	{
		//alert("Clear Cache");
		//var obj = localStorage.getItem('transportation');	
		//saveText( JSON.stringify(obj), "transportation.json" );
		
		localStorage.clear();
	}
		
	function addItem(i,j,k)
	{	
		/*	
		var newItem = "Add Item " + k;
		alert(j);
		transData.Sections[0].Fields[j].Lists.push(
			{List: newItem}
		);
		localStorage.setItem("transportation", JSON.stringify(transData));
		
		$("#divBar" + fldCount).empty();
		$("#divDDList").empty();
		for(var k=0;k<transData.Sections[0].Fields[j].Lists.length;k++)
		{
			if(k<transData.Sections[0].Fields[j].Lists.length-1)
			{
				$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
				$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3-light-grey w3-animate-zoom' style='width:300px;margin:2px;margin-right:2px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input></div>");				 				  
			}
			else
			{
				$("#divBar" + fldCount).append("<a href='#' onclick='setBar(\"" + fldCount + "\",\"" + transData.Sections[0].Fields[j].Lists[k].List + "\")' class='w3-bar-item w3-button' contenteditable>" + transData.Sections[0].Fields[j].Lists[k].List + "</a>");				 
				$("#divDDList").append("<div class='w3-row'><img src='Images/remove.jpg' style='width:20px'/><input onfocus='onFocus()' onblur='onBlur()' class='w3light-grey w3-animate-zoom' style='width:300px;margin-top:0px;margin-bottom:3px;padding:10px' contenteditable value='" + transData.Sections[0].Fields[j].Lists[k].List + "'></input><img src='Images/add.jpg' onclick='addItem(" + secCount + "," + j + "," + k + ")' style='width:20px' /></div>");
			}					 				  
		}	
		//document.getElementById("txtAreaList").value = "";
		//document.getElementById("txtAreaList").focus();
		*/
	}
	
	function addName()
	{		
		curField = event.target;
		//alert("curField = " + curField.id);	
		var fldType = "text";
		var w3 = "input"
		//fldCount++;
		//alert("Preview deafault Name fields");
		//alert("secCount = " + secCount);
		$("#divSection" + secCount + "Body").append("<div id='divName" + secCount + "' draggable='true' ondragstart='drag(event)'>");
		$("#divName" + secCount).append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-textlight-grey' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>First Name</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onFSBlur()' placeholder='Enter " + "First Name" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "' required='required'/></div>");		
		//fldCount++;
		$("#divName" + secCount).append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Initial</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onFSBlur()' placeholder='Enter " + "Initial" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divName" + secCount).append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-textlight-grey' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Last Name</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onFSBlur()' placeholder='Enter " + "Last Name" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "' required='required'/></div>");		
		$("#divSection" + secCount + "Body").append("</div>");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
	}
	
	function addPhysicalAddress()
	{
		//alert("Physical Address");
		var fldType = "text";
		var w3 = "input"
		//fldCount++;
		//alert("Preview deafault Name fields");
		$("#divSection" + secCount + "Body").append("<div id='divAddress' draggable='true' ondragstart='drag(event)'>");
		//$("#divAddress").append("<div class='w3-left' style='width:100%;text-align:left;padding:5px'><label id='lblGA" + fldCount + "' name='LGA" + fldCount + "' class='w3-left w3-text-green' contenteditable style='width:150px;text-align:left;margin:0px' for='label'></label></div>");		
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:250px;text-align:left;margin-left:5px;margin-top:10px;margin-bottom:0px;margin-right:5px' for='label'>Physical Street Address</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Street Address" + "' pattern='\d{1,5}' maxlength='15' size='15' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:215px;text-align:left;margin:5px' for='label'>City</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "City" + "' pattern='\d{1,5}' maxlength='15' size='15' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:70px;text-align:left;margin:5px' for='label'>State</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "State" + "' pattern='\d{1,5}' maxlength='2' style='width:105px' size='2' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:100px;text-align:left;margin:5px' for='label'>Zip Code</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Zip Code" + "' pattern='\d{1,5}' maxlength='9 style='width:150px' size='9' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");				
		$("#divSection" + secCount + "Body").append("</div>");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
	}
	
	function addMailingAddress()
	{

		var fldType = "text";
		var w3 = "input"
		//fldCount++;
		//alert("Preview deafault Name fields");
		$("#divSection" + secCount + "Body").append("<div id='divAddress' draggable='true' ondragstart='drag(event)'>");
		//$("#divAddress").append("<div class='w3-left' style='width:100%;text-align:left;padding:5px'><label id='lblGA" + fldCount + "' name='LGA" + fldCount + "' class='w3-left w3-text-green' contenteditable style='width:150px;text-align:left;margin:0px' for='label'>Mailing Address</label></div>");		
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-black' contenteditable style='width:250px;text-align:left;margin-left:5px;margin-top:10px;margin-bottom:0px;margin-right:5px' for='label'>Mailing Street Address</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Street Address" + "' pattern='\d{1,5}' maxlength='15' size='15' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-black' contenteditable style='width:215px;text-align:left;margin:5px' for='label'>City</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "City" + "' pattern='\d{1,5}' maxlength='15' size='15' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-black' contenteditable style='width:70px;text-align:left;margin:5px' for='label'>State</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "State" + "' pattern='\d{1,5}' maxlength='2' style='width:105px' size='2' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-black' contenteditable style='width:100px;text-align:left;margin:5px' for='label'>Zip Code</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Zip Code" + "' pattern='\d{1,5}' maxlength='9 style='width:150px' size='9' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");				
		$("#divSection" + secCount + "Body").append("</div>");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
	}
	
	function addAddress()
	{
		var fldType = "text";
		var w3 = "input"
		//fldCount++;
		//alert("Preview deafault Name fields");
		$("#divSection" + secCount + "Body").append("<div id='divAddress' draggable='true' ondragstart='drag(event)'>");
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Street Address</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Street Address" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>City</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "City" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>State</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "State" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");		
		//fldCount++;
		$("#divAddress").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>Zip Code</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='Enter " + "Zip Code" + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/></div>");				
		$("#divSection" + secCount + "Body").append("</div>");
		//document.getElementById("lbl" + fldCount).innerHTML = x;
	}
	
	function setLabel(fldType)
	{
		//alert("x = " + x);
		////fldCount++;
		//alert("fldCount = " + fldCount);
		//$("#divSection" + secCount + "Body").append('<div class="w3-margin w3-left"><input style="margin-bottom:10px" id="chkFSF' + secCount + '" type="checkbox" class="w3-left w3-check w3-top" checked="checked" /><label id="lbl' + fldCount + '" style="margin-top:10px;margin-left:5px" class="w3-text w3-left" contenteditable onclick="dropFunction()">label</label><input style="margin-right:100px" class="w3-input w3-col w3-border" placeholder="label" type="text" name="FSF" id="txtFSF"/><div class="w3-dropdown-content w3-bar-block w3-card w3-white" id="myDIV">');					
		
		var x = fldType;
		var w3 = "input"
		if(fldType=="Checkbox")
		{
			fldType = "checkbox";
			w3 = "check";
			$("#divSection" + secCount + "Body").append("<div class='form-group w3-left' style='text-align:left;padding-top:5px;padding-left:50px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>label</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><br><input  style='margin-right:5px' class='w3-check' type='checkbox' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' style='margin-right:25px' name='LSF" + fldCount + "'>1</label><input  style='margin-right:5px' class='w3-check' type='checkbox' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' style='margin-right:20px' name='LSF" + fldCount + "'>2</label><input  style='margin-right:5px' class='w3-check' type='checkbox' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' style='margin-right:20px' name='LSF" + fldCount + "'>3</label></div>");		
			//$("#divSection" + secCount + "Body").append("<div class='form-group w3-left'><input style='margin-right:5px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check w3-left' checked='checked' /><input class='w3-check' type='checkbox' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-text-blue' contenteditable style='margin-left:5px' for='label'>label</label></div>");		
		}
		else if(fldType=="Radio")
		{
			fldType = "radio";
			w3 = "radio";
			$("#divSection" + secCount + "Body").append("<div class='form-group w3-left' style='text-align:left;padding-top:5px;padding-left:50px'><label id='lbl" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label'>label</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><br><input  style='margin-right:5px' class='w3-radio' type='radio' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' style='margin-right:25px' name='LSF" + fldCount + "'>1</label><input  style='margin-right:5px' class='w3-radio' type='radio' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' style='margin-right:20px' name='LSF" + fldCount + "'>2</label><input  style='margin-right:5px' class='w3-radio' type='radio' name='FSF" + fldCount + "' id='txtFSF" + fldCount + "'/><label id='lbl" + fldCount + "' style='margin-right:20px' name='LSF" + fldCount + "'>3</label></div>");		
		}
		else if(fldType=="Select")
		{	
			$("#divSection" + secCount + "Body").append("<div id='divDDC" + fldCount + "' style='margin-top:4px' class='w3-container w3-left'>");
			  $("#divDDC" + fldCount).append("<div id='divSel" + fldCount + "' class='form-group w3-dropdown-click'>");				
				$("#divSel" + fldCount).append("<button id='btn" + fldCount + "' onclick='myFunction()' class='w3-button w3-white w3-text-blue'><b>Relationship</b></button><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><br>");
				$("#divSel" + fldCount).append("<label id='lblSelect" + fldCount + "' onclick='myFunction()' class='w3-button w3-white w3-text-blue'><b>Select Relationship</b></button>");
				$("#divSel" + fldCount).append("<div id='divBar" + fldCount + "' class='w3-dropdown-content w3-bar-block w3-card-4 w3-animate-zoom'>");
				  $("#divBar" + fldCount).append("<a href='#' onclick='myFunction()' class='w3-bar-item w3-button'>Father</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Mother</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Brother</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Sister</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Uncle</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Aunt</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Nephew</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>Niece</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>GrandFather</a>");
				  $("#divBar" + fldCount).append("<a href='#' class='w3-bar-item w3-button'>GrandMother</a>");
				$("#divSel" + fldCount).append("</div>");
			  $("#divDDC" + fldCount).append("</div>");
			$("#divSection" + secCount + "Body").append("</div>");
			
			/*
			$("#divSection" + secCount + "Body").append("<div id='divDDC' class='w3-container'>");			  
			  $("#divDDC").append("<div id='divSel' class='w3-left w3-dropdown-hover'>");
				$("#divSel").append("<button class='w3-margin w3-btn w3-black'>" + x + "</button>");
				$("#divSel").append("<div id='divBar' class='w3-dropdown-content w3-bar-block w3-border'>");
				  $("#divBar").append("<a href='#' class='w3-bar-item w3-button'>Red</a>");
				  $("#divBar").append("<a href='#' class='w3-bar-item w3-button'>Green</a>");
				  $("#divBar").append("<a href='#' class='w3-bar-item w3-button'>Blue</a>");
				$("#divSel").append("</div>");
			  $("#divDDC").append("</div>");
			$("#divSection" + secCount + "Body").append("</div>");
			*/
		}
		else
		{
			$("#divSection" + secCount + "Body").append("<div class='form-group w3-left' style='text-align:left;padding:5px'><label id='LSF" + fldCount + "' name='LSF" + fldCount + "' class='w3-left w3-text-blue' contenteditable style='width:150px;text-align:left;margin:5px' for='label' onfocus='onLabelFocus()' onBlur='setFieldType()'>Enter Field Label</label><input style='margin-bottom:10px' id='chkFSF" + secCount + "' type='checkbox' class='w3-check' checked='checked' /><input class='w3-" + w3 + " w3-border' onfocus='onFocus()' onblur='onBlur()' placeholder='" + x + "' pattern='\d{1,5}' maxlength='15' size='12' type='" + fldType + "' name='FSF" + fldCount + "' id='FSF" + fldCount + "'/></div>");		
			document.getElementById("LSF" + fldCount).innerHTML = x;
			//document.getElementById("LSF" + fldCount).focus();
		}
										
		//dropFunction();
		
			//$("#divSection" + secCount + "Body").append("<div class='w3-left form-group' style='margin-left:10px;padding:5px'><label id='lblFSF' name='LSF' class='w3-left w3-text-black' contenteditable style='margin-top:15px;margin-right:10px;text-align:right' for='" + "label" + "'>" + "label" + "</label><input id='chkFSF" + secCount + "' type='checkbox' class='w3-left w3-check' checked='checked' style='margin-bottom:10px'/><input class='w3-border w3-input type='text' size='1px' name='FSF' placeholder='Label" + secCount + fldCount + "' id='txtFSF" + secCount + fldCount + "' onfocus='onFocus()'/></div>");
			
			//$("#divSection" + secCount + "Body").append("<div class='w3-left form-group' style='margin-left:10px;padding:5px'><label id='lblFSF' name='LSF' class='w3-left w3-text-black' contenteditable style='margin-top:15px;margin-right:10px;text-align:right' for='" + "label" + "'>" + "label" + "</label><input id='chkFSF" + secCount + "' type='checkbox' class='w3-left w3-check' checked='checked' style='margin-bottom:10px'/><input class='w3-border w3-input type='text' size='1px' name='FSF' placeholder='Label" + secCount + fldCount + "' id='txtFSF" + secCount + fldCount + "' onfocus='onFocus()'/></div>");
		
		//$("#divForm").append('<div class="w3-dropdown-click">');
		
		//$("#divForm").append('</div>');
		
	}
	
	function onLabelFocus()
	{		
		////fldCount++;
		//alert("LSF" + fldCount);
		var inputLabel = "LSF" + fldCount;
		var inputField = "FSF" + fldCount;
		var curLabel = document.getElementById(inputLabel);	
		curField = document.getElementById(inputField);	
		curLabel.innerHTML = "";
		curLabel.style.background = "yellow";
	}
	
	function onLabelBlur()
	{		
		////fldCount++;
		//alert("LSF" + fldCount);
		var inputLabel = "LSF" + fldCount;
		var inputField = "FSF" + fldCount;
		var curLabel = document.getElementById(inputLabel);	
		curField = document.getElementById(inputField);	
		curLabel.style.background = "red";
	}
	
	function setFieldType()
	{
		//alert("Set Field Type");
		var inputLabel = "LSF" + fldCount;
		var inputField = "FSF" + fldCount;
		//alert("inputLabel = '" + inputLabel + "'");
		//alert("inputField = '" + inputField + "'");
		//document.getElementsByName(inputField).setAttribute('type','text');
		var curLabel = document.getElementById(inputLabel);	
		//alert("label = '" + curLabel.innerHTML +"'");
		//curLabel.content
		curField = document.getElementById(inputField);	
		//alert("id  = " + curField.id);
		
		if(curLabel.innerHTML.indexOf("Date") != -1)
		{
			curField.type = "date";
			curField.name = "FSFDate" + fldCount; 
			curField.placeholder = "Enter/Select Date"; 			
			//alert("type = date");
		}
		else if(curLabel.innerHTML.indexOf("DOB") != -1 || curLabel.innerHTML.indexOf("Birth") != -1)
		{
			curField.type = "date";
			curField.name = "FSFDate" + fldCount; 
			curField.placeholder = "Enter/Select DOB"; 			
			//alert("type = date");
		}		
		else if(curLabel.innerHTML.indexOf("Phone") != -1)
		{
			curField.type = "tel";
			curField.name = "FSFPhone" + fldCount; 
			curField.placeholder = "Enter Phone #"; 
			//alert("type = phone");
		}
		else if(curLabel.innerHTML.indexOf("Fax") != -1)
		{
			curField.type = "tel";
			curField.name = "FSFPFax" + fldCount; 
			curField.placeholder = "Enter Fax #"; 
			//alert("type = phone");
		}		
		else if(curLabel.innerHTML.indexOf("Email") != -1 || curLabel.innerHTML.indexOf("email") != -1)
		{
			curField.type = "email";
			curField.name = "FSFEmail" + fldCount;
			curField.placeholder = "Enter Email Address"; 			
			//alert("type = email");
		}
		else if(curLabel.innerHTML.indexOf("Password") != -1)
		{
			curField.type = "password";
			curField.name = "FSFPassword" + fldCount; 
			curField.placeholder = "Enter Password"; 			
			//alert("type = password");
		}
		else if(curLabel.innerHTML.indexOf("SSN") != -1 || curLabel.innerHTML.indexOf("Social Security") != -1)
		{
			curField.type = "text";
			curField.name = "FSFSSN" + fldCount;  
			fldCount; curField.placeholder = "Enter SSN"; 			
			//alert("type = text");
		}
		else if(curLabel.innerHTML.indexOf("Select") != -1)
		{
			curField.type = "text";
			curField.name = "FSFRelationship" + fldCount;  
			fldCount; curField.placeholder = "Enter Relationship"; 	
			//setLabel(curLabel.innerHTML);
			//alert("type = other");
		}
		else 
		{
			curField.type = "text";
			curField.name = "FSFText" + fldCount;			
			curField.placeholder = "Enter " + curLabel.innerHTML; 						
		}
		curLabel.style.background = "white";
		
		/*
		alert(document.getElementById("chkAutoField").checked);
		if(document.getElementById("chkAutoField").checked)
		{
			//fldCount++;
			curLabel.focus();
			setLabel("Enter labels");
			
		}
		*/
			////fldCount++;
			//setLabel("Enter labels");
			//var nextLabel = document.getElementById("LSF" + fldCount);
			//nextLabel.focus();
	}
	
	function submitScratchData()
	{
		//alert("Submit scratch data");
		errorList = "";
		if(errorSSN.length> 0 || errorDOB.length> 0 || errorEmail.length> 0 || errorPhone.length> 0 || errorFax.length> 0)		
		{
			errorList = errorSSN + "\n" + errorEmail + "\n" + errorPhone + "\n" + errorFax;
		}
		
		//errorList =  errorSSN + "\n" + errorDOB + "\n" + errorEmail + "\n" + errorPhone + "\n";
		if(errorList.length == 0)
		{
			//alert("all is good");
		}
		else
		{
			var errorMessage = "The following fields have invalid data:\n\n" + errorList;		
			alert(errorMessage);
		}
	}
		
	function submitData()
	{
		// When the user clicks the button, open the modal		

		alert("submitData");
		/*
		var key = "123456789";
		//json = {"SSN":document.getElementById("SSN").value,"FirstName":document.getElementById("FirstName").value,"Initial":document.getElementById("Initial").value,"LastName":document.getElementById("LastName").value,"EmailAddress":document.getElementById("EmailAddress").value}
		json = {"SSN":123456789,"FirstName":document.getElementsByName("FSFFirst Name: ")[0].value,"Initial":document.getElementsByName("FSFInitial: ")[0].value,"LastName":document.getElementsByName("FSFLast Name: ")[0].value,"EmailAddress":document.getElementsByName("FSFEmail Address: ")[0].value,"Phone":document.getElementsByName("FSFPhone: ")[0].value,"Fax":document.getElementsByName("FSFFax: ")[0].value}
		alert("json = " + json);
		alert("FirstName = " + document.getElementsByName("FSFFirst Name: ")[0].value);
		
		var inputfields = document.getElementsByName("FSFFirst Name: ");
		var ar_inputflds = inputfields.length;
		//alert(inputfields[1].value);
		localStorage.setItem(key, JSON.stringify(json));

		var retrievedObject = localStorage.getItem('123456789');
		data = JSON.parse(retrievedObject);
		
		var today = new Date();
		var dd = today.getDate();
		var mm = today.getMonth()+1; //January is 0!
		var yyyy = today.getFullYear();

		if(dd<10) {
			dd = '0'+dd
		} 

		if(mm<10) {
			mm = '0'+mm
		} 

		today = mm + '/' + dd + '/' + yyyy;
		//document.write(today);
		//alert("First Name = " + document.getElementsByName("FSFFirst Name: ").value);
		var headerResponse = "<div class='w3-center w3-margin'><img id='imgLogo' style='margin:10px;width:200px' src='" + "http://qcddev.com/wb/Images/qcd.jpg" + "' /></div><div class='w3-margin'><b>Date: " + today + "</div></b><table class='w3-table-all' style='width:100%'><tr><td style='text-align:right;width:8%'><b>To:</b></td><td width:25%>" + data.FirstName + " " + data.Initial + " " + data.LastName + "</td><td style='text-align:right'><b>From:</b></td><td>" + "Choice Administrators" + "</td></tr><tr><td style='text-align:right'><b>Fax:</b></td><td>" + data.Fax + "</td><td style='text-align:right'><b>Fax:</b></td><td>" + "714-558-8000" + "</td></tr><tr><td style='text-align:right'><b>Phone:</b></td><td>" + data.Phone + "</td><td style='text-align:right'><b>Phone:</b></td><td>" + "800-869-8969" + "</td></tr><tr><td style='text-align:right'><b>eMail:</b></td><td>" + data.EmailAddress + "</td><td style='text-align:right'><b>eMail:</b></td><td>" + "mvc57@att.net" + "</td></tr><tr><td style='text-align:right'><b>Group:</b></td><td>" + "Group Therapy" + "</td><td style='text-align:right'><b>Group #:</b></td><td>" + "12345" + "</td></tr></table><br><p style='margin-left:20px'>California<em>Choice</em> has received a request for <b>Ivana Tinkle</b>.</p><br><p style='margin-left:20px'>In order to process your request, the following information must be received:</p><br>";
		//document.getElementById("pThankyou").innerHTML = "Dear " + data.FirstName + ",<br><br>";
		document.getElementById("pThankyou").innerHTML = headerResponse;

		//document.getElementById("pThankyou").innerHTML += "The following cofiguration settings have been defined for your QCD Form development environment:<br><br>";
		
		//document.getElementById("pThankyou").innerHTML += "<input type='button' class='' type='button' style='margin-bottom:5px;text-align:" + data.textalign + ";width:" + data.btnwidth + "px;height:" + data.btnheight + "px;color:" + data.btntextcolor + ";background-color:" + data.btncolor + "' value='" + data.industries[0].industry + "'></input><br>";
		//document.getElementById("pThankyou").innerHTML += "<input type='button' class='' type='button' style='margin-bottom:5px;text-align:" + data.textalign + ";width:" + data.btnwidth + "px;height:" + data.btnheight + "px;color:" + data.btntextcolor + ";background-color:" + data.btncolor + "' value='" + data.industries[1].industry + "'></input><br>";
		//document.getElementById("pThankyou").innerHTML += "<input type='button' class='' type='button' style='margin-bottom:5px;text-align:" + data.textalign + ";width:" + data.btnwidth + "px;height:" + data.btnheight + "px;color:" + data.btntextcolor + ";background-color:" + data.btncolor + "' value='" + data.industries[2].industry + "'></input><br>";
		//document.getElementById("pThankyou").innerHTML += "<input type='button' class='' type='button' style='margin-bottom:5px;text-align:" + data.textalign + ";width:" + data.btnwidth + "px;height:" + data.btnheight + "px;color:" + data.btntextcolor + ";background-color:" + data.btncolor + "' value='" + data.industries[3].industry + "'></input><br>";
		//document.getElementById("pThankyou").innerHTML += "<input type='button' class='' type='button' style='margin-bottom:5px;text-align:" + data.textalign + ";width:" + data.btnwidth + "px;height:" + data.btnheight + "px;color:" + data.btntextcolor + ";background-color:" + data.btncolor + "' value='" + data.industries[4].industry + "'></input><br><br><br>";			
		//
		
		//document.getElementById("pThankyou").innerHTML += "We may also contact you at " + document.getElementById("Phone").value + " or at " +  document.getElementById("Cell").value + "." ;
		
		//var elements = document.getElementsByTagName("input")
		//for (var i = 0; i < elements.length; i++) {
				//alert(elements[i].name);
		//}
		*/
		modal.style.display = "block";				
	}
	
	function loadData(local)
	{		
		//alert("local = " + local);
		localData = local;
		//clear divMain
		$("#divMain").empty();
		//set async to false
		jQuery.ajaxSetup({async:false});

		var data = [];

		//set datasource 
		if(localData == 0)
		{
			var radDC = document.getElementById("radDC");
			var radTD = document.getElementById("radTD");
						
			var url = "";
			
			if(radDC.checked == true)
			{				
				url = "ajax/dc.json";
			}
			else if(radTD.checked == true)
			{
				url = "ajax/td.json";
			}
			
			$.ajax(
			{				
			  url: url,				
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else if(localData == 1)
		{
			var radDC = document.getElementById("radDC");
			var radTD = document.getElementById("radTD");
						
			if(radDC.checked == true)
			{				
				var retrievedObject = localStorage.getItem('dc');
								
			}
			else if(radTD.checked == true)
			{
				var retrievedObject = localStorage.getItem('td');
			}
						
			data = JSON.parse(retrievedObject);					
			//alert(data.button[0].text[0].color);
		}
		else if(localData == 2)
		{
			//var radDC = document.getElementById("radDC");
			//var radTD = document.getElementById("radTD");
						
			var retrievedObject = localStorage.getItem('templates');
														
			data = JSON.parse(retrievedObject);					
			//alert(data.button[0].text[0].color);
		}		
		
		//alert(data.button[0].text[0].font[0].family);
		
		var color = document.getElementById("clrBtnColor");
		var bgcolor = document.getElementById("clrBtnBGColor");			
		color.value = data.button[0].text[0].color;			
		bgcolor.value = data.button[0].backgroundcolor;				

		//set variables from data
		var btnColor = color.value; //text Color		
		var btnBGColor = bgcolor.value;	//bg Color	
		
		var btnheight = data.button[0].height;		
		
		var redW;
		var indML = 0;
		var indW = data.button[0].width;
		var indBGC = btnColor;

		var depML = 15;
		var depW = indW-15;
		var depBGC = btnColor;

		var frmML = 30;
		var frmW = depW-15;
		var frmBGC = btnColor;

		var secML = 5;
		var secW = frmW-15;
		var secBGC = "white";

		var fldML = 5;
		var fldW = secW-15;
		var fldBGC = "white";

		var subfldML = -8;
		var subfldW = fldW-15;
		var subfldBGC = "white";

		var fieldStr = "";
		var subfieldStr = "";
				
		//add a button to scroll to form
		$("#divMain").append('<input id="ShowForm" type="button" style="margin-top:0px" onclick="back()" class="w3-margin w3-white" value="Show Form" hidden></input><br>');			                      
		
		//loop through industries
		for(var i=0;i<data.industries.length;i++)
		{
			//get industry id and name value 
			var indId = data.industries[i].id;
			var ind = data.industries[i].industry;
						
			//add an accordian button for each of the industries
			
			//if(indId.indexOf("indF") == 0)
			//{
			//	$("#divMain").append("<input id='btn" + indId + "' type='button' onclick='accordian(\"" + indId + "\")' class='ind w3-btn' style='color:" + btnColor + ";background-color:" + "#666666" + ";height:" + btnheight + "px;text-align:left;width:" + indW + "px;margin-left:" + indML + "px;margin-bottom:5px' value='" + data.industries[i].industry + "'</input><br>");
			//	//$("#divMain").append("<input id='txtMSF" + indId + "' name='MI" + ind + "' type='text' class='sub w3-btn w3-" + indBGC + "' onclick='newForm()' style='border:0;text-align:left;width:" + indW + "px;margin-left:" + indML + "px;margin-bottom:2px' value='" + ind + "' ></input><br>");
			//}
			//else
			//{
				$("#divMain").append("<input id='btn" + indId + "' type='button' onclick='accordian(\"" + indId + "\")' class='ind w3-btn' style='color:" + btnColor + ";background-color:" + btnBGColor + ";height:" + btnheight + "px;text-align:left;width:" + indW + "px;margin-left:" + indML + "px;margin-bottom:5px' value='" + data.industries[i].industry + "'</input><br>");				
			//}
			
			$("#divMain").append("<div id='div" + indId + "' class='w3-accordion-content '></div>");			
			
			//loop through departments
			for(var j=0;j<data.industries[i].departments.length;j++)
			{
				//get department id and name value 
				var depId = data.industries[i].departments[j].id;
				var dep = data.industries[i].departments[j].department;
				
				//add a department button for each of the departments
				//if(indId.indexOf("indF") == 0)
				//{
				//	$("#div" + indId).append("<input id='btn" + depId + "' type='button' onclick='accordian(\"" + depId + "\")' class='dep w3-btn' style='color:" + btnColor + ";background-color:" + "#666666" + ";height:" + btnheight + "px;text-align:left;width:" + depW + "px;margin-left:" + depML + "px;margin-bottom:5px' value='" + dep + "'></input><br>");					
				//}
				//else
				//{
					$("#div" + indId).append("<input id='btn" + depId + "' type='button' onclick='accordian(\"" + depId + "\")' class='dep w3-btn' style='color:" + btnColor + ";background-color:" + btnBGColor + ";height:" + btnheight + "px;text-align:left;width:" + depW + "px;margin-left:" + depML + "px;margin-bottom:5px' value='" + dep + "'></input><br>");
				//}
				
				$("#div" + indId).append("<div id='div" + depId + "' class='w3-accordion-content '></div>");
				
				//loop through forms
				for(var k=0;k<data.industries[i].departments[j].forms.length;k++)
				{
					//get form id and name value
					var frmId = data.industries[i].departments[j].forms[k].id;
					var frm = data.industries[i].departments[j].forms[k].form;
					
					//add a form button for each of the forms
					//if(indId.indexOf("indF") == 0)
					//{
					//	$("#div" + depId).append("<input id='btn" + frmId + "' type='button' onclick='clickForm(\"" + frmId + "\",\"" + frm + "\")' class='frm w3-btn' style='color:" + btnColor + ";background-color:" + "#666666" + ";height:" + btnheight + "px;text-align:left;width:" + frmW + "px;margin-left:" + frmML + "px;margin-bottom:5px' value='" + frm + "'></input><br>");
					//}
					//else
					//{
						$("#div" + depId).append("<input id='btn" + frmId + "' type='button' onclick='clickForm(\"" + frmId + "\",\"" + frm + "\")' class='frm w3-btn' style='color:" + btnColor + ";background-color:" + btnBGColor + ";height:" + btnheight + "px;text-align:left;width:" + frmW + "px;margin-left:" + frmML + "px;margin-bottom:5px' value='" + frm + "'></input><br>");
					//}
					
					$("#div" + depId).append("<div id='div" + frmId + "' class='w3-accordion-content '></div>");
					
					//add a "Check all Sections" checkbox

					//if(frmId.indexOf("indF") == -1)
					//{
						$("#div" + frmId).append("<input id='chkAllSections' type='checkbox' onclick='checkAllSections(this)' class='sec w3-check' style='margin-left:35px;margin-right:5px'/><b><input class='w3-text-red' id='btnAll" + secId + "' type='text' readonly style='border:0;text-align:left;width:" + secW + "px;margin-left:" + secML + "px;margin-bottom:2px' value='All Sections'></input></b><br>");
					//}

					//loop through sections
					for(var l=0;l<data.industries[i].departments[j].forms[k].sections.length;l++)
					{
						//get section id, name and checked value
						var secId = data.industries[i].departments[j].forms[k].sections[l].id;
						var sec = data.industries[i].departments[j].forms[k].sections[l].section;
						var secchecked = data.industries[i].departments[j].forms[k].sections[l].checked;																														
						
						//add a form button for each of the forms
						if(secId.indexOf("indF") == -1)
						{
							$("#div" + frmId).append("<input id='chkMS" + secId + "' type='checkbox' " + secchecked + " class='sec w3-check' style='margin-left:35px;margin-right:5px' onclick='checkAllSections(this)'/><input id='btn" + secId + "' type='text' readonly onclick='showFormSection(\"" + secId + "\",\"" + sec + "\")' class='dep w3-text w3-" + secBGC + "' style='border:0;text-align:left;width:" + secW + "px;margin-left:" + secML + "px;margin-bottom:2px' value='" + sec + "'></input><br>");
						}
						else
						{
							//$("#div" + frmId).append("<input id='btn" + secId + "' type='text' readonly  onclick='checkAllSections(this) onclick='showFormSection(\"" + secId + "\",\"" + sec + "\")' class='dep w3-button' style='color:white;background-color:#666666;border:0;text-align:left;width:" + secW + "px;margin-left:" + secML + "px;margin-bottom:2px' value='" + sec + "'></input><br>");
							$("#div" + frmId).append("<input id='chkMS" + secId + "' type='checkbox' " + secchecked + " class='sec w3-check' style='margin-left:35px;margin-right:5px' onclick='checkAllSections(this)'/><input id='btn" + secId + "' type='text' readonly onclick='showFormSection(\"" + secId + "\",\"" + sec + "\")' class='dep w3-text w3-" + secBGC + "' style='border:0;text-align:left;width:" + secW + "px;margin-left:" + secML + "px;margin-bottom:2px' value='" + sec + "'></input><br>");
						}
						
						$("#div" + frmId).append("<div id='div" + secId + "' class='w3-accordion-content '></div>");
						
						//add a "Check all Fields" checkbox
						//if(secId.indexOf("indF") == -1)
						//{
							$("#div" + secId).append("<input id='chkAllFields' type='checkbox' onclick='checkAllFields(\"" + secId + "\")' class='sec w3-check' class='w3-check' style='margin-left:60px;margin-right:5px'/><b><input class='w3-white w3-text-red' id='btnAll' type='text' readonly style='width:" + fldW + "px;border:0;text-align:left;margin-left:0px;margin-bottom:2px' value='All Fields'></input></b><br>");
						//}
						
						//loop through fields
						for(var m=0;m<data.industries[i].departments[j].forms[k].sections[l].fields.length;m++)
						{
							//get field id, name and checked value
							var fldId = data.industries[i].departments[j].forms[k].sections[l].fields[m].id;
							var fldchecked = data.industries[i].departments[j].forms[k].sections[l].fields[m].checked;
							//alert("fldchecked = " + fldchecked);
							var fld = data.industries[i].departments[j].forms[k].sections[l].fields[m].field;							
							
							//if(secId.indexOf("indF") == -1)
							//{
							//	$("#div" + secId).append("<input id='chkMF" + fldId + "' type='checkbox' " + fldchecked + " class='w3-check' style='margin-left:60px;margin-right:5px' onclick='addremoveField(\"" + fldId + "," + fld  + "\")'/><input id='btn" + fldId + "' type='text' readonly onclick='accordian(\"" + fldId + "\")' class='fld w3-text w3-" + fldBGC + "' style='border:0;text-align:left;width:" + fldW + "px;margin-left:" + fldML + "px;margin-bottom:2px' value='" + fld + "' ></input><br>");
							//}
							//else
							//{
								$("#div" + secId).append("<input id='chkMF" + fldId + "' type='checkbox' " + fldchecked + " class='w3-check' style='margin-left:60px;margin-right:5px' onclick='addremoveField(\"" + fldId + "," + fld  + "\")'/><input id='btn" + fldId + "' type='text' readonly onclick='accordian(\"" + fldId + "\")' class='fld w3-text w3-" + fldBGC + "' style='border:0;text-align:left;width:" + fldW + "px;margin-left:" + fldML + "px;margin-bottom:2px' value='" + fld + "' ></input><br>");
								//$("#div" + secId).append("<input id='btn" + fldId + "' type='button' readonly onclick='accordian(\"" + fldId + "\")' class='w3-button' style='color:white;background-color:#666666;border:0;text-align:left;width:" + fldW + "px;margin-left:" + fldML + "px;margin-bottom:2px' value='" + fld + "' ></input><br>");
							//}
						
							$("#div" + secId).append("<div id='div" + fldId + "' class='w3-accordion-content '></div>");
							
							var subfld = "";
							var subfldId = "";
							var subfldChecked = "checked";
							var subfldReadOnly = "";
							var subfldRequired = "";
							
							//loop through subfields
							var thisID = "chkAllSubFields";
							//if(fldId.indexOf("indF") == -1)
							//{
								//$("#div" + fldId).append("<input id='chkAllSubFields' type='checkbox' onclick='selectAllSubFields()' class='w3-check' style='margin-left:85px;margin-right:5px' onclick='addremoveSubField(\"" + subfldId + "\",\"" + thisID + "\",\"" + subfld + "\",\"" + secId + "\")' /><b><input id='txt" + subfldId + "' type='text' onclick='accordian(\"" + subfldId + "\")' class='sub w3-text-blue w3-" + subfldBGC + "' style='border:0;text-align:left;width:" + subfldW + "px;margin-left:" + subfldML + "px;margin-bottom:2px' value='All SubFields' ></input></b><br>");
							//}
							
							for(var n=0;n<data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields.length;n++)
							{
								subfld = data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields[n].subfield;
								subfldId = data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields[n].id;
								subfldChecked = data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields[n].checked;
								subfldReadOnly = data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields[n].readonly;
								subfldRequired = data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields[n].required;
								subfldTextColor = data.industries[i].departments[j].forms[k].sections[l].fields[m].subfields[n].textcolor;

								var thisID = "chkMSF" + subfldId;								
								/*									
								$("#div" + fldId).append("<input id='chkMSF" + subfldId + "' type='checkbox' " + subfldChecked + " class='w3-check' style='margin-left:85px;margin-right:5px' onclick='addremoveSubField(\"" + subfldId + "\",\"" + thisID + "\",\"" + subfld + "\",\"" + secId + "\")' /><input id='txtMSF" + subfldId + "' name='MSF" + subfld + "' type='text' class='sub w3-btn w3-" + textColor + " w3-" + subfldBGC + "' onblur='onBlur()' onmousedown='onFocus()' onclick='getProperties(\"" + subfldId + "\",\"" + this.id + "\",\"" + subfld + "\")' style='border:0;text-align:left;width:" + subfldW + "px;margin-left:" + subfldML + "px;margin-bottom:2px' value='" + subfld + "' ></input><br>");
								*/
								//if(fldId.indexOf("indF") == -1)
								//{
								//	$("#div" + fldId).append("<input id='chkMSF" + subfldId + "' type='checkbox' " + subfldChecked + " class='w3-check' style='margin-left:85px;margin-right:5px' onclick='addremoveSubField(\"" + subfldId + "\",\"" + thisID + "\",\"" + subfld + "\",\"" + secId + "\")' /><input id='txtMSF" + subfldId + "' name='MSF" + subfld + "' type='text' class='sub w3-btn w3-" + subfldBGC + "' onblur='onBlur()' onmousedown='onFocus()' onclick='getProperties(\"" + subfldId + "\",\"" + this.id + "\",\"" + subfld + "\")' style='border:0;text-align:left;width:" + subfldW + "px;margin-left:" + subfldML + "px;margin-bottom:2px' value='" + subfld + "' ></input><br>");
								//}
								//else
								//{
									//$("#div" + fldId).append("<input id='txtMSF" + subfldId + "' name='MSF" + subfld + "' type='text' class='sub w3-btn' onblur='onBlur()' onmousedown='onFocus()' onclick='getProperties(\"" + subfldId + "\",\"" + this.id + "\",\"" + subfld + "\")' style='color:white;background-color:#666666;border:0;text-align:left;width:" + subfldW + "px;margin-left:" + subfldML + "px;margin-bottom:2px' value='" + subfld + "' ></input><br>");									
									$("#div" + fldId).append("<input id='chkMSF" + subfldId + "' type='checkbox' " + subfldChecked + " class='w3-check' style='margin-left:85px;margin-right:5px' onclick='addremoveSubField(\"" + subfldId + "\",\"" + thisID + "\",\"" + subfld + "\",\"" + secId + "\")' /><input id='txtMSF" + subfldId + "' name='MSF" + subfld + "' type='text' class='sub w3-btn w3-" + subfldBGC + "' onblur='onBlur()' onmousedown='onFocus()' onclick='getProperties(\"" + subfldId + "\",\"" + this.id + "\",\"" + subfld + "\")' style='border:0;text-align:left;width:" + subfldW + "px;margin-left:" + subfldML + "px;margin-bottom:2px' value='" + subfld + "' ></input><br>");
								//}
							}
						}
					}
				}
			}
		}
		//alert("Done");
	}
	
	function accordian(id)
	{
		//alert(id);
		var curDiv = "div" + id;
		//alert(curDiv);
		var x = document.getElementById(curDiv);

		if (x.className.indexOf("w3-show") == -1) {
			/*
			for(var i=0;i<transData.Sections.length;i++)
			{
				for(var j=0;j<transData.Sections[i].Fields.length;j++)
				{
					var curId = "div" + i + transData.Sections[i].Fields[j].Id;
					var w =  document.getElementById(curId);
					w.className = w.className.replace(" w3-show", "");
				}
			}
			*/
			alert("Show");
			x.className += " w3-show";
		} else {
			alert("Hide");
			x.className = x.className.replace(" w3-show", "");
		}		
	}
	
	function hexToRgbA(hex){
		var c;
		if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
				c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+',1)';
		}
		throw new Error('Bad Hex');
	}
		
	function checkAllSections(cb)
	{
		//alert("checkAllSections cb id = " + cb.id);
		
		//$("#divSections").empty();
				
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}
			
		x = document.getElementById(cb.id);
		
		if(x.checked)
		{
			//alert("Add all Sections");

			var indLength = data.industries.length;
			//alert("ind length =" + indLength);

			var aFlag = 0;
			var bFlag = 0;
			var cFlag = 0;
			var dFlag = 0;
			var eFlag = 0;
			var fFlag = 0;
			
			for(var i=0;i<data.industries.length;i++)
			{
				var indId = data.industries[i].id;
				var ind = data.industries[i].industry;

				//Departments

				var depLength = data.industries[i].departments.length;
				//alert("Industry " + i + " dep length =" + depLength);
				for(var j=0;j<data.industries[i].departments.length;j++)
				{
					var depId = data.industries[i].departments[j].id;
					var dep = data.industries[i].departments[j].department;

					//Forms

					var frmLength = data.industries[i].departments[0].forms.length;
					//alert("ind " + i + " dep " + j + " frm length =" + frmLength);
					var curLet = "";
					for(var k=0;k<data.industries[i].departments[j].forms.length;k++)
					{
						var frmId = data.industries[i].departments[j].forms[k].id;
						var frm = data.industries[i].departments[j].forms[k].form;

						//Sections

						var secLength = data.industries[i].departments[j].forms[k].sections.length;

						if(i==0 && j==0 && k==0)
						{
							//alert("ind " + i + " dep " + j + " frm " + k + " sec length = " + secLength);
							var lum = 105;
							for(var l=0;l<secLength;l++)
							{
								var secId = data.industries[i].departments[j].forms[k].sections[l].id;
								var sec = data.industries[i].departments[j].forms[k].sections[l].section;
								
								if(cb.id.indexOf("chkAllSections") == 0)
								{
									//alert("chkAllSections is checked");
									switch(l)
									{
										case 0:
											curLet = "A";
											break;
										case 1:
											curLet = "B";
											break;
										case 2:
											curLet = "C";
											break;
										case 3:
											curLet = "D";
											break;
										case 4:
											curLet = "E";
											break;
										case 5:
											curLet = "F";
											break;
									}
									
									//alert("secId = " + secId);
									//alert("sec = " + sec);
									//alert("curLet = " + curLet);									
									
									//var secColor = document.getElementById("clrSecColor");
									//var secBGColor = document.getElementById("clrSecBGColor");									
									
									//secColor.value = data.sectextcolor;									
									//secBGColor.value = data.seccolor;
																		
									var secColor = data.section[0].text[0].color;		
									var secBGColor = data.section[0].backgroundcolor;		
									
									document.getElementById("clrSecColor").value = secColor;
									document.getElementById("clrSecBGColor").value = secBGColor;		
									
									//alert("curColor = " + curColor);
									
									var rgbaColor = hexToRgbA(secBGColor).toString();
									var rgbaColorArray = rgbaColor.split(',');
									
									//var rgbaColorArr = rgbaColor.split(',');
									
									//alert("rgbaColorArray[0] = " + rgbaColorArray[0]);
									//alert("rgbaColorArray[1] = " + rgbaColorArray[1]);
									//alert("rgbaColorArray[2] = " + rgbaColorArray[2]);
									//alert("rgbaColorArray[3] = " + rgbaColorArray[3]);									
									
									$("#chkMS" + secId).prop( "checked", true );
									lum = lum-15;									
									
									var rgbaCol = rgbaColorArray[0] + "," + rgbaColorArray[1] + "," + rgbaColorArray[2] + ",0." + lum + ")";
									//alert("rgbaCol = " + rgbaCol);									
									
									$("#divSections").append("<div id='divSection" + curLet + "' class='w3-margin' onclick='showFormSection(\"" + secId + "\",\"" + sec + "\")' style='color:" + secColor + ";background-color:" + rgbaCol + ";text-align:left;margin-left:0px;padding:5px;visibility:visibility'></div>");
									$("#divSections").append("<div id='divSection" + curLet + "Body' style='text-align:left;margin-left:10px' class='w3-accordion-content'></div>");									
									showAllSections(secId,sec);								
									addFields(secId);
								}
								else
								{
									//alert("chkAllSections is NOT checked");
									curLet = secId.substr(secId.length-1,1);
									curCBLet = cb.id.substr(cb.id.length-1,1);
									//alert("curLet = " + curLet);
									//alert("curCBLet cb = " + curCBLet);	

									var clrSection = document.getElementById("clrSecBGColor");
									var clrSectionText = document.getElementById("clrSecColor");
									clrSection.value = data.section[0].backgroundcolor;									
									//alert(data.section[0].text[0].color);
									clrSectionText.value = data.section[0].text[0].color;
									
									var secColor = data.section[0].backgroundcolor;
									//alert(secColor);									
									var secTxtColor = data.section[0].text[0].color;
									
									//alert("curColor = " + curColor);
									//alert("sec = " + sec);
									
									var rgbaColor = hexToRgbA(secColor).toString();
									var rgbaColorArray = rgbaColor.split(',');
									
									//var rgbaColorArr = rgbaColor.split(',');
									
									//alert("rgbaColorArray[0] = " + rgbaColorArray[0]);
									//alert("rgbaColorArray[1] = " + rgbaColorArray[1]);
									//alert("rgbaColorArray[2] = " + rgbaColorArray[2]);
									//alert("rgbaColorArray[3] = " + rgbaColorArray[3]);									
																		
									lum = lum-15;									
									
									var rgbaCol = rgbaColorArray[0] + "," + rgbaColorArray[1] + "," + rgbaColorArray[2] + ",0." + lum + ")";
									//alert("rgbaCol = " + rgbaCol);																																			
																		
									if(((curLet == "A" && (curLet == curCBLet)) && aFlag == 0) || ((curLet == "B" && (curLet == curCBLet)) && bFlag == 0) || ((curLet == "C" && (curLet == curCBLet)) && cFlag == 0) || ((curLet == "D" && (curLet == curCBLet)) && dFlag == 0) || ((curLet == "E" && (curLet == curCBLet)) && eFlag == 0) || ((curLet == "F" && (curLet == curCBLet)) && fFlag == 0))
									{
										$("#divSections").append("<div id='divSection" + curLet + "' class='w3-margin' onclick='showFormSection(\"" + secId + "\",\"" + sec + "\")' style='color:" + secTxtColor + ";background-color:" + rgbaCol + ";text-align:left;margin-left:0px;padding:5px;visibility:visibility'></div>");
										$("#divSections").append("<div id='divSection" + curLet + "Body' style='text-align:left;margin-left:10px' class='w3-accordion-content'></div>");									
										
										if(curLet != "F")
										{
											showAllSections(secId,sec);
										}
										addFields(secId);										
									}	

									switch(l)
									{
										case 0:
											curLet = "A";
											aFlag = 1;
											break;
										case 1:
											curLet = "B";
											bFlag = 1;
											break;
										case 2:
											curLet = "C";
											cFlag = 1;
											break;
										case 3:
											curLet = "D";
											dFlag = 1;
											break;
										case 4:
											curLet = "E";
											eFlag = 1;
											break;
										case 5:
											curLet = "F";
											fFlag = 1;
											break;
									}									
								}
							}
						}
					}
				}
			}						
			//showForm();
			var tblSections = document.getElementById("tblSections");
			tblSections.style.display = "block";
		}
		else
		{
			//alert("Remove all Sections");
			var indLength = data.industries.length;
			//alert("ind length =" + indLength);

			for(var i=0;i<data.industries.length;i++)
			{
				var indId = data.industries[i].id;
				var ind = data.industries[i].industry;

				//Departments

				var depLength = data.industries[0].departments.length;
				//alert("Industry " + i + " dep length =" + depLength);
				for(var j=0;j<data.industries[i].departments.length;j++)
				{
					var depId = data.industries[i].departments[j].id;
					var dep = data.industries[i].departments[j].department;

					//Forms

					var frmLength = data.industries[0].departments[0].forms.length;
					//alert("ind " + i + " dep " + j + " frm length =" + frmLength);
					var curLet = "";
					for(var k=0;k<data.industries[i].departments[j].forms.length;k++)
					{
						var frmId = data.industries[i].departments[j].forms[k].id;
						var frm = data.industries[i].departments[j].forms[k].form;

						//Sections

						var secLength = data.industries[i].departments[j].forms[k].sections.length;

						//if(i==0 && j==0 && k==0) //this conditional statement can be removed once the data has more industries, departments, and forms
						//{
							//alert("ind " + i + " dep " + j + " frm " + k + " sec length = " + secLength);

							for(var l=0;l<secLength;l++)
							{
								var secId = data.industries[i].departments[j].forms[k].sections[l].id;
								var sec = data.industries[i].departments[j].forms[k].sections[l].section;

								if(cb.id.indexOf("chkAllSections") == 0)
								{
									switch(l)
									{
										case 0:
											$("#divSections").empty();
											curLet = "A";
											break;
										case 1:
											curLet = "B";
											break;
										case 2:
											curLet = "C";
											break;
										case 3:
											curLet = "D";
											break;
										case 4:
											curLet = "E";
											break;
										case 5:
											curLet = "F";
											break;
									}																
									$("#chkMS" + secId).prop( "checked", false );								
									divMenuSec(secId,sec);
								}								
								else
								{	
									curLet = secId.substr(secId.length-1,1);
									curCBLet = cb.id.substr(cb.id.length-1,1)					;
									
									//alert("curLet = " + curLet);
									//alert("curCBLet cb = " + curCBLet);
									
									if(curLet == curCBLet)									
									{
										//alert("Match on " + curCBLet);
										$("#chkMS" + secId).prop( "checked", false );								

										divMenuSec(secId,sec);
										
										//divSections.Children.RemoveAt(1);
										
										document.getElementById("divSection" + curCBLet).remove();
										document.getElementById("divSection" + curCBLet + "Body").remove();
																				
										//$("#divSections").Remove("divSection" + curCBLet + "Body");
									}
								}
							}
						//}						
					}
				}
			}				
		}				 		
		//SectionMenu(secId);			
	}
	
	function checkSection(secId,sec)
	{
		//alert("checkSection secId = " + secId + ", and sec = " + sec);
	}
	
	function clickForm(frmId,frm)
	{
		//alert("clickForm frmId = " + frmId + ", and frm = " + frm);	
		
		getHeaderProperties(frmId,frm);
		getTitleProperties(frmId,frm);		
		accordian(frmId); // this opens the correct menu item on the left		
	}	
	
	function getTitleProperties(frmId,frm)
	{
		var id = frmId;
		var title = frm;
		$("#dcForm").css('display', 'block');
		//$("#divTitle").empty();
		$("#divForm").append("<input type='text' class='w3-margin' style='border:0px;text-align:center;center;font-size:20px' value='" + title + "'></input>");
	}
	
	function removeField(j)
	{
		//alert("j = " + j);
		transData.Sections[0].Fields.splice(j,1);
		localStorage.setItem("transportation", JSON.stringify(transData));
		
		for(var i=0;i<transData.Sections.length;i++)
		{
			
			$("#divTools").append("<div id='divDDFields" + i + "' class='w3-red' style='display:block'></div>");	
			//$("#divDDSections").append("<div id='divSectionDD' class='w3-bar w3-white' style'display:none'></div>");
			$("#divDDFields" + i).append("<div id='fldBarDD" + i + "' class='w3-white' style'display:none'></div>");
			
			//var curSection = transData.Sections[i].Section;
			//$("#divSectionDD").append("<button onmouseover='previewDD(\"" + curSection + "\"," + i + ")' onmouseout='removeDD()' onclick='addDD(\"" + curSection + "\"," + i + ")' class='w3-border w3-button' style='width:190px;margin:2px'>" + curSection + "</button>");		
			$("#fldBarDD" + i).empty();	
			for(var j=0;j<transData.Sections[i].Fields.length;j++)
			{					
				curField = transData.Sections[i].Fields[j].Field;
				//$("#fldBarDD" + i).append("<button onclick='addDD(\"" + curField + "\"," + i + "," + j + ")' class='w3-border w3-button' style='width:190px;margin:2px'>" + curField + "</button>");		
				
				if(j<transData.Sections[0].Fields.length-1)
				{
					$("#fldBarDD" + i).append("<button onclick='addDD(\"" + curField + "\"," + i + "," + j + ")' class='w3-border w3-button' style='width:300px;margin-left:5px;margin-bottom:5px' contenteditable>" + curField + "</button><br>");
				}
				else
				{
					$("#fldBarDD" + i).append("<button onclick='addDD(\"" + curField + "\"," + i + "," + j + ")' class='w3-border w3-button' style='width:300px;margin-left:5px;margin-bottom:5px' contenteditable>" + curField + "</button>");
				}
				
				/*
				if(j<transData.Sections[0].Fields.length-1)
				{
					$("#fldBarDD" + i).append("<img src='Images/remove.jpg' onclick='removeField(" + j + ")' style='width:20px' /><button onclick='addDD(\"" + curField + "\"," + i + "," + j + ")' class='w3-border w3-button' style='width:300px;margin-left:5px;margin-bottom:5px' contenteditable>" + curField + "</button><br>");
				}
				else
				{
					$("#fldBarDD" + i).append("<img src='Images/remove.jpg' onclick='removeField(" + j + ")' style='width:20px' /><button onclick='addDD(\"" + curField + "\"," + i + "," + j + ")' class='w3-border w3-button' style='width:300px;margin-left:5px;margin-bottom:5px' contenteditable>" + curField + "</button><img src='Images/add.jpg' onclick='addField(" + (j+1) + ")' style='width:20px' />");
				}
				*/
			}	
		}
	}
	
	function addFields(id)
	{
		alert("addFields id " + id);			
		
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}

		for(var i=0;i<data.industries.length;i++)
		{
			var frmId = data.industries[i].id;
			var frm = data.industries[i].industry;

			for(var d=0;d<data.industries[i].departments.length;d++)
			{
				var frmId = data.industries[i].departments[d].id;
				var frm = data.industries[i].departments[d].department;
				
				for(var f=0;f<data.industries[i].departments[d].forms.length;f++)
				{
					var frmId = data.industries[i].departments[d].forms[f].id;
					var frm = data.industries[i].departments[d].forms[f].form;

					for(var s=0;s<data.industries[i].departments[d].forms[f].sections.length;s++)
					{
						var secId = data.industries[i].departments[d].forms[f].sections[s].id;
						var sec = data.industries[i].departments[d].forms[f].sections[s].section;
						
						if(secId == id)
						{
							//alert("Match on " + secId);
							for(var t=0;t<data.industries[i].departments[d].forms[f].sections[s].fields.length;t++)
							{
								var fldId = data.industries[i].departments[d].forms[f].sections[s].fields[t].id;
								var fld = data.industries[i].departments[d].forms[f].sections[s].fields[t].field;

								//alert("Field = " + fld)
								//$("#div" + secId).append("<input type='checkbox' class='w3-check' checked style='margin:5px'/><input id='btn" + fldId + "' type='button' onclick='accordian(\"" + fldId + "\")' class='w3-text w3-" + fldBGC + "' style='text-align:left;width:" + fldW + "px;margin-left:" + fldML + "px;margin-bottom:2px' value='" + fld + "'</input><br>");
								//$("#div" + secId).append("<div id='div" + fldId + "' class='w3-accordion-content '></div>");

								var mFldCB = document.getElementById("chkMF" + fldId);
								//alert(fldCB.checked);

								//Subfields
								
								//if(secId.indexOf("indZ") == -1 && mFldCB.checked == true)
								//{					
									for(var u=0;u<data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields.length;u++)
									{
										var subfldId = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].id;
										var subfld = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].subfield;
										//alert("SubField = " + subfld)
										//$("#div" + fldId).append("<input type='checkbox' class='w3-check' checked style='margin:5px'/><input id='btn" + subfldId + "' type='text' onclick='accordian(\"" + subfldId + "\")' class='w3-text w3-" + subfldBGC + "' style='text-align:left;width:" + subfldW + "px;margin-left:" + subfldML + "px;margin-bottom:2px' value='" + subfld + "'</input><br>");
										//$("#div" + fldId).append("<div class='row' id='div" + subfldId + "' class='w3-accordion-content '></div>");

										label = subfld;
										//alert(label);

										var type = "";
										var size = "100";
										var maxlength = "50";
										var width = "";
										var lblWidth = "100px";

										//alert("secCB = '" + "chkS" + secId + "'");
										var mSecCB = document.getElementById("chkMS" + secId);

										//alert("mSecCB id = " + mSecCB.id);
										//alert(mSecCB.checked);									

										var lbl = label.replace(" ", "").replace("-","").replace("#","").replace("+","").replace(":","").replace(" ","").replace(" ","");
										//alert("'" + lbl + "'");
										if(mSecCB.checked == true)
										{
											checked = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].checked;
											required = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].required;

											key = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].key;
											type = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].type;
											readonly = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].readonly;
											maxlength = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].maxlength;
											size = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].size;
											textcolor = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].textcolor;
											backgroundcolor = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].backgroundcolor;
											fieldlength = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].fieldlength;
											datetype = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].datetype;

											function1 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].function1;
											function2 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].function2;
											function3 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].function3;

											logic1 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].logic1;
											logic2 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].logic2;
											logic3 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].logic3;

											value1 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].value1;
											value2 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].value2;
											value3 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].value3;

											group1 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].group1;
											group2 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].group2;
											group3 = data.industries[i].departments[d].forms[f].sections[s].fields[t].subfields[u].group3;
											
											if(subfld == "Initial:")
											{
												//alert("subfldId = " + subfldId);
												//alert("subfld = " + subfld);							
												//alert("checked = " + checked);
												//alert("required = " + required);
												//alert("textcolor = " + textcolor);
											}
																																				
											var thisID = "chkFSF" + subfldId;
											
											switch(s)
											{
												case 0:
													curLet = "A";
													break;
												case 1:
													curLet = "B";
													break;
												case 2:
													curLet = "C";
													break;
												case 3:
													curLet = "D";
													break;
												case 4:
													curLet = "E";
													break;
												case 5:
													curLet = "F";
													break;
											}
									
											var mSFCB = document.getElementById("chkMSF" + subfldId);
											
											if(mSFCB.checked == true)
											{
												//alert("Adding subfield " + subfld);
												//$("#divSection" + curLet + "Body").append("Test");
												$("#divSection" + curLet + "Body").append("<div class='form-group' style='margin-left:10px;padding:5px'><input id='chkFSF" + subfldId + "' type='checkbox' class='w3-check' checked='checked' onclick='removeSubField(\"" + subfldId + "\",\"" + thisID + "\",\"" + subfld + "\",\"" + secId + "\")' /><label id='lblFSF" + subfldId + "' name='LSF" + subfld + "' class='w3-text-" + textcolor + "' contenteditable style='width:" + lblWidth + "px;text-align:right;margin:5px' for='" + label + "' onblur='onBlur()' onfocus='onFocus()' onmousedown='onFocus()' onclick='getProperties(\"" + subfldId + "\",\"" + this.id + "\",\"" + subfld + "\")'>" + label + "</label><input onblur='onBlur()' onfocus='onFocus()' onmousedown='onFocus()' onclick='getProperties(\"" + subfldId + "\",\"" + this.id + "\",\"" + subfld + "\")' class='w3-input w3-border' placeholder='" + label + "' pattern='\d{1,5}' maxlength='" + maxlength + "' size='" + size + "' type='" + type + "' name='FSF" + subfld + "' id='txtFSF" + subfldId + "'/></div>");												
												//alert("Adding subfield 'FSF" + subfld + "'");
											}
										}
									}
								//}
							}
						}
					}
				}
			}
		};
		//accordian(id);
		//setFields();
	}	
	
	function divMenuSec(secId,sec) //from form
	{
		//alert("divMenuSec secId = " + secId + ", and sec = " + sec);	
		
		//alert(sec);

		var id = secId;
		var curLet = id.substr(15,1);
		var curSection = "divindAdepAfrmAsec" + curLet; //THIS WILL NEED TO BE MODIFIED TO BECOME DYNAMIC FOR ANY INDUSTRY, DEPARTMENT, FORM OR SECTION
		var curSec = sec;		
		
		var y = document.getElementById(curSection);
		if (y.className.indexOf("w3-show") == -1) {
			//alert("Show y");
			//y.className += " w3-show";
		} else {
			//alert("Hide y");
			y.className = y.className.replace(" w3-show", "");
		}		
	}

	function addSectionx(curLet,secId,sec)
	{
		$("#formMain").append("<div id='divSection" + curLet + "' class='w3-margin' onclick='showFormSection(\"" + secId + "\",\"" + sec + "\")' style='color:" + "black" + ";background-color:" + "green" + ";text-align:left;margin-left:0px;padding:5px'></div>");
		$("#formMain").append("<div id='divSection" + curLet + "Body' style='border:1px;text-align:left;margin-left:10px' ondrop='drop(event)' ondragover='allowDrop(event)' class='w3-accordion-content'></div>");									
		//showAllSections(secId,sec);
		
		$("#divSection" + curLet).append(sec); 
	}
	
	function showAllSections(secId, sec)
	{		
		//alert("showAllSections secId = " + secId + ", and sec = " + sec);
		//window.scrollTo(0, document.body.scrollHeight || document.documentElement.scrollHeight);	
		var id = secId;
		//alert("showAllSections id = " + id);
		var curDiv = "div" + id;
		var curLet = id.substr(15,1);
		//alert("curDiv = " + curDiv);
		//alert("curLet = " + curLet);

		var curChk = "chk" + id;
		//alert("curChk = " + curChk);

		var c = document.getElementById(curChk);
		//$("#" + curChk).prop( "checked", true );				
		
		var a = document.getElementById("divSection" + curLet);
		a.className = a.className.replace(" w3-show", "");

		var b = document.getElementById("divSection" + curLet);
		b.className = b.className.replace(" w3-show", "");

		var c = document.getElementById("divSection" + curLet + "Body");
		c.className = c.className.replace(" w3-show", "");
		
		//add the Section Title		
		$("#divSection" + curLet).empty(); 
		$("#divSection" + curLet).append(sec); 
		
		//show/hide section in menu
		var x = document.getElementById(curDiv);
		if (x.className.indexOf("w3-show") == -1) {
			//alert("Show x");
			//if(curLet == "A")
			//{
				//x.className += " w3-show";
			//}
		} else {
			//alert("Hide x");
			x.className = x.className.replace(" w3-show", "");
		}

		//show/hide Body of section on form
		var curDivBody = "divSection" + curLet + "Body";
		var y = document.getElementById(curDivBody);
		if (y.className.indexOf("w3-show") == -1) {
			//alert("Show y");
			//if(curLet == "A")
			//{
				//y.className += " w3-show";
			//}
		} else {
			//alert("Hide y");
			y.className = y.className.replace(" w3-show", "");
		}	
		showFormSection(secId, sec);
	}
	
	function showFormSection(secId, sec)
	{		
		//alert("showFormSection secId = " + secId + ", and sec = " + sec);
				
		var id = secId;
		//alert("showFormSection id = " + id);
		var curDiv = "div" + id;
		var curLet = id.substr(15,1);
		//alert(curDiv);
		//alert(curLet);				
		
		//var a = document.getElementById("divSection" + curLet);
		//a.className = a.className.replace(" w3-show", "");
		//var b = document.getElementById("divSection" + curLet);
		//b.className = b.className.replace(" w3-show", "");
		//var c = document.getElementById("divSection" + curLet + "Body");
		//c.className = c.className.replace(" w3-show", "");
		
		//add the Section Title		
		$("#divSection" + curLet).empty(); 
		$("#divSection" + curLet).append(sec); 
		
		//show/hide section in menu
		var x = document.getElementById(curDiv);
		if (x.className.indexOf("w3-show") == -1) {
			//alert("Show x");			
			x.className += " w3-show";		
		} else {
			//alert("Hide x");
			x.className = x.className.replace(" w3-show", "");
		}

		//show/hide Body of section on form
		var curDivBody = "divSection" + curLet + "Body";
		var y = document.getElementById(curDivBody);
		if (y.className.indexOf("w3-show") == -1) {
			//alert("Show y");
			var tblSections = document.getElementById("tblSections");
			tblSections.style.display = "none";

			var tblSubFields = document.getElementById("tblSubFields");
			tblSubFields.style.display = "block";
			y.className += " w3-show";
		} else {
			//alert("Hide y");
			var tblSections = document.getElementById("tblSections");
			tblSections.style.display = "block";

			var tblSubFields = document.getElementById("tblSubFields");
			tblSubFields.style.display = "none";
			y.className = y.className.replace(" w3-show", "");
		}		
	}	

	function getHeaderProperties()
	{
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}
		
		//dhcl = data.header.company.logo
		var dhclUrl = data.header[0].company[0].logo[0].url;				
		var dhclAlign = data.header[0].company[0].logo[0].align;				
		var dhclWidth = data.header[0].company[0].logo[0].width;
		var dhclHeight = data.header[0].company[0].logo[0].height;
		
		//dhc = data.header.company
		var dhcName = data.header[0].company[0].name;
		var dhcAlign = data.header[0].company[0].align;
		
		//dhct = data.header.company.text
		var dhctColor = data.header[0].company[0].text[0].color;		
		var dhctBGColor = data.header[0].company[0].text[0].backgroundcolor;
		
		//dhctf = data.header.company.text.font
		var dhctfSize = data.header[0].company[0].text[0].font[0].size;
		var dhctfFamily = data.header[0].company[0].text[0].font[0].family;
		var dhctfStyle = data.header[0].company[0].text[0].font[0].style;
		var dhctfWeight = data.header[0].company[0].text[0].font[0].weight;
		
		//dhca = data.header.company.address
		var dhcaStreet = data.header[0].company[0].address[0].street;
		var dhcaUnit = data.header[0].company[0].address[0].unit;
		var dhcaCity = data.header[0].company[0].address[0].city;
		var dhcaCounty = data.header[0].company[0].address[0].county;
		var dhcaState = data.header[0].company[0].address[0].state;
		var dhcaPhone = data.header[0].company[0].phone[0].business;
		var dhcaFax = data.header[0].company[0].address[0].fax;	

		$("#divHeader").empty();
		$("#divHeader").append("<div id='divLogo' class='w3-margin w3-"+ dhcAlign + "'><img id='imgLogo' style='width:" + dhclWidth + "px;height:'" + dhclHeight + "px' src='" + dhclUrl + "'></img></div>");		
		$("#divHeader").append("<div id='divName' class='w3-margin w3-"+ dhcAlign + "'><input type='text' style='text-align:center;font-size:" + dhctfSize + "px;color:" + dhctColor + ";background-color:'" + dhctBGColor + "' value='" + dhcName + "'></input></div>");				
	}
	
	function getProperties(id,field,subfield)
	{	
		//alert("getProperties id = " + id + ", and field = " + field + ", and subfield = " + subfield);
		
		//alert("getProperties");
		//alert("id = " + id);
		//alert("field = " + field);
		//alert("subfield = " + subfield);
				
		//document.getElementById("tblSubFields").scrollTo(0, document.body.scrollHeight || document.documentElement.scrollHeight);
		
		var subfld = subfield;
		//alert("1: subfld = " + subfld);
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				dc = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			dc = JSON.parse(retrievedObject);
		}
		
		document.getElementById("lblCurField").innerHTML = "<b>Subfield: </b>";
		document.getElementById("lblCurField").innerHTML += "<font color='blue'><b>" + subfield.replace(":","") + "</b></font color>";				
		
		//alert(dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields.length);		
		for (var i = 0; i < dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields.length; i++) {
			
			//alert("2: subfld = '" + subfld + "'");
			//alert("3: dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].subfield = '" + dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].subfield + "'");
			
			if(id === dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].id)
			{  	
				//alert("Match on = " + subfld);
				//look for match with name
				//alert(dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].id);	
				//industries[i].industry = "HR";  //add two
				//indAdepAfrmAsecAfldAsubfldC
			   
				var required = dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].required;
				var textcolor = dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].textcolor;
				var checked = dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].checked;
				//var enabled = dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].enabled;				
				var readonly = dc.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].readonly;
				
				//alert("required '" + required + "'");
				//alert("textcolor '" + textcolor + "'");
				//alert("checked '" + checked + "'");
				//alert("readonly '" + readonly + "'");
				//alert("enabled '" + enabled + "'");
			   
				//break;  //exit loop since you found the person
				
				//get values from json and assign to variables
				var chkRequired = document.getElementById("chkRequired");
				var txtTxtColor = document.getElementById("txtTextColor");
				var chkChecked = document.getElementById("chkChecked");
				//var chkEnabled = document.getElementById("chkEnabled");
				var chkReadOnly = document.getElementById("chkReadOnly");
				
				//set radio button to checked/unchecked based on data from json file for each subfield or label that is clicked
				if(required == "required")
				{					
					chkRequired.checked = true;								
				}
				else if(required == "")
				{
					chkRequired.checked = false;
				}
				
				txtTxtColor.value = textcolor;
				//alert(txtTxtColor.value);
				
				if(checked == "checked")
				{
					chkChecked.checked = true;
				}
				else if(checked == "")
				{
					chkChecked.checked = false;
				}
				
				//not included in json subfield properties yet								
				/*
				if(enabled == "enabled")
				{
					chkEnabled.checked = true;
				}
				else if(enabled == "")
				{
					chkEnabled.checked = false;
				}
				*/
				
				//alert("readonly = " + readonly);								
				if(readonly == "readonly")
				{
					chkReadOnly.checked = true;
				}
				else if(readonly == "")
				{
					chkReadOnly.checked = false;
				}							
				
				//var y = document.getElementById("txt");
				break;
				
			}
		}
		localStorage.setItem("dc", JSON.stringify(dc));
		
		var tblSections = document.getElementById("tblSections");
		tblSections.style.display = "none";
		
		var tblMenuSec = document.getElementById("tblSubFields");
		tblMenuSec.style.display = "block";
		openPropDB(id,field,subfield);		
	}	
	
	function openPropDB(id,field,subfield)
	{			
		var divSubFieldProperties = document.getElementById("divSubFieldProperties");
		divSubFieldProperties.style.display = "block";		
	}	
		
	function addremoveSubField(id,cb,subfield,secid)
	{
		//alert("addremoveSubField id = " + id + ", and cb = " + cb + ", and subfield = " + subfield + ", and secid = " + secid);
		
		//alert("addremoveSubField");
		//alert("id = " + id);
		//alert("cb id = " + cb);
		//alert("subfield = " + subfield);
		//alert("secId = " + secid);
		
		var cb = document.getElementById(cb);
		
		if(cb.checked)
		{
			document.getElementById("chkChecked").checked = true;
		}
		else
		{
			document.getElementById("chkChecked").checked = false;
		}
		
		var curLet = id.substr(15,1);
		//alert("curLet = " + curLet);
		var curLabel = subfield;
		//alert("curLabel = " + curLabel);
		               			
		//onFocus(id,cb,subfield);						
		$("#divSection" + curLet + "Body").empty();
		addFields(secid);
		//getProperties(id,cb,subfield);
		
	}
	
	function removeSubField(id,cb,subfield,secid)
	{
		//alert("removeSubField id = " + id + ", and cb = " + cb + ", and subfield = " + subfield + ", and secid = " + secid);
		
		//alert("addremoveSubField");
		//alert("id = " + id);
		//alert("cb id = " + cb);
		//alert("subfield = " + subfield);
		//alert("secId = " + secid);
		
		var curLet = id.substr(15,1);
		//alert("curLet = " + curLet);
		var curLabel = subfield;
		//alert("curLabel = " + curLabel);
		               
		var curSFCB = "chkMSF" + id;
		var sfCB = document.getElementById(curSFCB);
		sfCB.checked = false;
			
		//onFocus(id,cb,subfield);						
		$("#divSection" + curLet + "Body").empty();
		addFields(secid);		
	}	

	function onFocusx()
	{
		isFocus = true;
		//alert("onFocus");

		curField = event.target;
		document.getElementById("divProps").style.display = "block";
		document.getElementById("divDDList").style.display = "none";
		var id = curField.id;		
		//alert("id = " + id);
		if(id.indexOf("txt") == 0)
		{
			label = id.replace("txt","lbl");
			chk = id.replace("txt","chk");
			name = curField.name;			
		}
		else if(id.indexOf("chk") == 0)
		{
			label = id.replace("chk","lbl");
			chk = id.replace("chk","chk");
			name = curField.name;			
		}
		else if(id.indexOf("lbl") == 0)
		{
			label = id;
			chk = id;
			name = curField.innerHTML;
		}
		
		//alert("label = " + label);
		//alert("chk = " + chk);
		//var name = curField.name;
		//alert("name = " + name);
		var highlightColor = "yellow";

		/*
		for()
		{

		}
		*/

		curField.style.backgroundColor = highlightColor;
		
		//var v = document.getElementById("lblBlurName"); 
		var w = document.getElementById("curChkField"); 
		var x = document.getElementById("txtBlurId");
		var y = document.getElementById("txtBlurName");
		var z = document.getElementById("lblBlurId"); 	
		
		//v.value = ;
						
		if(id.indexOf("txt") == 0)
		{
			w.value = id.replace("txt","chk");
			z.value = id.replace("txt","lbl");
		}
		else if(id.indexOf("chk") == 0)
		{
			w.value = id.replace("chk","chk");
			z.value = id.replace("chk","lbl");
		}						

		x.value = curField.id;
		y.value = curField.placeholder.replace("Enter ","");

		valLabel = z.value;
		valField = curField.id;
		//alert("valLabel = " + valLabel);		
		
		//alert("curField.fontcolor = " + curField.fontcolor);
		//if(curField.fontcolor == "red")
		//{
		//	chkRequired.checked = true;
		//}
		//else
		//{
		//	chkRequired.checked = false;
		//}
		
		//alert(data.title);
		data.title = "Test";
		
		localStorage.setItem('dc', JSON.stringify(data));
	}	
	
	function onFSBlur()
	{
		//alert("FSBlur");
		curField = event.target;
		curField.style.backgroundColor = "white";
		
		if(curField.placeholder.indexOf("First Name") != -1 || curField.placeholder.indexOf("Last Name") != -1 || curField.placeholder.indexOf("Social Security") != -1)
		{				
			//alert("1: FSBlur");
			curField.style.backgroundColor = invalidColor;			
		}
		else
		{
			//alert("2: FSBlur");
		}
	}
	
	function onBlur()
	{	
		//alert("onBlur");

		/*
		curField = event.target;
		if(isFocus && curField.name != undefined)
		{						
			//alert("Blur id = '" + curField.id + "'");
			var id = curField.id;
			var fldName = curField.name.replace(':','').replace("FSF","").replace("MSF","").trim();
			//alert("fldName = '" + fldName + "'");
			//alert("valLabel = " + valLabel);
					
			//var x = document.getElementById("txtBlurId");
			//var y = document.getElementById("txtBlurName");
			
			//z.value = curField.id.replace("txt","lbl");
			//x.value = id;
			//y.value = curField.name;
			
			//alert("curField.fontcolor = " + curField.fontcolor);
			//if(curField.fontcolor == "red")
			//{
			//	chkRequired.checked = true;
			//}
			//else
			//{
			//	chkRequired.checked = false;
			//}
			
			//var val = curField.value;
			//alert("'" + id.indexOf("SocialSecurity") + "'");

			//alert("curField = " + curField);
			//alert("curField id = " + id);

			curField.style.backgroundColor = "white";
			var lblId = id.replace("txt","lbl");
			//alert("lblId = " + lblId);
			//alert("lblId.style.color = " + lbl.style.color);
			
			var txtColor = $("#" + lblId).css('color');
			//alert("Text color = " + txtColor);
			
			if(txtColor == "rgb(244, 67, 54)")
			{
				//alert("1: Is required");
				if(curField.value.length == 0)
				{
					//alert("2: Is required");
					$("#" + id).css('background-color',invalidColor);
				}	
				else if(fldName == "SocialSecurity" || fldName == "SSN")
				{
					isSSN();
				}
				else if(fldName.indexOf("Email") != -1)
				{
					isEmail();
				}
				else if(fldName.indexOf("Date") || fldName.indexOf("DOB") || fldName.indexOf("Birth") != -1 && txtColor == "rgb(244, 67, 54)")
				{
					isDate();
				}
				else if(fldName.indexOf("Phone") != -1 || fldName.indexOf("Fax") != -1 || fldName.indexOf("Cell") != -1)
				{
					isPhone();
				}				
			}
			else if(fldName.indexOf("Social Security") != -1 || fldName.indexOf("SSN") != -1)
			{
				isSSN();
			}
			else if(fldName.indexOf("Email") != -1)
			{
				isEmail();
			}
			else if(fldName.indexOf("Date") != -1 && txtColor == "rgb(244, 67, 54)")
			{
				isDate();
			}
			else if(fldName.indexOf("Phone") != -1 || fldName.indexOf("Fax") != -1 || fldName.indexOf("Cell") != -1)
			{
				isPhone();
			}
			else
			{
				curField.value = curField.value.toUpperCase();
			}
		}
		*/			
		//alert(curField.value);
		isFocus = true;				
	}				

	function setProperties()
	{								
		//alert("setProperties");	
		
		var cbRequired = document.getElementById("chkRequired"); //get the Required checkbox object		
		var cbChecked = document.getElementById("chkChecked"); //get the Required checkbox object
				
		var curLabelFld = document.getElementById("lblBlurId"); //get the label object for the required field 
		var curLabelId = curLabelFld.value; //get the id of the label 
		var curChkId = curLabelFld.value; //get the id of the label 
		//alert("curLabelId = " + curLabelId);			

		var modMSFField = document.getElementById(curLabelId.replace("lblFSF","txtMSF")); //this is the label of the field which needs to be set to required or not
		var modFSFField = document.getElementById(curLabelId); //this is the label of the field which needs to be set to required or not
		
		//alert("modMSFField id = " + modMSFField.id);			
		//alert("modFSFField name = " + modFSFField.name);
		
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}		
		
		var bc = document.getElementById("clrSecColor");
		//alert("color = " + bc.value );
		//update the button color in json file
		data.btncolor = bc.value;
				
		//alert("Set text red");
		for (var h=0; h<data.industries[0].departments[0].forms[0].sections[0].fields.length; h++) 
		{
			for (var i=0; i<data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields.length; i++) 
			{
				//alert("Before textcolor " + data.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].textcolor);
				//alert(data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].id + " : " + curLabelId.replace("lbl",""));	
				var subFldId = curLabelId.replace("lblFSF",""); 		
				var subFldName = curLabelId.replace("FSF",""); 		
				
				if (data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].id == subFldId) 
				{
					//alert("Match on " + data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].id);
					var subfldid = data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].id;
					var subfld = data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].subfield;
					var cb = "chkMSF" + subFldId;
					
					var curMenuChkId = "chkMSF" + subFldId;	
					var curFormChkId = "chkFSF" + subFldId;	
					//alert("curMenuChkId = " + curMenuChkId);					
					var curMenuChk = document.getElementById(curMenuChkId);
					var curFormChk = document.getElementById(curFormChkId);						
					
					if(cbRequired.checked == true)
					{
						//alert("set required");
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].required = "required";
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].textcolor = "red";
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].checked = "checked";	
						curMenuChk.checked = true;					
						
						localStorage.setItem('dc', JSON.stringify(data));
						$("#divSection" + curLet + "Body").empty();
						addFields("indAdepAfrmAsecA");
																
						//modMSFField.value = "required";
						//alert("modField value = " + modField.innerHTML);
						modMSFField.className = "w3-textlight-grey";																
					}
					else
					{
						//alert("set NOT required");
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].required = "";
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].textcolor = "black";
						curMenuChk.checked = false;	
						
						localStorage.setItem('dc', JSON.stringify(data));
						$("#divSection" + curLet + "Body").empty();
						addFields("indAdepAfrmAsecA");
												
						modMSFField.className = "w3-text-black";																
					}
					
					if(cbChecked.checked == true)
					{
						//alert("set checked");
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].checked = "checked";	
						curMenuChk.checked = true;					
						
						localStorage.setItem('dc', JSON.stringify(data));
						$("#divSection" + curLet + "Body").empty();
						addFields("indAdepAfrmAsecA");

						
					}
					else
					{
						//alert("set NOT checked");
						data.industries[0].departments[0].forms[0].sections[0].fields[h].subfields[i].checked = "";		
						curMenuChk.checked = false;					
						
						localStorage.setItem('dc', JSON.stringify(data));
						$("#divSection" + curLet + "Body").empty();
						addFields("indAdepAfrmAsecA");					
					}
						
					
					//curFormChkId = "chkFSF" + subFldId;					
					//var curFormChk = document.getElementById(curFormChkId);
					//curFormChk.checked = true;					
					//alert("Check: curMenuChk.checked = " + curMenuChk.checked);
					//alert("Check: curFormChk.checked = " + curFormChk.checked);
										
					//addremoveSubField(subfldid, cb, subfld, "indAdepAfrmAsecA");
					//curFormChk.checked = true;									
					
					break;
				}
				else
				{
					//alert(data.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].id);
				}
				//alert("After textcolor " + data.industries[0].departments[0].forms[0].sections[0].fields[0].subfields[i].textcolor);
			} 								  				
		}
		//loadData(1);
	}
	
	
	function setBtnBGColor()
	{			
		/*
		alert("setBtnBGColor");			
		var x = document.getElementById("clrBtnColor");
		var y = document.getElementById("clrBtnBGColor");
		var curBtnId, curBtn;							
		
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}	
					
		for(var i=0;i<data.industries.length;i++)
		{
			var indId = data.industries[i].id;
			curBtnId = "btn" + indId;
			var curBtn = document.getElementById(curBtnId);
			curBtn.style.background = x.value;			
			for(var d=0;d<data.industries[i].departments.length;d++)
			{
				var depId = data.industries[i].departments[d].id;
				curBtnId = "btn" + depId;
				var curBtn = document.getElementById(curBtnId);
				curBtn.style.background = x.value;			
				
				for(var f=0;f<data.industries[i].departments[d].forms.length;f++)
				{
					var frmId = data.industries[i].departments[d].forms[f].id;
					curBtnId = "btn" + frmId;
					var curBtn = document.getElementById(curBtnId);
					curBtn.style.background = x.value;								
				}
			}
		}
		data.button[0].text[0].color = x.value;
		data.button[0].backgroundcolor = y.value;
		localStorage.setItem("dc", JSON.stringify(data));
		//setSectionColor();
		*/
	}

	function setBtnColor()
	{	
		//alert("setBtnColor");			
		var x = document.getElementById("clrBtnColor");
		var y = document.getElementById("clrBtnBGColor");
				
		var curBtnId, curBtn;				
				
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}
		
		for(var i=0;i<data.industries.length;i++)
		{
			var indId = data.industries[i].id;
			curBtnId = "btn" + indId;
			var curBtn = document.getElementById(curBtnId);
			curBtn.style.color = x.value;
			
			if(indId.indexOf("indZ") == -1)
			{
				curBtn.style.background = y.value;			
			}
			
			for(var d=0;d<data.industries[i].departments.length;d++)
			{
				var depId = data.industries[i].departments[d].id;
				curBtnId = "btn" + depId;
				var curBtn = document.getElementById(curBtnId);
				curBtn.style.color = x.value;			
				if(depId.indexOf("indZ") == -1)
				{
					curBtn.style.background = y.value;			
				}
				
				for(var f=0;f<data.industries[i].departments[d].forms.length;f++)
				{
					var frmId = data.industries[i].departments[d].forms[f].id;
					curBtnId = "btn" + frmId;
					var curBtn = document.getElementById(curBtnId);
					curBtn.style.color = x.value;								
					if(frmId.indexOf("indZ") == -1)
					{	
						curBtn.style.background = y.value;			
					}
				}
			}
		}

		data.button[0].text[0].color = x.value;
		data.button[0].backgroundcolor = y.value;
		localStorage.setItem("dc", JSON.stringify(data));

		//setBtnBGColor();
	}	
	
	function setSecColor()
	{	
		//alert("setSecColor");			
		var curLet = "";
		var x = document.getElementById("clrSecColor");		
		var y = document.getElementById("clrSecBGColor");		
		
		//updateItem('dc', 'sectioncolor', x.value);
		
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}	
		
		data.section[0].text[0].color = x.value;
		data.section[0].backgroundcolor = y.value;
		localStorage.setItem("dc", JSON.stringify(data));
		
		var lum = 105;
		for(var i=0;i<data.industries[0].departments[0].forms[0].sections.length;i++)
		{							
			switch(i)
			{
				case 0:
					curLet = "A";
					break;
				case 1:
					curLet = "B";
					break;
				case 2:
					curLet = "C";
					break;
				case 3:
					curLet = "D";
					break;
				case 4:
					curLet = "E";
					break;
				case 5:
					curLet = "F";
					break;
			}
			
			curSecId = "divSection" + curLet;
			var curDiv = document.getElementById(curSecId);
			
			var curColor = x.value;
			var curBGColor = y.value;
			//alert("curColor = " + curColor);
									
			var rgbaColor = hexToRgbA(curBGColor).toString();
			var rgbaColorArray = rgbaColor.split(',');									
								
			lum = lum-15;									
									
			var rgbaCol = rgbaColorArray[0] + "," + rgbaColorArray[1] + "," + rgbaColorArray[2] + ",0." + lum + ")";

			//alert("x.value = " + x.value);
			curDiv.style.color = curColor;	
			curDiv.style.background = rgbaCol;			
		}		
	}	

	function setSecTextColor()
	{	
		//alert("setSecTextColor");			
		var curLet = "";
		var x = document.getElementById("clrSectionText");		
		
		updateItem('dc', 'sectextcolor', x.value);
		
		if(localData == 0)
		{
			$.ajax({
			  url: 'ajax/dc.json',
			  async: false,
			  dataType: 'json',
			  success: function (json) {
				data = json;
			  }
			});
		}
		else
		{
			var retrievedObject = localStorage.getItem('dc');
			data = JSON.parse(retrievedObject);
		}
		
		var lum = 1;
		for(var i=0;i<data.industries[0].departments[0].forms[0].sections.length;i++)
		{							
			switch(i)
			{
				case 0:
					curLet = "A";
					break;
				case 1:
					curLet = "B";
					break;
				case 2:
					curLet = "C";
					break;
				case 3:
					curLet = "D";
					break;
				case 4:
					curLet = "E";
					break;
				case 5:
					curLet = "F";
					break;
			}
			
			curSecId = "divSection" + curLet;
			var curDiv = document.getElementById(curSecId);
			
			var curColor = x.value;
			//alert("curColor = " + curColor);
									
			var rgbaColor = hexToRgbA(curColor).toString();
			var rgbaColorArray = rgbaColor.split(',');																
									
			var rgbaCol = rgbaColorArray[0] + "," + rgbaColorArray[1] + "," + rgbaColorArray[2] + "," + lum + ")";

			//alert("rgbaCol = " + rgbaCol);
			curDiv.style.color = rgbaCol;
		}	
		//setSecColor();
	}	
	
	function setObject(key, obj) {
		localStorage.setItem(key, JSON.stringify(obj));
	}

	function getObject(key) {
		return JSON.parse(localStorage.getItem(key));
	}

	function updateItem(key, property, value)
	{
		var obj = getObject(key);
		obj[property] = value;
		setObject(key, obj);
	}
	
	function isSSN()
	{
	  //alert("isSSN");
	  curField = event.target;
	  var curId = curField.id;
	  var curLen = curField.value.length;
	  //alert("curLen = " + curLen);

	  if(curLen > 0)
	  {
		if(curLen == 9)
		{
		  curField.style.backgroundColor = clearColor;
		  //alert("Good SSN");
		  errorSSN = "";  
		}
		else
		{
		  curField.style.backgroundColor = invalidColor;
		  //alert("Bad SSN");
		  errorSSN = "SSN";  
		}
	  }
	  else
	  {
		  curField.style.backgroundColor = clearColor;
		  errorSSN = ""; 
	  }
	}	
	
	function isEmail() {
		//alert("isEmail");
		curField = event.target;
		var id = curField.id;
		var val = curField.value;
		errorEmail = "";
		if(val.length > 0)
		{
			var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
			//alert(re.test(val));

			if(re.test(val))
			{
				curField.css.backgroundColor = clearColor;
				errorEmail = "";
			}
			else
			{
				curField.style.backgroundColor = invalidColor;
				errorEmail = "Email";
			}
		}
		else
		{
			errorEmail = "";
		}
	}

	function isPhone() {
		//alert("isPhone");
		curField = event.target;
		var curId = curField.id;
		var curValue = curField.value;
		var curLen = curField.value.length;

		var s2 = (""+curValue).replace(/\D/g, '');
		var m = s2.match(/^(\d{3})(\d{3})(\d{4})$/);
		curField.value = ((!m) ? null : "(" + m[1] + ") " + m[2] + "-" + m[3]);
		//alert(curField.value.length);
		if(curField.value.length >= 0)
		{
			curField.style.backgroundColor = clearColor;
			errorPhone = "";
		}
		else
		{
			curField.style.backgroundColor = invalidColor;
			errorPhone = "Phone";
		}
	}

	function isDate(dateStr)
	{
		alert("isDate");
		curField = event.target;
		var curId = curField.id;
		var curValue = curField.value;
		var curLen = curField.value.length;
		//alert(curValue);
		var m = curValue.split("-")[1];
		var d = curValue.split("-")[2];
		var y = curValue.split("-")[0];

		//alert(m);
		//alert(d);
		//alert(y);

		var newDate = m + "-" + d + "-" + y;
		//alert(newDate);

		var datePat = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/;
		var matchArray = dateStr.match(datePat); // is the format ok?

		if (matchArray == null)
		{
			alert("Please enter date as either mm/dd/yyyy or mm-dd-yyyy.");
			return false;
		}

		month = matchArray[1]; // p@rse date into variables
		day = matchArray[3];
		year = matchArray[5];

		if (month < 1 || month > 12)
		{
			// check month range
			alert("Month must be between 1 and 12.");
		return false;
		}

		if (day < 1 || day > 31)
		{
			alert("Day must be between 1 and 31.");
			return false;
		}

		if ((month==4 || month==6 || month==9 || month==11) && day==31)
		{
			alert("Month " + month + " does not have 31 days!")
			return false;
		}

		if (month == 2)
		{ // check for february 29th
			var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));
			if (day > 29 || (day==29 && !isleap))
			{
				alert("February " + year + " does not have " + day + " days!");
			return false;
			}
		}
		return true; // date is valid
	}
	
	function showMenu()
	{
		//$("#divDDList").css("display","none")
	}
	
	function showFields()
	{
		//alert("showFields");
		$("#properties").css("display","none");
		$("#div0").css("display","block");
	}
	
	function showProps()
	{
		//alert("showProps");
	    $("#div0").css("display","none");
		$("#properties").css("display","block");
	}	
	
	function addremoveField(info)
	{
		//alert("addremoveField info = " + info);
				
		var id = info.split(',')[0];
		var curLet = id.substr(15,1);
		//alert(curLet);
		var curDiv = "div" + id;
		var curSec = info.split(',')[1];
		var x = document.getElementById(curDiv);
		var curCB = "chkMF" + id;
		var cb = document.getElementById(curCB);

		//$("#divSection" + curLet + "Body").empty();
		if(cb.checked)
		{
			//alert("Checked");
			addFields(id);			
		}		
		else
		{
			//alert("Not Checked");
		}
	}
	
	function checkAllFields(secID)
	{
		var x = document.getElementById("chkAllFields");
		var curFldChk = "";
		//alert(secID);
		if(x.checked)
		{			
			for(var i=0;i<6;i++)
			{
				switch(i)
				{
					case 0:
						curFldChk = "chkMF" + secID + "fldA";
						break;
					case 1:
						curFldChk = "chkMF" + secID + "fldB";
						break;
					case 2:
						curFldChk = "chkMF" + secID + "fldC";
						break;
					case 3:
						curFldChk = "chkMF" + secID + "fldD";
						break;
					case 4:
						curFldChk = "chkMF" + secID + "fldE";
						break;
					case 5:
						curFldChk = "chkMF" + secID + "fldF";
						break;
				}				
				$("#" + curFldChk).prop( "checked", true );
			}
		}
		else
		{
			//alert("Not Checked");
			//alert("#div" + "A" + "Body");
			$("#divSection" + "A" + "Body").empty();
			for(var i=0;i<6;i++)
			{
				switch(i)
				{
					case 0:
						curFldChk = "chkMF" + secID + "fldA";
						break;
					case 1:
						curFldChk = "chkMF" + secID + "fldB";
						break;
					case 2:
						curFldChk = "chkMF" + secID + "fldC";
						break;
					case 3:
						curFldChk = "chkMF" + secID + "fldD";
						break;
					case 4:
						curFldChk = "chkMF" + secID + "fldE";
						break;
					case 5:
						curFldChk = "chkMF" + secID + "fldF";
						break;
				}				
				$("#" + curFldChk).prop( "checked", false );
			}
		}		
	}
	
	function selectAllSubFields()
	{
		//alert("selectAllSubFields");
				
		var x = document.getElementById("chkAllSubFields");
		var curSecChk = "";

		if(x.checked)
		{
			//alert("Checked");

			for(var i=0;i<5;i++)
			{

				switch(i)
				{
					case 0:
						curSecChk = "chkindAdepAfrmAsecA";
						break;
					case 1:
						curSecChk = "chkindAdepAfrmAsecB";
						break;
					case 2:
						curSecChk = "chkindAdepAfrmAsecC";
						break;
					case 3:
						curSecChk = "chkindAdepAfrmAsecD";
						break;
					case 4:
						curSecChk = "chkindAdepAfrmAsecE";
						break;
				}
				$("#" + curSecChk).prop( "checked", true );

			}
		}
		else
		{
			//alert("Not Checked");

			for(var i=0;i<5;i++)
			{
				switch(i)
				{
					case 0:
						curSecChk = "chkindAdepAfrmAsecA";
						break;
					case 1:
						curSecChk = "chkindAdepAfrmAsecB";
						break;
					case 2:
						curSecChk = "chkindAdepAfrmAsecC";
						break;
					case 3:
						curSecChk = "chkindAdepAfrmAsecD";
						break;
					case 4:
						curSecChk = "chkindAdepAfrmAsecE";
						break;
				}
				$("#" + curSecChk).prop( "checked", false );
			}
		}		
	}	